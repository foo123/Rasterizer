/**
*   Rasterizer
*   rasterize, stroke and fill lines, rectangles, curves and paths
*
*   @version 0.9.9
*   https://github.com/foo123/Rasterizer
*
**/
!function(e,n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t.call(e):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return t.call(e)}):n in e||(e[n]=t.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[n]})}("undefined"!=typeof self?self:this,"Rasterizer",function(t){"use strict";var C=Object.defineProperty,n="prototype",un=Math,G=1/0,r=un.sqrt(2),R=isNaN,z=isFinite,s=un.PI,p=2*s,o=6,f=r,c=.5,u="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array;function D(n,e,t){if(!(this instanceof D))return new D(n,e,t);var r=new x(n,e,t);C(this,"width",{get:function(){return n},set:function(n){}}),C(this,"height",{get:function(){return e},set:function(n){}}),this.getContext=function(n){if("2d"===n)return r;I('Unsupported context "'+n+'"')}}function x(S,I,o){var i,l,e,t,r,u,a,f,c,s,m,h,d,T,g=this,p=null,y=null,J=1,x=function(){p={}},v=function(n){for(var e in p){var t=p[e],e=e.split(",");n(+e[0],+e[1],t)}p=null},_=function(n,e,t){var r;0<=n&&n<S&&0<=e&&e<I&&0<t&&0<h&&(n=String(n)+","+String(e),e=p[n]||0,r=y?y[n]||0:1,e<(t*=J*h*r))&&(p[n]=t)},w=function(n,e,t){var r="clear"===d?[0,0,0,0]:i(n,e),u=3<r.length?r[3]:1;o(n,e,r[0],r[1],r[2],u*t,d)},b=function(n,e,t){var r="clear"===d?[0,0,0,0]:l(n,e),u=3<r.length?r[3]:1;o(n,e,r[0],r[1],r[2],u*t,d)},n=function(n){i=D.getRGBAFrom([0,0,0,1]),l=D.getRGBAFrom([0,0,0,1]),y=p=null,r="butt",u="miter",a=10,f=1,c=[],s=0,m=q.EYE(),h=1,d="source-over",e=[],T=new P(m),n||g.clearRect(0,0,S,I)};C(g,"strokeStyle",{get:function(){return""},set:function(n){i=D.getRGBAFrom(n)}}),C(g,"fillStyle",{get:function(){return""},set:function(n){l=D.getRGBAFrom(n)}}),C(g,"lineWidth",{get:function(){return f},set:function(n){!R(n=+n)&&z(n)&&0<=n&&(f=n)}}),C(g,"lineCap",{get:function(){return r},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square","round"].indexOf(n)&&(r=n)}}),C(g,"lineJoin",{get:function(){return u},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel","round"].indexOf(n)&&(u=n)}}),C(g,"miterLimit",{get:function(){return a},set:function(n){!R(n=+n)&&z(n)&&0<=n&&(a=n)}}),C(g,"lineDashOffset",{get:function(){return s},set:function(n){!R(n=+n)&&z(n)&&0<=n&&(s=n)}}),C(g,"lineDash",{get:function(){return c.slice()},set:function(n){1&(n=[].concat(n)).length&&(n=n.concat(n)),c=n}}),g.getLineDash=function(){return g.lineDash},g.setLineDash=function(n){g.lineDash=n},C(g,"globalAlpha",{get:function(){return h},set:function(n){!R(n=+n)&&0<=n&&n<=1&&(h=n)}}),C(g,"globalCompositeOperation",{get:function(){return d},set:function(n){d=String(n)}}),g.save=function(){(e=e||[]).push([i,l,y,r,u,a,f,c,s,m,h,d])},g.restore=function(){var n;e&&e.length&&(n=e.pop(),i=n[0],l=n[1],y=n[2],r=n[3],u=n[4],a=n[5],f=n[6],c=n[7],s=n[8],T._t=m=n[9],h=n[10],d=n[11])},g.reset=function(){n()},g.scale=function(n,e){T._t=m=m.mul(q.scale(n,e))},g.rotate=function(n){T._t=m=m.mul(q.rotate(n||0))},g.translate=function(n,e){T._t=m=m.mul(q.translate(n||0,e||0))},g.transform=function(n,e,t,r,u,o){T._t=m=m.mul(new q(n,t,u,e,r,o))},g.getTransform=function(){return m.clone()},g.setTransform=function(n,e,t,r,u,o){1<arguments.length?m=new q(n,t,u,e,r,o):n&&null!=n.a&&null!=n.f&&(m=new q(n.a,n.c,n.e,n.b,n.d,n.f)),T._t=m},g.resetTransform=function(){T._t=m=q.EYE()},g.beginPath=function(){T=new P(m)},g.closePath=function(){T.closePath()},g.moveTo=function(n,e){T.moveTo(n,e)},g.lineTo=function(n,e){T.lineTo(n,e)},g.rect=function(n,e,t,r){T.rect(n,e,t,r)},g.roundRect=function(n,e,t,r){T.roundRect.apply(T,arguments)},g.arc=function(n,e,t,r,u,o){T.arc(n,e,t,r,u,o)},g.ellipse=function(n,e,t,r,u,o,i,l){T.ellipse(n,e,t,r,u,o,i,l)},g.arcTo=function(n,e,t,r,u){T.arcTo(n,e,t,r,u)},g.quadraticCurveTo=function(n,e,t,r){T.quadraticCurveTo(n,e,t,r)},g.bezierCurveTo=function(n,e,t,r,u,o){T.bezierCurveTo(n,e,t,r,u,o)},g.clearRect=function(n,e,t,r){var u=d,o=h;d="clear",h=1,g.fill(new P(m).rect(n,e,t,r),"evenodd"),d=u,h=o},g.strokeRect=function(n,e,t,r){0<f&&g.stroke(new P(m).rect(n,e,t,r))},g.fillRect=function(n,e,t,r){g.fill(new P(m).rect(n,e,t,r),"evenodd")},g.stroke=function(n){var e;0<f&&(e=J,f<1&&(J=f),x(),k(_,n=n||T,f,0,0,r,u,a,0,0,S-1,I-1),v(w),J=e)},t=function(n,e){var t=J,r=S-1,u=I-1,o=(k(_,n,J=.5,0,0,"butt","bevel",0,0,0,r,u),J=t,_),t=e,i=0,e=0,l=r,r=u,a=n._sd;if(a.length){var f,c,s,m,h,d,g,p,y,x,v,w,b,C,T=a.length,R=new Array(T),z=a.ymin,D=a.ymax,P=0,q="evenodd"===t;for(z=un.max(e,un.round(z)),D=un.min(r,un.round(D));z<=D;++z){for(;P<T&&a[P][3]<z;)++P;if(T<=P)break;if((s=a[P])[1]>z)z=un.floor(s[1]);else{for(x=s[0],v=s[2],h=s[1],d=s[3],y=dn(h,d)?(w=!1,p=un.min(x,v),un.max(x,v)):p=w=(v-x)*(z-h)/(d-h)+x,s[8]=w,s[9]=0,R[0]=s,f=P+(c=1);f<T&&a[f][1]<=z;++f)(s=a[f])[3]>=z&&(x=s[0],v=s[2],h=s[1],d=s[3],y=dn(h,d)?(w=!1,p=un.min(p,x,v),un.max(y,x,v)):(w=(v-x)*(z-h)/(d-h)+x,p=un.min(p,w),un.max(y,w)),s[8]=w,s[9]=0,R[c++]=s);if(m=L(R,c),!(c<m+2||(p=un.max(i,un.round(p+.5)),(y=un.min(l,un.round(y-.5)))<p)))if(q)for(g=p;g<=y;++g){for(C=b=!1,f=0;f<c;++f)(s=R[f])[9]||!1!==(w=s[8])&&(w<g&&(b=!b),g<w)&&(C=!C);b&&C&&o(g,z,1)}else for(g=p;g<=y;++g){for(f=C=b=0;f<c;++f)(s=R[f])[9]||!1!==(w=s[8])&&(w<g||g<w)&&(m=A(g,z,s[s[4]<0?2:0],s[s[4]<0?3:1],s[s[4]<0?0:2],s[s[4]<0?1:3]),w<g&&(b+=m),g<w)&&(C+=m);b&&C&&o(g,z,1)}}}}},g.fill=function(n,e){!arguments.length||null==n&&null==e?(n=T,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof P?e="nonzero":(e=n,n=T)),e=String(e||"nonzero").toLowerCase(),x(),t(n=n||T,e="evenodd"!==e?"nonzero":e),v(b)},g.clip=function(n,e){!arguments.length||null==n&&null==e?(n=T,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof P?e="nonzero":(e=n,n=T)),"evenodd"!==(e=String(e||"nonzero").toLowerCase())&&(e="nonzero"),(n=n||T)===T&&(T=new P(m)),x(),t(n,e),y=p,p=null},g.isPointInStroke=function(n,e,t){arguments.length<3&&(t=e,e=n,n=T);var r,u,o,i,l,a,f,c=e||0,s=t||0,e=n||T,m=e._d,h=m.length;for(r=0;r<h;++r)if(o=m[r],0<(i=o.length-2))for(u=0;u<i;u+=2)if(l=+o[u],a=o[u+1],f=+o[u+2],hn((o[u+3]-a)*(c-l),(s-a)*(f-l),1e-4))return!0;return!1},g.isPointInPath=function(n,e,t,r){n instanceof P||(r=t,t=e,e=n,n=T),"evenodd"!==(r=String(r||"nonzero").toLowerCase())&&(r="nonzero");var u=e||0,o=t||0,e=r,i=(t=n||T)._sd;if(!(!i.length||o<i.ymin||o>i.ymax)){for(var l,a,f,c,s,m,h,d,g,p,y,x,v,w=i.length,b=new Array(w),C=0,t="evenodd"===e;C<w&&i[C][3]<o;)++C;if(!(w<=C||(f=i[C])[1]>o)){for(g=f[0],p=f[2],s=f[1],m=f[3],d=dn(s,m)?(y=!1,h=un.min(g,p),un.max(g,p)):h=y=(p-g)*(o-s)/(m-s)+g,f[8]=y,f[9]=0,b[0]=f,l=C+(a=1);l<w&&i[l][1]<=o;++l)(f=i[l])[3]>=o&&(g=f[0],p=f[2],s=f[1],m=f[3],d=dn(s,m)?(y=!1,h=un.min(h,g,p),un.max(d,g,p)):(y=(p-g)*(o-s)/(m-s)+g,h=un.min(h,y),un.max(d,y)),f[8]=y,f[9]=0,b[a++]=f);if(c=L(b,a),a<c+2)return!1!==b[0][8]&&hn(u,b[0][8]);if(!(d<h||u<h||d<u)){if(t)for(v=x=!1,l=0;l<a;++l)(f=b[l])[9]||!1!==(y=f[8])&&(y<=u&&(x=!x),u<=y)&&(v=!v);else for(l=v=x=0;l<a;++l)(f=b[l])[9]||!1!==(y=f[8])&&(y<u||u<y)&&(c=A(u,o,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),y<=u&&(x+=c),u<=y)&&(v+=c);if(x&&v)return!0}}}return!1},n(!0)}function P(m){m=m||q.EYE();var h=this,d=!0,g=[],p=null;C(h,"_t",{get:function(){return m.clone()},set:function(n){m=n}}),C(h,"_d",{get:function(){return g},set:function(n){}}),C(h,"_sd",{get:function(){return p=p||N(g).sort(B)},set:function(n){}}),h.moveTo=function(n,e){n=v([n,e],m);return n&&(g.push(n),d=!1),h},h.closePath=function(){var n,e,t,r;return g.length&&2<g[g.length-1].length&&(n=+g[g.length-1][0],e=g[g.length-1][1],t=+g[g.length-1][g[g.length-1].length-2],r=g[g.length-1][g[g.length-1].length-1],hn(n,t,1e-6)&&hn(e,r,1e-6)||(g[g.length-1].push(n,e),g.push([n,e]),d=!1,p=null)),h},h.lineTo=function(n,e){n=v([n,e],m);return n&&(d?(g.push(n),d=!1):(g[g.length-1].push(n[0],n[1]),p=null)),h},h.rect=function(n,e,t,r){t=v([n,e,n+t,e,n+t,e+r,n,e+r],m);return t&&(t.push(t[0],t[1]),g.length&&g[g.length-1].length<=2?g[g.length-1]=t:g.push(t),g.push([t[0],t[1]]),t[0]=new y(+t[0],{lineCap:"butt",lineJoin:"miter"}),p=null,d=!1),h},h.roundRect=function(n,e,t,r){var u,o,i,l,a,f,c,s=v([n,e,t,r]);return s&&(((f=(arguments[4]&&arguments[4].push?arguments[4]:[].slice.call(arguments,4)).filter(function(n){return 0<n})).length<1||4<f.length)&&I("Invalid radii in roundRect"),4===f.length?(u=f[0],o=f[1],i=f[2],l=f[3]):3===f.length?(u=f[0],o=f[1],l=f[1],i=f[2]):l=2===f.length?(u=f[0],i=f[0],o=f[1],f[1]):(u=f[0],o=f[0],i=f[0],f[0]),t<0&&(n+=t,t=-t,c=u,u=o,o=c,c=l,l=i,i=c),r<0&&(e+=r,r=-r,c=u,u=l,l=c,c=o,o=i,i=c),(f=un.min(t/(u+o),r/(o+i),t/(i+l),r/(u+l)))<1&&(u*=f,o*=f,l*=f,i*=f),a=m.transform(0,0),c=function(n,e,t,r,u,o,i,l){e=m.transform(e,t),t=m.transform(r,u),r=m.transform(o,i),u=m.transform(l,0);n.push.apply(n,w(e[0],e[1],t[0],t[1],r[0],r[1],mn(u[0]-a[0],u[1]-a[1])))},(f=function(n,e,t){e=m.transform(e,t);n.push(e[0],e[1])})(s=[],n+u,e),f(s,n+t-o,e),c(s,n+t-o,e,n+t,e,n+t,e+o,o),f(s,n+t,e+r-i),c(s,n+t,e+r-i,n+t,e+r,n+t-i,e+r,i),f(s,n+l,e+r),c(s,n+l,e+r,n,e+r,n,e+r-l,l),f(s,n,e+u),c(s,n,e+u,n,e,n+u,e,u),s[0]=new y(+s[0],{lineCap:"butt",lineJoin:"bevel"}),g.push(s),g.push(m.transform(n,e)),p=null,d=!1),h},h.arc=function(n,e,t,r,u,o){var i=v([n,e,t,r,u]);return i&&(t<0&&I("Negative radius in arc"),(i=M(n,e,t,t,0,r,u,o,m))[0]=new y(+i[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),i[i.length-2]=new y(+i[i.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),d?(g.push(i),d=!1):g[g.length-1].push.apply(g[g.length-1],i),p=null),h},h.ellipse=function(n,e,t,r,u,o,i,l){var a=v([n,e,t,r,u,o,i]);return a&&((t<0||r<0)&&I("Negative radius in ellipse"),(a=M(n,e,t,r,u,o,i,l,m))[0]=new y(+a[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),a[a.length-2]=new y(+a[a.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),d?(g.push(a),d=!1):g[g.length-1].push.apply(g[g.length-1],a),p=null),h},h.arcTo=function(n,e,t,r,u){u<0&&I("Negative radius in arcTo");n=v([n,e,t,r],m);return n&&(d&&(g.push([n[0],n[1]]),d=!1),e=m.transform(0,0),t=m.transform(u,0),(n=w(+g[g.length-1][g[g.length-1].length-2],g[g.length-1][g[g.length-1].length-1],n[0],n[1],n[2],n[3],mn(t[0]-e[0],t[1]-e[1])))[0]=new y(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new y(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),g[g.length-1].push.apply(g[g.length-1],n),p=null),h},h.quadraticCurveTo=function(n,e,t,r){n=v([n,e,t,r],m);return n&&(d&&(g.push([n[0],n[1]]),d=!1),e=g[g.length-1].pop(),(n=i([+g[g.length-1].pop(),e,n[0],n[1],n[2],n[3]]))[0]=new y(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new y(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),g[g.length-1].push.apply(g[g.length-1],n),p=null),h},h.bezierCurveTo=function(n,e,t,r,u,o){n=v([n,e,t,r,u,o],m);return n&&(d&&(g.push([n[0],n[1]]),d=!1),e=g[g.length-1].pop(),(n=i([+g[g.length-1].pop(),e,n[0],n[1],n[2],n[3],n[4],n[5]]))[0]=new y(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new y(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),g[g.length-1].push.apply(g[g.length-1],n),p=null),h},h.addPath=function(n){return n instanceof P&&(g.push.apply(g,n._d),p=null),h},h.dispose=function(){p=g=null}}function q(n,e,t,r,u,o){var i=this;arguments.length&&(i.m11=n,i.m12=e,i.m13=t,i.m21=r,i.m22=u,i.m23=o),C(i,"a",{get:function(){return i.m11},set:function(n){i.m11=n}}),C(i,"c",{get:function(){return i.m12},set:function(n){i.m12=n}}),C(i,"e",{get:function(){return i.m13},set:function(n){i.m13=n}}),C(i,"b",{get:function(){return i.m21},set:function(n){i.m21=n}}),C(i,"d",{get:function(){return i.m22},set:function(n){i.m22=n}}),C(i,"f",{get:function(){return i.m23},set:function(n){i.m23=n}}),C(i,"is2D",{get:function(){return!0},set:function(n){}}),C(i,"isIdentity",{get:function(){return dn(i.m11,1)&&dn(i.m12,0)&&dn(i.m13,0)&&dn(i.m21,0)&&dn(i.m22,1)&&dn(i.m23,0)},set:function(n){}})}function y(n,e){this.value=n,this.params=e||null}function v(n,e){for(var t=0,r=n.length;t<r;++t)if(R(n[t])||!z(n[t]))return null;if(e)for(t=0;t<r;t+=2){var u=e.transform(n[t],n[t+1]);n[t]=u[0],n[t+1]=u[1]}return n}function J(E,n,e,O,G,t,M,N,B,F,U,Y){var r,u,o,i,l,j,W,V,X,a,f,H,c,K,s,m,h,d,g,p,y,x,v,w,b,C,T,R,z,Q,D,Z,P,q,S,I,$,J,_,k,A,L,nn=n.length,en=(e-1)/2,tn=M,rn=t;if(nn<6)on(E,u=n[0],o=n[1],i=n[2],l=n[3],a=un.abs(i-u),f=un.abs(l-o),(c=ln(e,a,f))[0],c[1],t,t,en,B,F,U,Y);else for(nn-=2,K=N*e/2,r=0;r<nn;r+=2)u=n[r],o=n[r+1],i=n[r+2],l=n[r+3],c=ln(e,a=un.abs(i-u),f=un.abs(l-o)),u.params&&u.params.lineCap&&(rn=!0===u.params.lineCap?t:u.params.lineCap),on(E,u,o,i,l,a,f,c[0],c[1],0===r?rn:null,nn===r+2?rn:null,en,B,F,U,Y),1<e&&0<r&&(u.params&&u.params.lineJoin&&(tn=!0===u.params.lineJoin?M:u.params.lineJoin),s=E,m=j,h=W,d=u,g=o,p=i,y=l,x=V,v=X,w=H[0],b=H[1],C=a,T=f,R=c[0],z=c[1],Q=tn,D=en,Z=K,P=B,q=F,S=U,I=Y,L=A=k=_=J=$=void 0,hn(v*C,T*x,1e-4)||(d<m&&p<d&&(L=m,m=p,p=L,L=h,h=y,y=L,L=x,x=C,C=L,L=v,v=T,T=L,L=w,w=R,R=L,L=b,b=z,z=L),b={x:m-(C=(x=d<m?-1:1)*w),y:h+(w=(T=g<h?-1:1)*b)},m={x:m+C,y:h-w},h={x:d-C,y:g+w},C={x:d+C,y:g-w},J={x:d-(R=(w=p<d?-1:1)*R),y:g+(z=($=y<g?-1:1)*z)},_={x:d+R,y:g-z},k={x:p-R,y:y+z},p={x:p+R,y:y-z},R={x:d,y:g},y=x==w?T==$?dn(v,0)?(A=C,_):(A=h,J):(A=h,_):(A=C,J),"bevel"===Q?(sn(s,A.x,A.y,y.x,y.y,null,null,P,q,S,I),fn(s,R.x,R.y,A.x,A.y,y.x,y.y,P,q,S,I)):(L=x==w?T==$?dn(v,0)?an(m.x,m.y,C.x,C.y,_.x,_.y,p.x,p.y):an(b.x,b.y,h.x,h.y,J.x,J.y,k.x,k.y):an(b.x,b.y,h.x,h.y,_.x,_.y,p.x,p.y):an(m.x,m.y,C.x,C.y,J.x,J.y,k.x,k.y),z=mn(L.x-R.x,L.y-R.y),"round"===Q?(L={x:R.x+D*(L.x-R.x)/z,y:R.y+D*(L.y-R.y)/z},fn(s,R.x,R.y,A.x,A.y,y.x,y.y,P,q,S,I),cn(s,A.x,A.y,y.x,y.y,L.x,L.y,D,P,q,S,I)):Z<z?(sn(s,A.x,A.y,y.x,y.y,null,null,P,q,S,I),fn(s,R.x,R.y,A.x,A.y,y.x,y.y,P,q,S,I)):(sn(s,A.x,A.y,L.x,L.y,null,null,P,q,S,I),sn(s,y.x,y.y,L.x,L.y,null,null,P,q,S,I),fn(s,R.x,R.y,A.x,A.y,y.x,y.y,P,q,S,I),fn(s,L.x,L.y,A.x,A.y,y.x,y.y,P,q,S,I))))),j=u,W=o,V=a,X=f,H=c}function on(n,e,t,r,u,o,i,l,a,f,c,s,m,h,d,g){var p,y,x,v,w;0===l&&0===a?sn(n,e,t,r,u,o,i,m,h,d,g,!0,!0):(n=n,t=t,u=u,i=i,l=l,a=a,f=f,c=c,s=s,m=m,h=h,d=d,g=g,(r=r)<(e=e)&&(p=e,e=r,r=p,p=t,t=u,u=p,p=f,f=c,c=p),p=u<t?-1:1,dn(o=o,0)?("square"===f&&(t-=p*l),"square"===c&&(u+=p*l),"round"===f&&cn(n,e-l,t,e+l,t,e,t-p*l,s,m,h,d,g),"round"===c&&cn(n,r-l,u,r+l,u,r,u+p*l,s,m,h,d,g),S(n,un.round(e-l),un.round(t),un.round(e+l),un.round(u),m,h,d,g)):dn(i,0)?("square"===f&&(e-=+a),"square"===c&&(r+=+a),"round"===f&&cn(n,e,t-a,e,t+a,e-a,t,s,m,h,d,g),"round"===c&&cn(n,r,u-a,r,u+a,r+a,u,s,m,h,d,g),S(n,un.round(e),un.round(t-a),un.round(r),un.round(t+a),m,h,d,g)):("square"===f&&(e-=+a,t-=p*l),"square"===c&&(r+=+a,u+=p*l),i=e-(o=+l),v=t+(y=p*a),e=e+o,t=t-y,x=r-o,w=u+y,r=r+o,o=u-y,"round"===f?cn(n,i,v,e,t,(i-+a+e-+a)/2,(v-p*l+t-p*l)/2,s,m,h,d,g):sn(n,i,v,e,t,null,null,m,h,d,g),sn(n,e,t,r,o,null,null,m,h,d,g),"round"===c?cn(n,r,o,x,w,(+a+x+r+ +a)/2,(w+p*l+o+p*l)/2,s,m,h,d,g):sn(n,r,o,x,w,null,null,m,h,d,g),sn(n,x,w,i,v,null,null,m,h,d,g),fn(n,i,v,e,t,x,w,m,h,d,g),fn(n,e,t,x,w,r,o,m,h,d,g)))}function ln(n,e,t){return n<=1?[0,0]:dn(e,0)?[(n-1)/2,0]:dn(t,0)?[0,(n-1)/2]:[t*(n=(n-1)/2)/(t=mn(e,t)),e*n/t]}function an(n,e,t,r,u,o,i,l){var a=r-e,f=n-t,t=t*e-n*r,e=l-o,n=u-i,r=i*o-u*l,i=a*n-f*e;return!dn(i,0)&&{x:(f*r-t*n)/i,y:(t*e-a*r)/i}}function S(n,e,t,r,u,o,i,l,a){var f,c;if(r<e&&(f=e,e=r,r=f),u<t&&(c=t,t=u,u=c),null!=o){if(r<o||l<e||u<i||a<t)return;e=un.max(e,o),t=un.max(t,i),r=un.min(r,l),u=un.min(u,a)}if(t===u)for(f=e;f<=r;++f)n(f,t,1);else if(e===r)for(c=t;c<=u;++c)n(e,c,1);else for(c=t;c<=u;++c)for(f=e;f<=r;++f)n(f,c,1)}function fn(n,e,t,r,u,o,i,l,a,f,c){var s,m,h,d,g,p,y,x,v,w,b,C,T,R,z=null!=l;if(!z||!(un.max(e,r,o)<l||un.min(e,r,o)>f||un.max(t,u,i)<a||un.min(t,u,i)>c)){if(u<t&&(h=t,t=u,u=h,h=e,e=r,r=h),i<t&&(h=t,t=i,i=h,h=e,e=o,o=h),i<u&&(h=u,u=i,i=h,h=r,r=o,o=h),dn(w=i-t,0))return d=un.round(t),S(n,s=un.round(un.min(e,r,o)),d,m=un.round(un.max(e,r,o)),d,l,a,f,c);for(C=i-u,y=o-e,x=r-e,v=o-r,T=dn(b=u-t,0),R=dn(C,0),d=un.round(t+.5),g=u,p=un.round(i-.5),z&&(d=un.max(a,d),p=un.min(c,p));d<=p;++d)if(m=d<g?T?(s=e,r):(s=y*(d-t)/w+e,x*(d-t)/b+e):R?(s=r,o):(s=y*(d-t)/w+e,v*(d-u)/C+r),un.abs(m-s)<1)(!z||l<=s&&s<=f)&&n(un.round(s),d,1);else for(m<s&&(h=s,s=m,m=h),s=un.round(s+.5),m=un.round(m-.5),z&&(s=un.max(l,s),m=un.min(f,m));s<=m;++s)n(s,d,1)}}function cn(n,e,t,r,u,o,i,l,a,f,c,s){var m,h,d,g,p,y,x,v,w,b,C,T,R,z,D,P,q,S,I,J,_,k,A,E,L,O=null!=a;for(u<t&&(S=t,t=u,u=S,S=e,e=r,r=S),S=o,I=i,k=r,A=u,E=(k-=J=e)*(S-=J)+(A-=_=t)*(I-=_),L=mn(k,A),mn(S,I),P=(b=M(o+l/(I=mn(o-(b=[J+(S=E/L)*k/L,_+S*A/L])[0],i-b[1]))*(b[0]-o),i+l/I*(b[1]-i),l,l,0,J=un.atan2(t,e),un.atan2(u,r),J<un.atan2(i,o))).length-2,z=0;z<P;z+=2)sn(n,b[z],b[z+1],b[z+2],b[z+3],null,null,a,f,c,s);for(b=N([b]).sort(B),m=un.round(un.min(t,u,i,b.ymin)),h=un.round(un.max(t,u,i,b.ymax)),O&&(m=un.max(m,f),h=un.min(h,s)),C=r-e,R=dn(T=u-t,0),z=0,P=b.length;m<=h;++m){for(;z<P&&b[z][3]<m;)++z;if(P<=z)break;if((q=b[z])[1]>m)m=un.floor(q[1]);else{for(g=-(d=G),t<=m&&m<=u&&(g=R?(d=un.min(d,e,r),un.max(g,e,r)):(d=un.min(d,p=C*(m-t)/T+e),un.max(g,p))),D=z;D<P&&b[D][1]<=m;++D)(q=b[D])[3]>=m&&(y=q[0],x=q[2],g=dn(v=q[1],w=q[3])?(d=un.min(d,y,x),un.max(g,y,x)):(d=un.min(d,p=(x-y)*(m-v)/(w-v)+y),un.max(g,p)));for(d=un.round(d+.5),g=un.round(g-.5),O&&(d=un.max(d,a),g=un.min(g,c));d<=g;++d)n(d,m,1)}}}function sn(n,e,t,r,u,o,i,l,a,f,c,s,m){var h=un.min(e,r),d=un.max(e,r),g=un.min(t,u),p=un.max(t,u);if(!(d<l||f<h||p<a||c<g)){if(null==o&&(o=un.abs(r-e),i=un.abs(u-t)),h<l||f<d||g<a||c<p){h=function(n,e,t,r,u,o,i,l){var a=-(t=-(t-n)),f=-(r=-(r-e)),u=n-u,i=i-n,o=e-o,l=l-e,c=1,s=0;if(!(0==t&&u<0||0==a&&i<0||0==r&&o<0||0==f&&l<0||(0!=t&&(u=u/t,i=i/a,t<0?(s<u&&(s=u),i<c&&(c=i)):(s<i&&(s=i),u<c&&(c=u))),0!=r&&(t=o/r,i=l/f,r<0?(s<t&&(s=t),i<c&&(c=i)):(s<i&&(s=i),t<c&&(c=t))),c<s)))return[n+a*s,e+f*s,n+a*c,e+f*c]}(e,t,r,u,l,a,f,c);if(!h)return;e=h[0],t=h[1],r=h[2],u=h[3]}if(dn(o,0)||dn(i,0))return S(n,un.round(e),un.round(t),un.round(r),un.round(u));var y,x,v,w,b=0,C=0,T=0,d=o<i;if(d&&(y=e,e=t,t=y,y=r,r=u,u=y,y=o,o=i,i=y),r<e&&(y=e,e=r,r=y,x=t,t=u,u=x),p=t+(w=(u<t?-1:1)*i/o)*((g=un.round(e))-e),l=s?1:1-(e+.5-un.floor(e+.5)),a=g,T=1-(C=p-(f=un.floor(p))),d?(n(f,a,T*l),n(f+1,a,C*l)):(n(a,f,T*l),n(a,f+1,C*l)),b=p+w,p=u+w*((g=un.round(r))-r),l=m?1:r+.5-un.floor(r+.5),v=g,T=1-(C=p-(c=un.floor(p))),d?(n(c,v,T*l),n(c+1,v,C*l)):(n(v,c,T*l),n(v,c+1,C*l)),d)for(y=a+1;y<v;++y)0<(T=1-(C=b-(x=un.floor(b))))&&n(x,y,T),0<C&&n(x+1,y,C),b+=w;else for(y=a+1;y<v;++y)0<(T=1-(C=b-(x=un.floor(b))))&&n(y,x,T),0<C&&n(y,x+1,C),b+=w}}function M(r,u,o,i,n,l,e,t,a){f=e,t=t,c=T(s=l),f+=c-s,!t&&p<=f-c?f=c+p:t&&p<=c-f?f=c-p:!t&&f<c?f=c+(p-T(c-f)):t&&c<f&&(f=c-(p-T(f-c)));var f,c,s=[c,f],m=(l=s[0],e=s[1],n?un.cos(n):1),h=n?un.sin(n):0,d=e-l,g=a&&!a.isIdentity;return _(function(n){var n=l+n*d,e=o*un.cos(n),n=i*un.sin(n),t=r+m*e-h*n,e=u+h*e+m*n;return g?a.transform(t,e):[t,e]})}function w(n,e,t,r,u,o,i,l){var a=[],n=function(n,e,t,r,u,o,i){if(hn(t,n)&&hn(r,e)||hn(t,u)&&hn(r,o)||hn(i,0))return[t,r];var l,a,f,c=!1;if(u={x:u-t,y:o-r},a=mn((o={x:n-t,y:e-r}).x,o.y),f=mn(u.x,u.y),dn(l=(o.x*u.x+o.y*u.y)/(a*f),-1))return[t,r];if(dn(l,1))return[n+(n=65535/a)*o.x,e+n*o.y];e=i/un.tan(un.acos(l)/2),l={x:t+(n=e/a)*o.x,y:r+n*o.y},n=mn((a={x:o.y,y:-o.x}).x,a.y),o=i/n,(a.x*u.x+a.y*u.y)/(n*f)<0&&(a={x:-a.x,y:-a.y});o={x:l.x+o*a.x,y:l.y+o*a.y},a={x:-a.x,y:-a.y},n=un.acos(a.x/n),a.y<0&&(n=p-n);f=mn((e={x:(t={x:t+(a=e/f)*u.x,y:r+a*u.y}).x-o.x,y:t.y-o.y}).x,e.y),r=un.acos(e.x/f),e.y<0&&(r=p-r);r<n&&n-r<s&&(c=!0);n<r&&s<r-n&&(c=!0);return[l.x,l.y,o.x,o.y,n,r,!(!c||hn(p,i))]}(n,e,t,r,u,o,i);return n&&2<=n.length&&(a.push(n[0],n[1]),2<n.length)&&a.push.apply(a,M(n[2],n[3],i,i,0,n[4],n[5],n[6],l)),a}function i(i){return _(6<i.length?function(n){var e=1-n,t=n*n,r=e*e,u=r*e,o=t*n,r=3*r*n,n=3*t*e;return[u*i[0]+r*i[2]+n*i[4]+o*i[6],u*i[1]+r*i[3]+n*i[5]+o*i[7]]}:function(n){var e=1-n,t=e*e,e=2*e*n,n=n*n;return[t*i[0]+e*i[2]+n*i[4],t*i[1]+e*i[3]+n*i[5]]})}function k(n,e,t,r,u,o,i,l,a,f,c,s){for(var m,h=0,d=e._d,g=d.length;h<g;++h)(m=d[h])&&2<m.length&&J(n,m,t,0,0,o,i,l,a,f,c,s)}function mn(n,e){n=un.abs(n),e=un.abs(e);var t=0;return dn(n,0)?e:dn(e,0)?n:e<n?n*un.sqrt(1+(t=e/n)*t):n<e?e*un.sqrt(1+(t=n/e)*t):n*r}function A(n,e,t,r,u,o){return(n-t)*(o-r)-(u-t)*(e-r)<0?-1:1}function m(n,e,t,r,u,o){var u=u-t,o=o-r,i=mn(u,o);return dn(i,0)?mn(n-t,e-r):un.abs(u*(r-e)-o*(t-n))/i}function N(n){if(!n)return[];for(var e,t,r,u=[],o=n.length,i=G,l=-G,a=0,f=0,c=0;c<o;++c)if((r=n[c])&&!((e=r.length-2)<=0)){for(++a,f=1,t=0;t<e;t+=2)r[t].params&&r[t].params.type&&(++a,f=1),i=un.min(i,r[t+1]),l=un.max(l,r[t+1]),r[t+1]>r[t+3]?u.push([+r[t+2],r[t+3],+r[t],r[t+1],-1,a,f,0,0,0]):u.push([+r[t],r[t+1],+r[t+2],r[t+3],1,a,f,0,0,0]),++f;i=un.min(i,r[1+e]),l=un.max(l,r[1+e])}return u.ymin=i,u.ymax=l,u}function L(n,e){for(var t,r,u,o=0,i=0;i<e;++i)if(!(r=n[i])[9])for(t=i+1;t<e;++t)(u=n[t])[9]||r[4]!==u[4]||r[5]!==u[5]||1<un.abs(r[6]-u[6])||(hn(r[0],u[0],1e-5)&&hn(r[1],u[1],1e-5)&&hn(r[2],u[2],1e-5)&&hn(r[3],u[3],1e-5)||hn(r[3],u[1],1e-6)||hn(r[1],u[3],1e-6))&&(u[9]=1,++o);return o}function _(n){var e,t=[],r=o,u=n(0);for(t.push(u[0],u[1]),e=0;e<r;++e)u=function n(e,t,r,u,o,i){if(u<=r||hn(r,u,1e-6))return o;o=o||t(r);i=i||t(u);var l,a=mn(i[0]-o[0],i[1]-o[1]);if(a<=f){if(a<1)return o;e.push(i[0],i[1])}else m((l=t(a=(r+u)/2))[0],l[1],o[0],o[1],i[0],i[1])<=c?e.push(i[0],i[1]):(n(e,t,r,a,o,l),n(e,t,a,u,l,i));return i}(t,n,0===e?0:e/r,r===e+1?1:(e+1)/r,u,null);return t}function hn(n,e,t){return un.abs(n-e)<(t||1e-6)}function dn(n,e){return un.abs(n-e)<Number.EPSILON}function b(n,e,t){return un.min(un.max(n,e),t)}function T(n){return n=n,t=0,r=e=p,(n-=e*un.floor(n/e))<t&&(n+=e),r<n&&(n-=e),n;var e,t,r}function B(n,e){var t=n[1]-e[1];return hn(t,0)?n[3]-e[3]:t}function I(n){throw new Error(n)}function e(){}return D.VERSION="0.9.9",D[n]={constructor:D,width:null,height:null,getContext:null},D.createImageData=function(n,e){return{data:new u(n*e<<2),width:n,height:e}},D.getRGBAFrom=function(t){var r;return"function"==typeof t?function(n,e){n=t(n,e);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:(r=[t[0],t[1],t[2],3<t.length?t[3]:1],function(n,e){return r})},D.setRGBATo=function(n){var g,p,y;return"function"==typeof n?n:(g=n.width,p=n.height,y=n.data,function(n,e,t,r,u,o,i){if(0<=n&&n<g&&0<=e&&e<p){var n=n+g*e<<2,e=y[n]||0,l=y[1+n]||0,a=y[2+n]||0,f=(y[3+n]||0)/255,c=o,o=0,s=0,m=0,h=0,d=(d=x.CompositionMode[i=i||"source-over"])||x.CompositionMode[i="source-over"];switch(i){case"clear":case"copy":case"xor":case"destination-out":case"destination-in":case"destination-atop":case"destination-over":case"source-out":case"source-in":case"source-atop":case"source-over":h=d(f,f,c,c);break;default:h=c+f-c*f}h=0<h?(o=b(un.round(255*d(f*e/255,f,c*t/255,c)/h),0,255),s=b(un.round(255*d(f*l/255,f,c*r/255,c)/h),0,255),m=b(un.round(255*d(f*a/255,f,c*u/255,c)/h),0,255),b(un.round(255*h),0,255)):m=s=o=0,y[n]=o,y[1+n]=s,y[2+n]=m,y[3+n]=h}})},x[n]={constructor:x,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,getLineDash:null,setLineDash:null,globalAlpha:null,globalCompositeOperation:null,save:null,restore:null,reset:null,scale:null,rotate:null,translate:null,transform:null,getTransform:null,setTransform:null,resetTransform:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,clearRect:null,strokeRect:null,fillRect:null,stroke:null,fill:null,clip:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,e){return D.createImageData(n,e)},getImageData:e,putImageData:e,drawImage:e,createLinearGradient:e,createRadialGradient:e,createConicGradient:e,createPattern:e,strokeText:e,fillText:e,measureText:e},((D.RenderingContext2D=x).CompositionMode={clear:function(n,e,t,r){return 0},copy:function(n,e,t,r){return t},xor:function(n,e,t,r){return t*(1-e)+n*(1-r)},"destination-out":function(n,e,t,r){return n*(1-r)},"destination-in":function(n,e,t,r){return n*r},"destination-atop":function(n,e,t,r){return t*(1-e)+n*r},"destination-over":function(n,e,t,r){return t*(1-e)+n},"source-out":function(n,e,t,r){return t*(1-e)},"source-in":function(n,e,t,r){return t*e},"source-atop":function(n,e,t,r){return t*e+n*(1-r)},"source-over":function(n,e,t,r){return t+n*(1-r)},multiply:function(n,e,t,r){return t*n+t*(1-e)+n*(1-r)},screen:function(n,e,t,r){return t+n-t*n},overlay:function(n,e,t,r){return 2*n<=e?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-2*n*t-e*r},darken:function(n,e,t,r){return un.min(t*e,n*r)+t*(1-e)+n*(1-r)},lighten:function(n,e,t,r){return un.max(t*e,n*r)+t*(1-e)+n*(1-r)},"color-dodge":function(n,e,t,r){return t===r&&0===n?t*(1-e):t===r?r*e+t*(1-e)+n*(1-r):r*e*un.min(1,n/e*r/(r-t))+t*(1-e)+n*(1-r)},"color-burn":function(n,e,t,r){return 0===t&&n===e?r*e+n*(1-r):0===t?n*(1-r):r*e*(1-un.min(1,(1-(e?n/e:0))*r/t))+t*(1-e)+n*(1-r)},"hard-light":function(n,e,t,r){return 2*t<=r?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-r*e-2*t*n},"soft-light":function(n,e,t,r){var u=e?n/e:0;return 2*t<=r?n*(r+(2*t-r)*(1-u))+t*(1-e)+n*(1-r):r<2*t&&4*n<=e?e*(2*t-r)*(16*un.pow(u,3)-12*un.pow(u,2)-3*u)+t-t*e+n:e*(2*t-r)*(un.pow(u,.5)-u)+t-t*e+n},difference:function(n,e,t,r){return t+n-2*un.min(t*e,n*r)},exclusion:function(n,e,t,r){return t*e+n*r-2*t*n+t*(1-e)+n*(1-r)}}).hardlight=x.CompositionMode["hard-light"],x.CompositionMode.softlight=x.CompositionMode["soft-light"],P[n]={constructor:P,_d:null,_sd:null,dispose:null,addPath:null,moveTo:null,lineTo:null,rect:null,roundRect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null},x.Path2D=P,q[n]={constructor:q,is2D:!0,isIdentity:!0,m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1,a:null,b:null,c:null,d:null,e:null,f:null,clone:function(){var n=this;return new q(n.m11,n.m12,n.m13,n.m21,n.m22,n.m23)},mul:function(n){var e=this;if(n instanceof q)return new q(e.m11*n.m11+e.m12*n.m21,e.m11*n.m12+e.m12*n.m22,e.m11*n.m13+e.m12*n.m23+e.m13,e.m21*n.m11+e.m22*n.m21,e.m21*n.m12+e.m22*n.m22,e.m21*n.m13+e.m22*n.m23+e.m23)},inv:function(){var n=this,e=n.m11,t=n.m12,r=n.m13,u=n.m21,o=n.m22,n=n.m23,i=e*o-t*u;return dn(i,0)?null:new q(o=o/i,t=-t/i,-o*r-t*n,o=-u/i,t=e/i,-o*r-t*n)},transform:function(n,e){1===arguments.length&&(e=n[1],n=n[0]);var t=this;return[t.m11*n+t.m12*e+t.m13,t.m21*n+t.m22*e+t.m23]}},q.translate=function(n,e){return new q(1,0,n||0,0,1,e||0)},q.scale=function(n,e,t,r){return new q(n,0,-n*(t=t||0)+t,0,e,-e*(r=r||0)+r)},q.rotate=function(n,e,t){e=e||0,t=t||0;var r=un.cos(n||0),n=un.sin(n||0);return new q(r,-n,e-r*e+n*t,n,r,t-r*t-n*e)},q.skewX=function(n){return new q(1,n||0,0,0,1,0)},q.skewY=function(n){return new q(1,0,0,n||0,1,0)},q.EYE=function(){return new q(1,0,0,0,1,0)},x.Matrix2D=q,y[n]={constructor:y,value:0,params:null,valueOf:function(){return this.value},toString:function(){return String(this.value)}},D});