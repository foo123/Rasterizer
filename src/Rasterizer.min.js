/**
*   Rasterizer
*   rasterize, stroke and fill lines, rectangles, curves and paths
*
*   @version 1.1.1
*   https://github.com/foo123/Rasterizer
*
**/
!function(t,n,e){"use strict";"object"==typeof module&&module.exports?module.exports=e.call(t):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return e.call(t)}):n in t||(t[n]=e.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[n]})}("undefined"!=typeof self?self:this,"Rasterizer",function(i){"use strict";var P=Object.defineProperty,n="prototype",rn=Math,ln=1/0,l=Number.EPSILON,r=rn.sqrt(2),E=isNaN,G=isFinite,e=function(n){return!E(n=+n)&&G(n)&&0<n},c=rn.PI,w=2*c,o=6,h=r,m=.5,M="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array,B=[0,0,0,0],u=/[MLHVCSQTAZ]/gi,I=/-?(?:(?:\d+\.\d+)|(?:\.\d+)|(?:\d+))/g;function Y(n,t,e,r){var i;if(!(this instanceof Y))return new Y(n,t,e,r);r=r||(e&&e.$target?Y.getRGBAFrom(e.$target):function(n,t){return B}),i=new x(n,t,e,r),P(this,"width",{get:function(){return n},set:function(n){}}),P(this,"height",{get:function(){return t},set:function(n){}}),this.getContext=function(n){if("2d"===n)return i;W('Unsupported context "'+n+'"')}}function x(z,A,d,m){var r,i,t,l,u,o,a,f,s,c,h,g,D,p,y,x,O,v,b,T,J=this,w=null,C=null,S=function(){w={}},k=function(n){var t,e,r,i,l,u,o=null,a=null;if(0<p[3]&&(D||y||x)){for(t in o={},a={},w)e=w[t],i=+(r=t.split(","))[0],l=+r[1],o[t]=0<e?n(i,l):0,0<e&&-D<=i&&i<z+D&&-D<=l&&l<A+D&&(u=o[t],a[String(i+y)+","+String(l+x)]=e*(3<u.length?u[3]:1));for(t in a=q(D,a))e=a[t],i=+(r=t.split(","))[0],l=+r[1],0<e&&0<=i&&i<z&&0<=l&&l<A&&0<(e*=v*(C?C[t]||0:1))&&R(i,l,e,null,p);for(t in a=null,w)e=w[t],i=+(r=t.split(","))[0],l=+r[1],0<e&&0<=i&&i<z&&0<=l&&l<A&&0<(e*=v*(C?C[t]||0:1))&&R(i,l,e,null,o[t]);o=null}else for(t in w)e=w[t],i=+(r=t.split(","))[0],l=+r[1],0<e&&0<=i&&i<z&&0<=l&&l<A&&0<(e*=v*(C?C[t]||0:1))&&R(i,l,e,n);w=null},L=function(n,t,e){!E(n)&&!E(t)&&-D<=n&&n<z+D&&-D<=t&&t<A+D&&0<e&&0<v&&(n=String(n)+","+String(t),(w[n]||0)<e)&&(w[n]=e)},I=function(n,t,e){!E(n)&&!E(t)&&-D<=n&&n<z+D&&-D<=t&&t<A+D&&0<e&&(n=String(n)+","+String(t),(w[n]||0)<(e*=C?C[n]||0:1))&&(w[n]=e)},R=function(n,t,e,r,i){r="clear"===b?B:r?r(n,t):i,i=3<r.length?r[3]:1;d(n,t,r[0],r[1],r[2],i*e,b)},n=function(n){r=Y.getRGBAFrom([0,0,0,1]),i=Y.getRGBAFrom([0,0,0,1]),C=w=null,a="butt",f="miter",s=10,c=1,h=[],p=B,x=y=D=g=0,O=_.EYE(),v=1,b="source-over",t=[],T=new N(O),n||J.clearRect(0,0,z,A)},q=function(n,t){if(n)for(var e,r,i,l,u,o,a,f,s,c,n=n/2,n=rn.floor(rn.max(rn.sqrt(12*n*n/3+1),3)),h=n>>1,m=1+h,g=n*n,d=m+z+m,p=d*(m+A+m),y=new Array(p),x=1;x<=3;++x){for(u=0,r=-m;u<p;u+=d,++r)for(i=","+String(r),l=c=0,e=-m;l<d;++l,++e)c+=t[String(e)+i]||0,y[l+u]=c+(0<u?y[l+u-d]:0);for(t={},r=0,a=(m-h-1)*d,s=(m+h)*d;r<A;++r,a+=d,s+=d)for(i=","+String(r),e=0,o=m-h-1,f=m+h;e<z;++e,++o,++f)0<(c=((y[s+f]||0)-(y[s+o]||0)-(y[a+f]||0)+(y[a+o]||0))/g)&&(t[String(e)+i]=c)}return t};P(J,"strokeStyle",{get:function(){return""},set:function(n){r=Y.getRGBAFrom(n)}}),P(J,"fillStyle",{get:function(){return""},set:function(n){i=Y.getRGBAFrom(n)}}),P(J,"lineWidth",{get:function(){return c},set:function(n){e(n=+n)&&(c=n)}}),P(J,"lineCap",{get:function(){return a},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square","round"].indexOf(n)&&(a=n)}}),P(J,"lineJoin",{get:function(){return f},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel","round"].indexOf(n)&&(f=n)}}),P(J,"miterLimit",{get:function(){return s},set:function(n){!E(n=+n)&&G(n)&&0<=n&&(s=n)}}),P(J,"lineDashOffset",{get:function(){return g},set:function(n){!E(n=+n)&&G(n)&&(g=n)}}),P(J,"lineDash",{get:function(){return h.slice()},set:function(n){(n=1&(n=[].concat(n)).length?n.concat(n):n).filter(e).length===n.length&&(h=n)}}),J.getLineDash=function(){return J.lineDash},J.setLineDash=function(n){J.lineDash=n},P(J,"shadowColor",{get:function(){return p.slice()},set:function(n){n&&3<=n.length&&(p=n.slice()).length<4&&p.push(1)}}),P(J,"shadowBlur",{get:function(){return D},set:function(n){!E(n)&&G(n)&&0<=n&&(D=rn.round(n))}}),P(J,"shadowOffsetX",{get:function(){return y},set:function(n){!E(n)&&G(n)&&(y=rn.round(n))}}),P(J,"shadowOffsetY",{get:function(){return x},set:function(n){!E(n)&&G(n)&&(x=rn.round(n))}}),P(J,"globalAlpha",{get:function(){return v},set:function(n){!E(n=+n)&&0<=n&&n<=1&&(v=n)}}),P(J,"globalCompositeOperation",{get:function(){return b},set:function(n){b=String(n)}}),J.save=function(){(t=t||[]).push([r,i,C,a,f,s,c,h,g,O,v,b,p,D,y,x])},J.restore=function(){var n;t&&t.length&&(n=t.pop(),r=n[0],i=n[1],C=n[2],a=n[3],f=n[4],s=n[5],c=n[6],h=n[7],g=n[8],T.transform=O=n[9],v=n[10],b=n[11],p=n[12],D=n[13],y=n[14],x=n[15])},J.reset=function(){n()},J.scale=function(n,t){T.transform=O=O.mul(_.scale(n,t))},J.rotate=function(n){T.transform=O=O.mul(_.rotate(n||0))},J.translate=function(n,t){T.transform=O=O.mul(_.translate(n||0,t||0))},J.transform=function(n,t,e,r,i,l){T.transform=O=O.mul(new _(n,e,i,t,r,l))},J.getTransform=function(){return O.clone()},J.setTransform=function(n,t,e,r,i,l){1<arguments.length?O=new _(n,e,i,t,r,l):n&&null!=n.a&&null!=n.f&&(O=new _(n.a,n.c,n.e,n.b,n.d,n.f)),T.transform=O},J.resetTransform=function(){T.transform=O=_.EYE()},J.beginPath=function(){T=new N(O)},J.closePath=function(){T.closePath()},J.moveTo=function(n,t){T.moveTo(n,t)},J.lineTo=function(n,t){T.lineTo(n,t)},J.rect=function(n,t,e,r){T.rect(n,t,e,r)},J.roundRect=function(n,t,e,r){T.roundRect.apply(T,arguments)},J.arc=function(n,t,e,r,i,l){T.arc(n,t,e,r,i,l)},J.ellipse=function(n,t,e,r,i,l,u,o){T.ellipse(n,t,e,r,i,l,u,o)},J.arcTo=function(n,t,e,r,i){T.arcTo(n,t,e,r,i)},J.quadraticCurveTo=function(n,t,e,r){T.quadraticCurveTo(n,t,e,r)},J.bezierCurveTo=function(n,t,e,r,i,l){T.bezierCurveTo(n,t,e,r,i,l)},J.clearRect=function(n,t,e,r){var i=b,l=v;b="clear",v=1,J.fill(new N(O).rect(n,t,e,r),"evenodd"),b=i,v=l},J.strokeRect=function(n,t,e,r){0<c&&J.stroke(new N(O).rect(n,t,e,r))},J.fillRect=function(n,t,e,r){J.fill(new N(O).rect(n,t,e,r),"evenodd")},J.stroke=function(n){var t,e;0<c&&(e=(n=n||T).transform,t=rn.abs(e.sx),e=rn.abs(e.sy),S(),Q(L,n,c,h,g,a,f,s,t,e,0-D,0-D,z-1+D,A-1+D),k(r))},l=function(n,t){var e=0-D,r=0-D,i=z-1+D,l=A-1+D,u=(Q(L,n,.5,[],0,"butt","bevel",0,1,1,e,r,i,l),L),o=e,e=r,a=i,r=l,f=n._sd;if(f.length){var s,c,h,m,g,d,p,y,x,v,b,w,C,T,S=f.length,k=new Array(S),I=f.ymin,R=f.ymax,q=0,P="evenodd"===t;for(I=rn.max(e,rn.round(I)),R=rn.min(r,rn.round(R));I<=R;++I){for(;q<S&&f[q][3]<I;)++q;if(S<=q)break;if((h=f[q])[1]>I)I=rn.floor(h[1]);else{for(v=h[0],b=h[2],g=h[1],d=h[3],x=V(g,d)?(w=!1,y=rn.min(v,b),rn.max(v,b)):y=w=(b-v)*(I-g)/(d-g)+v,h[8]=w,h[9]=0,k[0]=h,s=q+(c=1);s<S&&f[s][1]<=I;++s)(h=f[s])[3]>=I&&(v=h[0],b=h[2],g=h[1],d=h[3],x=V(g,d)?(w=!1,y=rn.min(y,v,b),rn.max(x,v,b)):(w=(b-v)*(I-g)/(d-g)+v,y=rn.min(y,w),rn.max(x,w)),h[8]=w,h[9]=0,k[c++]=h);if(m=K(k,c),!(c<m+2||(y=rn.max(o,rn.round(y+.5)),(x=rn.min(a,rn.round(x-.5)))<y)))if(P)for(p=y;p<=x;++p){for(T=C=!1,s=0;s<c;++s)(h=k[s])[9]||!1!==(w=h[8])&&(w<p&&(C=!C),p<w)&&(T=!T);C&&T&&u(p,I,1)}else for(p=y;p<=x;++p){for(s=T=C=0;s<c;++s)(h=k[s])[9]||!1!==(w=h[8])&&(w<p||p<w)&&(m=nn(p,I,h[h[4]<0?2:0],h[h[4]<0?3:1],h[h[4]<0?0:2],h[h[4]<0?1:3]),w<p&&(C+=m),p<w)&&(T+=m);C&&T&&u(p,I,1)}}}}},J.fill=function(n,t){!arguments.length||null==n&&null==t?(n=T,t="nonzero"):1!==arguments.length&&null!=t||(n instanceof N?t="nonzero":(t=n,n=T)),t=String(t||"nonzero").toLowerCase(),S(),l(n=n||T,t="evenodd"!==t?"nonzero":t),k(i)},J.clip=function(n,t){!arguments.length||null==n&&null==t?(n=T,t="nonzero"):1!==arguments.length&&null!=t||(n instanceof N?t="nonzero":(t=n,n=T)),"evenodd"!==(t=String(t||"nonzero").toLowerCase())&&(t="nonzero"),(n=n||T)===T&&(T=new N(O));var e=L;L=I,w={},l(n,t),C=w,w=null,L=e},J.isPointInStroke=function(n,r,i){arguments.length<3&&(i=r,r=n,n=T),r=r||0,i=i||0,n=n||T,r=rn.round(r),i=rn.round(i);var l=String(r)+","+String(i),u=!1;return Q(function(n,t,e){r===n&&i===t&&0<(e*=C?C[l]||0:1)&&(u=!0)},n,c,h,g,a,f,s,n.transform.sx,n.transform.sy,null,null,null,null),u},J.isPointInPath=function(n,t,e,r){n instanceof N||(r=e,e=t,t=n,n=T),"evenodd"!==(r=String(r||"nonzero").toLowerCase())&&(r="nonzero");var i=t||0,l=e||0,t=r,u=(e=n||T)._sd;if(!(!u.length||l<u.ymin||l>u.ymax)){for(var o,a,f,s,c,h,m,g,d,p,y,x,v,b=u.length,w=new Array(b),C=0,e="evenodd"===t;C<b&&u[C][3]<l;)++C;if(!(b<=C||(f=u[C])[1]>l)){for(d=f[0],p=f[2],c=f[1],h=f[3],g=V(c,h)?(y=!1,m=rn.min(d,p),rn.max(d,p)):m=y=(p-d)*(l-c)/(h-c)+d,f[8]=y,f[9]=0,w[0]=f,o=C+(a=1);o<b&&u[o][1]<=l;++o)(f=u[o])[3]>=l&&(d=f[0],p=f[2],c=f[1],h=f[3],g=V(c,h)?(y=!1,m=rn.min(m,d,p),rn.max(g,d,p)):(y=(p-d)*(l-c)/(h-c)+d,m=rn.min(m,y),rn.max(g,y)),f[8]=y,f[9]=0,w[a++]=f);if(s=K(w,a),a<s+2)return!1!==w[0][8]&&X(i,w[0][8]);if(!(g<m||i<m||g<i)){if(e)for(v=x=!1,o=0;o<a;++o)(f=w[o])[9]||!1!==(y=f[8])&&(y<=i&&(x=!x),i<=y)&&(v=!v);else for(o=v=x=0;o<a;++o)(f=w[o])[9]||!1!==(y=f[8])&&(y<i||i<y)&&(s=nn(i,l,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),y<=i&&(x+=s),i<=y)&&(v+=s);if(x&&v)return!0}}}return!1},u=function(n,t,e,r,i,l,u){if(r=rn.min(r,t-1),i=rn.min(i,e-1),l=rn.min(l,t-1),u=rn.min(u,e-1),l<r||u<i)return new M(0);var o,a,f,s,c,h=new M((l-r+1)*(u-i+1)<<2);if(n)for(a=r,f=i,s=0;f<=u&&!(l<a&&(a=r,u<++f));s+=4,++a)h[s]=n[c=f*t+a<<2],h[s+1]=n[1+c],h[s+2]=n[2+c],h[s+3]=n[3+c];else for(a=r,f=i,s=0;f<=u&&!(l<a&&(a=r,u<++f));s+=4,++a)o=m(a,f),h[s]=$(o[0],0,255),h[s+1]=$(o[1],0,255),h[s+2]=$(o[2],0,255),h[s+3]=$(rn.round(255*o[3]),0,255);return h},o=function(n,t,e,r,i,l,u,o,a,f,s,c){var h,m,g;for(u=rn.min(u,i-1),o=rn.min(o,l-1),s=rn.min(s,t-1),c=rn.min(c,e-1),a=rn.min(a,i-1),f=rn.min(f,l-1),s-=u,c-=o,m=u,g=o;g<=f&&!(a<m&&(m=u,f<++g));++m)e<=g+c||t<=m+s||d(m+s,g+c,r[h=g*i+m<<2],r[1+h],r[2+h],r[3+h]/255,"copy")},J.drawImage=function(n,v,b,w,C,T,S,k,I){n&&n.data||W("Invalid image data in drawImage");var R,q,e,P,z,A=n.width,D=n.height,r=n.data,n=arguments.length,t=i;A&&D||W("Invalid image data in drawImage"),v=v||0,b=b||0,n<4&&(w=A,C=D),n<6&&(T=v,S=b,k=w,I=C),R=O.inv(),q=[0,0],z=[0,0,0,0],e=[0,0,0,0],P=function(n,t){return 0<=n&&0<=t&&n<A&&t<D?[r[n=n+A*t<<2],r[1+n],r[2+n],r[3+n]]:e},i=function(n,t){var e,r,i,l,u,o,a,f,s,c,h,m,g,d,p,y,x;return R.transform(n,t,q),n=v+(q[0]-T)*w/k,t=b+(q[1]-S)*C/I,-1<n&&n<A&&-1<t&&t<D?(i=rn.floor(n),l=rn.floor(t),e=rn.abs(n-i),r=rn.abs(t-l),i=P((n=i)-1,(t=l)-1),l=P(n,t-1),u=P(n+1,t-1),o=P(n+2,t-1),a=P(n-1,t),f=P(n,t),s=P(n+1,t),c=P(n+2,t),h=P(n-1,t+1),m=P(n,t+1),g=P(n+1,t+1),d=P(n+2,t+1),p=P(n-1,t+2),y=P(n,t+2),x=P(n+1,t+2),n=P(n+2,t+2),z[0]=$(rn.round(F(F(i[0],l[0],u[0],o[0],e),F(a[0],f[0],s[0],c[0],e),F(h[0],m[0],g[0],d[0],e),F(p[0],y[0],x[0],n[0],e),r)),0,255),z[1]=$(rn.round(F(F(i[1],l[1],u[1],o[1],e),F(a[1],f[1],s[1],c[1],e),F(h[1],m[1],g[1],d[1],e),F(p[1],y[1],x[1],n[1],e),r)),0,255),z[2]=$(rn.round(F(F(i[2],l[2],u[2],o[2],e),F(a[2],f[2],s[2],c[2],e),F(h[2],m[2],g[2],d[2],e),F(p[2],y[2],x[2],n[2],e),r)),0,255),z[3]=$(rn.round(F(F(i[3],l[3],u[3],o[3],e),F(a[3],f[3],s[3],c[3],e),F(h[3],m[3],g[3],d[3],e),F(p[3],y[3],x[3],n[3],e),r)),0,255)/255,z):B},J.fillRect(T,S,k,I),i=t},J.getImageData=function(n,t,e,r){var i=z,l=A;return null==t&&(t=0),null==e&&(e=i),null==r&&(r=l),n=rn.max(0,rn.min(n=null==n?0:n,i-1)),t=rn.max(0,rn.min(t,l-1)),e=rn.min(n+e-1,i-1),r=rn.min(t+r-1,l-1),{data:u(null,i,l,n,t,e,r),width:e-n+1,height:r-t+1}},J.putImageData=function(n,t,e){n&&n.data||W("Invalid image data in putImageData");var r=n.width,i=n.height;o(0,z,A,n.data,r,i,0,0,r-1,i-1,t=null==t?0:t,e=null==e?0:e)},n(!0)}function F(n,t,e,r,i){var l=i*i;return(-n/2+3*t/2-3*e/2+r/2)*l*i+(n-5*t/2+2*e-r/2)*l+(-n/2+e/2)*i+t}function N(n,c){var t,s,e,h,m,g,d,p,y,x=this,f=!0,v=[],b=null;P(x,"transform",{get:function(){return c.clone()},set:function(n){c=n}}),P(x,"_d",{get:function(){return v},set:function(n){}}),P(x,"_sd",{get:function(){return b=b||Z(v)},set:function(n){}}),x.moveTo=function(n,t){n=T([n,t],c);return n&&(v.push(n),f=!1),x},x.closePath=function(){var n,t,e,r,i,l;return v.length&&2<v[v.length-1].length&&(n=+v[v.length-1][0],t=v[v.length-1][1],e=+v[v.length-1][2],r=v[v.length-1][3],i=+v[v.length-1][v[v.length-1].length-2],l=v[v.length-1][v[v.length-1].length-1],X(n,i,1e-6)&&X(t,l,1e-6)?v[v.length-1][v[v.length-1].length-2]=new C(i,{join:[e,r]}):v[v.length-1].push(new C(n,{join:[e,r]}),t),v.push([n,t]),f=!1,b=null),x},x.lineTo=function(n,t){n=T([n,t],c);return n&&(f?(v.push(n),f=!1):(v[v.length-1].push(n[0],n[1]),b=null)),x},x.rect=function(n,t,e,r){e=T([n,t,n+e,t,n+e,t+r,n,t+r],c);return e?(e[0]=new C(+e[0],{lineCap:"butt",lineJoin:"miter"}),v.length&&v[v.length-1].length<=2?v[v.length-1]=e:v.push(e),b=null,x.closePath()):x},x.roundRect=function(n,t,e,r){var i,l,u,o,a,f,s=T([n,t,e,r]);return s?(((f=(arguments[4]&&arguments[4].push?arguments[4]:[].slice.call(arguments,4)).filter(function(n){return 0<n})).length<1||4<f.length)&&W("Invalid radii in roundRect"),4===f.length?(i=f[0],l=f[1],u=f[2],o=f[3]):3===f.length?(i=f[0],l=f[1],o=f[1],u=f[2]):o=2===f.length?(i=f[0],u=f[0],l=f[1],f[1]):(i=f[0],l=f[0],u=f[0],f[0]),e<0&&(n+=e,e=-e,a=i,i=l,l=a,a=o,o=u,u=a),r<0&&(t+=r,r=-r,a=i,i=o,o=a,a=l,l=u,u=a),(f=rn.min(e/(i+l),r/(l+u),e/(u+o),r/(i+o)))<1&&(i*=f,l*=f,o*=f,u*=f),S(s=[],n+i,t,c),S(s,n+e-l,t,c),k(s,n+e-l,t,n+e,t,n+e,t+l,l,c),S(s,n+e,t+r-u,c),k(s,n+e,t+r-u,n+e,t+r,n+e-u,t+r,u,c),S(s,n+o,t+r,c),k(s,n+o,t+r,n,t+r,n,t+r-o,o,c),S(s,n,t+i,c),k(s,n,t+i,n,t,n+i,t,i,c),s[0]=new C(+s[0],{lineCap:"butt",lineJoin:"bevel"}),v.push(s),b=null,x.closePath()):x},x.arc=function(n,t,e,r,i,l){var u=T([n,t,e,r,i]);return u&&(e<0&&W("Negative radius in arc"),(u=U(n,t,e,e,0,r,i,l,c))[0]=new C(+u[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),u[u.length-2]=new C(+u[u.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),f?(v.push(u),f=!1):v[v.length-1].push.apply(v[v.length-1],u),b=null),x},x.ellipse=function(n,t,e,r,i,l,u,o){var a=T([n,t,e,r,i,l,u]);return a&&((e<0||r<0)&&W("Negative radius in ellipse"),(a=U(n,t,e,r,i,l,u,o,c))[0]=new C(+a[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),a[a.length-2]=new C(+a[a.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),f?(v.push(a),f=!1):v[v.length-1].push.apply(v[v.length-1],a),b=null),x},x.arcTo=function(n,t,e,r,i){n=T([n,t,e,r,i]);return n&&(i<0&&W("Negative radius in arcTo"),f&&(v.push(c.transform(n[0],n[1])),f=!1),(n=q((t=c.inv().transform(+v[v.length-1][v[v.length-1].length-2],v[v.length-1][v[v.length-1].length-1]))[0],t[1],n[0],n[1],n[2],n[3],i,c))[0]=new C(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new C(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),v[v.length-1].push.apply(v[v.length-1],n),b=null),x},x.quadraticCurveTo=function(n,t,e,r){n=T([n,t,e,r],c);return n&&(f&&(v.push([n[0],n[1]]),f=!1),t=v[v.length-1].pop(),(n=a([+v[v.length-1].pop(),t,n[0],n[1],n[2],n[3]],c))[0]=new C(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new C(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),v[v.length-1].push.apply(v[v.length-1],n),b=null),x},x.bezierCurveTo=function(n,t,e,r,i,l){n=T([n,t,e,r,i,l],c);return n&&(f&&(v.push([n[0],n[1]]),f=!1),t=v[v.length-1].pop(),(n=a([+v[v.length-1].pop(),t,n[0],n[1],n[2],n[3],n[4],n[5]],c))[0]=new C(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new C(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),v[v.length-1].push.apply(v[v.length-1],n),b=null),x},x.addPath=function(n){return n instanceof N&&(t(n),b=null),x},x.dispose=function(){b=v=null},t=function(n){var e;n._d.reduce(function(n,t){return t&&t.length&&2<t.length&&(e=[+t[t.length-2],t[t.length-1]],n.push(t.slice())),n},v),f=!e||(v.push(e),!1)},1===arguments.length&&(n instanceof _?(c=n,n=null):c=null),c=(c=c instanceof _?c:null)||_.EYE(),n&&(n instanceof N?t(n):(n=n,s=x,e=D(String(n)).match(u),h=n.split(u),d=null,y=p=!(g=[(m=[0,0])[0],m[1]]),e&&e.forEach(function(n,t){var e,r,i,l,u,o,a=n===n.toLowerCase(),f=(D(h[t+1]||"").match(I)||[]).map(A);switch(n.toUpperCase()){case"M":for(o=!1;2<=f.length;)o?(e=[m[0],m[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],m[0]=r[0],m[1]=r[1],s.lineTo(m[0],m[1]),p=!0):(m[0]=(a?m[0]:0)+f.shift(),m[1]=(a?m[1]:0)+f.shift(),g=[m[0],m[1]],s.moveTo(m[0],m[1]),y=!0),o=!0;d=null;break;case"H":for(p=y||p;1<=f.length;)e=[m[0],m[1]],r=[(a?e[0]:0)+f.shift(),e[1]],m[0]=r[0],m[1]=r[1],s.lineTo(m[0],m[1]),y&&(p=!0),y=!0;d=null;break;case"V":for(p=y||p;1<=f.length;)r=[(e=[m[0],m[1]])[0],(a?e[1]:0)+f.shift()],m[0]=r[0],m[1]=r[1],s.lineTo(m[0],m[1]),y&&(p=!0),y=!0;d=null;break;case"L":for(p=y||p;2<=f.length;)e=[m[0],m[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],m[0]=r[0],m[1]=r[1],s.lineTo(m[0],m[1]),y&&(p=!0),y=!0;d=null;break;case"A":for(y=p=!0;7<=f.length;)u={start:null,end:null,radiusX:f.shift(),radiusY:f.shift(),angle:f.shift(),largeArc:f.shift(),sweep:f.shift()},e=[m[0],m[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],m[0]=r[0],m[1]=r[1],u.start=e,u.end=r,s.ellipse.apply(s,function(n,t,e,r,i,l,u,o,a){var f=a?rn.cos(a):1,s=a?rn.sin(a):0,c=f*(n-e)/2+s*(t-r)/2,h=-s*(n-e)/2+f*(t-r)/2,m=c*c,g=h*h,d=u*u,p=o*o,y=m/d+g/p;1<y&&(y=rn.sqrt(y),d=(u*=y)*u,p=(o*=y)*o);y=rn.sqrt(rn.abs((d*p-d*g-p*m)/(d*g+p*m)))*(i===l?-1:1),d=y*u*h/o,g=-y*o*c/u,p=f*d-s*g+(n+e)/2,m=s*d+f*g+(t+r)/2,i=H(z(1,0,(c-d)/u,(h-g)/o)),y=z((c-d)/u,(h-g)/o,(-c-d)/u,(-h-g)/o);y-=rn.floor(y/w)*w,!l&&0<y&&(y-=w);l&&y<0&&(y+=w);return[p,m,u,o,a,i,i+y,!l]}(u.start[0],u.start[1],u.end[0],u.end[1],u.largeArc,u.sweep,u.radiusX,u.radiusY,u.angle));d=null;break;case"Q":for(y=p=!0;4<=f.length;)e=[m[0],m[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],i=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],m[0]=i[0],m[1]=i[1],s.quadraticCurveTo(r[0],r[1],i[0],i[1]),d=["Q",e,r,i];break;case"T":for(y=p=!0;2<=f.length;)e=[m[0],m[1]],i=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],r=d&&"Q"===d[0]?[2*e[0]-d[2][0],2*e[1]-d[2][1]]:[e[0],e[1]],m[0]=i[0],m[1]=i[1],s.quadraticCurveTo(r[0],r[1],i[0],i[1]),d=["Q",e,r,i];break;case"C":for(y=p=!0;6<=f.length;)e=[m[0],m[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],i=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],l=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],m[0]=l[0],m[1]=l[1],s.bezierCurveTo(r[0],r[1],i[0],i[1],l[0],l[1]),d=["C",e,r,i,l];break;case"S":for(y=p=!0;4<=f.length;)e=[m[0],m[1]],i=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],l=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],r=d&&"C"===d[0]?[2*e[0]-d[3][0],2*e[1]-d[3][1]]:[e[0],e[1]],m[0]=l[0],m[1]=l[1],s.bezierCurveTo(r[0],r[1],i[0],i[1],l[0],l[1]),d=["C",e,r,i,l];break;case"Z":e=[m[0],m[1]],r=[g[0],g[1]],m[0]=r[0],m[1]=r[1],g=[m[0],m[1]],s.closePath(),y=p=!1,d=null}}),p&&s.moveTo(m[0],m[1])))}function _(n,t,e,r,i,l){var u=this,o=1,a=1;arguments.length&&(u.m11=n,u.m12=t,u.m13=e,u.m21=r,u.m22=i,u.m23=l),P(u,"a",{get:function(){return u.m11},set:function(n){u.m11=o=n}}),P(u,"c",{get:function(){return u.m12},set:function(n){u.m12=n}}),P(u,"e",{get:function(){return u.m13},set:function(n){u.m13=n}}),P(u,"b",{get:function(){return u.m21},set:function(n){u.m21=n}}),P(u,"d",{get:function(){return u.m22},set:function(n){u.m22=a=n}}),P(u,"f",{get:function(){return u.m23},set:function(n){u.m23=n}}),P(u,"is2D",{get:function(){return!0},set:function(n){}}),P(u,"isIdentity",{get:function(){return V(u.m11,1)&&V(u.m12,0)&&V(u.m13,0)&&V(u.m21,0)&&V(u.m22,1)&&V(u.m23,0)},set:function(n){}}),P(u,"sx",{get:function(){return o},set:function(n){o*=n}}),P(u,"sy",{get:function(){return a},set:function(n){a*=n}})}function C(n,t){this.value=n,this.params=t||null}function T(n,t){for(var e,r=0,i=n.length;r<i;++r)if(E(n[r])||!G(n[r]))return null;if(t)for(e=[0,0],r=0;r<i;r+=2)t.transform(n[r],n[r+1],e),n[r]=e[0],n[r+1]=e[1];return n}function S(n,t,e,r){r=r?r.transform(t,e):[t,e];n.push(r[0],r[1])}function k(n,t,e,r,i,l,u,o,a){n.push.apply(n,q(t,e,r,i,l,u,o,a))}function un(){return this.v}function fn(n,t,e,r,i,l){var u,o,a,f,s=t.length;if((e=$(e,0,l-1))+1<l)for(f=i.l||0,o=i.i||0;o<s;++o){if(0<t[o]&&f+t[o]>e)return a=o<<1,r.i=o,V(u=$((e-(r.l=f))/t[o],0,1),0)?(r.x=n[a+0],r.y=n[a+1]):V(u,1)?(r.x=n[a+2],r.y=n[a+3]):(r.x=+n[a]+(+n[a+2]-n[a])*u,r.y=+n[a+1]+(+n[a+3]-n[a+1])*u),void(r.y={dx:+n[a+2]-n[a+0],dy:+n[a+3]-n[a+1],v:r.y,valueOf:un});f+=t[o]}a=(o=s-1)<<1,r.i=o,r.l=l,r.x=n[a+2],r.y={dx:+n[a+2]-n[a+0],dy:+n[a+3]-n[a+1],v:n[a+3],valueOf:un}}function sn(n,t,e,r,i,l,u,o,a,f,s,c,h,m,g,d,p,y,x){var v,b,w,C,T;return 0===o&&0===a?j(n,t,e,r,i,l,u,c,h,m,g,d,!0,!0,x):0===l&&0===u&&null!=p?j(n,t-o,e-(p*y<0?1:-1)*a,r+o,i+(p*y<0?1:-1)*a,2*o,2*a,1,h,m,g,d,!1,!1,x):(n=n,t=t,e=e,r=r,i=i,o=o,a=a,f=f,s=s,c=c,h=h,m=m,g=g,d=d,p=p,y=y,x=x,T=an(l=l,u=u),T=null!=x&&x<1&&0<x?x:(T<1?T:1)||1,r<t&&(x=t,t=r,r=x,x=e,e=i,i=x,x=f,f=s,s=x),x=i<e?-1:1,!V(l,0)||null!=p&&0!==p?!V(u,0)||null!=y&&0!==y?("square"===f&&(t-=+a,e-=x*o),"square"===s&&(r+=+a,i+=x*o),p=t-(l=+o),y=e+(u=x*a),v=t+l,w=e-u,b=r-l,C=i+u,l=r+l,u=i-u,"round"!==f&&"round"!==s||(c=an(o,a)),"round"===f?L(n,p,y,v,w,(p-+a+v-+a)/2,(y-x*o+w-x*o)/2,c,h,m,g,d,T):j(n,p,y,v,w,null,null,T,h,m,g,d),j(n,v,w,l,u,null,null,T,h,m,g,d),"round"===s?L(n,l,u,b,C,(+a+b+l+ +a)/2,(C+x*o+u+x*o)/2,c,h,m,g,d,T):j(n,l,u,b,C,null,null,T,h,m,g,d),j(n,b,C,p,y,null,null,T,h,m,g,d),function(n,t,e,r,i,l,u,o,a,f,s,c,h,m){var g,d,p,y,x,v,b,w,C=rn.min(e,i,u,a),T=rn.max(e,i,u,a),S=rn.min(t,r,l,o),k=rn.max(t,r,l,o),I=null!=f;if(I&&(T<s||h<C||k<f||c<S))return;null==m&&(m=1);if(V(C,T))return C=rn.round(C),S=rn.round(S),k=rn.round(k),R(n,S,C,k,C,f,s,c,h,m);C=rn.round(C),T=rn.round(T),I&&(C=rn.max(s,C),T=rn.min(h,T));if(!(T<C))for((x=[i<e?[r,i,t,e]:[t,e,r,i],u<i?[l,u,r,i]:[r,i,l,u],a<u?[o,a,l,u]:[l,u,o,a],e<a?[t,e,o,a]:[o,a,t,e]])[1][1]<x[0][1]&&(v=x[0],x[0]=x[1],x[1]=v),x[3][1]<x[2][1]&&(v=x[2],x[2]=x[3],x[3]=v),x[2][1]<x[0][1]&&(v=x[0],x[0]=x[2],x[2]=v),x[3][1]<x[1][1]&&(v=x[1],x[1]=x[3],x[3]=v),x[2][1]<x[1][1]&&(v=x[2],x[2]=x[1],x[1]=v),b=0;C<=T;++C){for(;b<4&&x[b][3]<C;)++b;if(4<=b)return;for(k=-(S=ln),w=b;w<4;++w)p=x[w][0],g=x[w][1],y=x[w][2],d=x[w][3],g<=C&&C<=d&&(k=V(g,d)?(S=rn.min(S,p,y),rn.max(k,p,y)):(y=(y-p)*(C-g)/(d-g)+p,S=rn.min(S,y),rn.max(k,y)));if(k-S<1)(!I||f<=S&&S<=c)&&n(rn.round(S),C,1);else for(S=rn.round(S+.5),k=rn.round(k-.5),I&&(S=rn.max(f,S),k=rn.min(c,k));S<=k;++S)n(S,C,m)}}(n,p,y,v,w,l,u,b,C,h,m,g,d,T)):("square"===f&&(t-=+a),"square"===s&&(r+=+a),"round"===f&&L(n,t,e-a,t,e+a,t-a,e,a,h,m,g,d,T),"round"===s&&L(n,r,i-a,r,i+a,r+a,i,a,h,m,g,d,T),R(n,rn.round(t),rn.round(e-a),rn.round(r),rn.round(e+a),h,m,g,d,T)):("square"===f&&(e-=x*o),"square"===s&&(i+=x*o),"round"===f&&L(n,t-o,e,t+o,e,t,e-x*o,o,h,m,g,d,T),"round"===s&&L(n,r-o,i,r+o,i,r,i+x*o,o,h,m,g,d,T),R(n,rn.round(t-o),rn.round(e),rn.round(t+o),rn.round(i),h,m,g,d,T)),T)}function on(n,t,e,r,i,l,u){var n=rn.max(0,(n-1)/2),o=1===r?0:r/2,a=1===i?0:i/2;return null!=l&&(t=rn.abs(l),e=rn.abs(u)),r*n+o<.5&&i*n+a<.5?[0,0]:V(t,0)?[r*n+o,0]:V(e,0)?[0,i*n+a]:[(r*n+o)*e/(l=an(t,e)),(i*n+a)*t/l]}function R(n,t,e,r,i,l,u,o,a,f){var s,c;if(r<t&&(s=t,t=r,r=s),i<e&&(c=e,e=i,i=c),null!=l){if(r<l||o<t||i<u||a<e)return;t=rn.max(t,l),e=rn.max(e,u),r=rn.min(r,o),i=rn.min(i,a)}if(null==f&&(f=1),e===i)for(s=t;s<=r;++s)n(s,e,f);else if(t===r)for(c=e;c<=i;++c)n(t,c,f);else for(c=e;c<=i;++c)for(s=t;s<=r;++s)n(s,c,f)}function J(n,t,e,r,i,l,u,o,a,f,s,c){var h,m,g,d,p,y,x,v,b,w,C,T,S,k,I=null!=o;if(!I||!(rn.max(t,r,l)<o||rn.min(t,r,l)>f||rn.max(e,i,u)<a||rn.min(e,i,u)>s)){if(null==c&&(c=1),i<e&&(g=e,e=i,i=g,g=t,t=r,r=g),u<e&&(g=e,e=u,u=g,g=t,t=l,l=g),u<i&&(g=i,i=u,u=g,g=r,r=l,l=g),V(w=u-e,0))return d=rn.round(e),R(n,h=rn.round(rn.min(t,r,l)),d,m=rn.round(rn.max(t,r,l)),d,o,a,f,s,c);for(T=u-i,x=l-t,v=r-t,b=l-r,S=V(C=i-e,0),k=V(T,0),d=rn.round(e+.5),p=i,y=rn.round(u-.5),I&&(d=rn.max(a,d),y=rn.min(s,y));d<=y;++d)if(m=d<p?S?(h=t,r):(h=x*(d-e)/w+t,v*(d-e)/C+t):k?(h=r,l):(h=x*(d-e)/w+t,b*(d-i)/T+r),rn.abs(m-h)<1)(!I||o<=h&&h<=f)&&n(rn.round(h),d,1);else for(m<h&&(g=h,h=m,m=g),h=rn.round(h+.5),m=rn.round(m-.5),I&&(h=rn.max(o,h),m=rn.min(f,m));h<=m;++h)n(h,d,c)}}function L(n,t,e,r,i,l,u,o,a,f,s,c,h){var m,g,d,p,y,x,v,b,w,C,T,E,G,S,k,I,R,q,P,z,A,D,O,J,L,M=null!=a;for(i<e&&(q=e,e=i,i=q,q=t,t=r,r=q),q=l,P=u,D=r,O=i,J=(D-=z=t)*(q-=z)+(O-=A=e)*(P-=A),L=an(D,O),an(q,P),z=l+o/(P=an(l-(C=[z+(q=J/L)*D/L,A+q*O/L])[0],u-C[1]))*(C[0]-l),J=u+o/P*(C[1]-u),D=rn.atan2(u-J,l-z),A=rn.atan2(e-J,t-z),O=rn.atan2(i-J,r-z),D=H(D),L=H(A),P=H(O),I=(C=U(z,J,o,o,0,A,O,!(D<L&&D<P||L<D&&P<D||L<D&&D<P))).length-2,null==h&&(h=1),S=0;S<I;S+=2)j(n,C[S],C[S+1],C[S+2],C[S+3],null,null,h,a,f,s,c);for(C=Z([C]),m=rn.round(rn.min(e,i,u,C.ymin)),g=rn.round(rn.max(e,i,u,C.ymax)),M&&(m=rn.max(m,f),g=rn.min(g,c)),T=r-t,G=V(E=i-e,0),S=0,I=C.length;m<=g;++m){for(;S<I&&C[S][3]<m;)++S;if(I<=S)break;if((R=C[S])[1]>m)m=rn.floor(R[1]);else{for(p=-(d=ln),e<=m&&m<=i&&(p=G?(d=rn.min(d,t,r),rn.max(p,t,r)):(d=rn.min(d,y=T*(m-e)/E+t),rn.max(p,y))),k=S;k<I&&C[k][1]<=m;++k)(R=C[k])[3]>=m&&(x=R[0],v=R[2],p=V(b=R[1],w=R[3])?(d=rn.min(d,x,v),rn.max(p,x,v)):(d=rn.min(d,y=(v-x)*(m-b)/(w-b)+x),rn.max(p,y)));for(d=rn.round(d+.5),p=rn.round(p-.5),M&&(d=rn.max(d,a),p=rn.min(p,s));d<=p;++d)n(d,m,h)}}}function j(n,t,e,r,i,l,u,o,a,f,s,c,h,m,g){var d=rn.min(t,r),p=rn.max(t,r),y=rn.min(e,i),x=rn.max(e,i),v=o<1?o:1,o=null!=a;if((v=null!=g&&g<v?g:v)&&(!o||!(p<a||s<d||x<f||c<y))){if(null==l&&(l=rn.abs(r-t),u=rn.abs(i-e)),o&&(d<a||s<p||y<f||c<x)){g=function(n,t,e,r,i,l,u,o){if(null!=i){var e=-(e-n),a=-e,r=-(r-t),f=-r,i=n-i,u=u-n,l=t-l,o=o-t,s=1,c=0;if(!(0==e&&i<0||0==a&&u<0||0==r&&l<0||0==f&&o<0||(0!=e&&(i=i/e,u=u/a,e<0?(c<i&&(c=i),u<s&&(s=u)):(c<u&&(c=u),i<s&&(s=i))),0!=r&&(e=l/r,u=o/f,r<0?(c<e&&(c=e),u<s&&(s=u)):(c<u&&(c=u),e<s&&(s=e))),s<c)))return[n+a*c,t+f*c,n+a*s,t+f*s]}}(t,e,r,i,a,f,s,c);if(!g)return v;t=g[0],e=g[1],r=g[2],i=g[3]}if(V(l,0)||V(u,0))R(n,rn.round(t),rn.round(e),rn.round(r),rn.round(i),null,null,null,null,v);else{var b,w,C,T,S=0,k=0,I=0,o=l<u;if(o&&(b=t,t=e,e=b,b=r,r=i,i=b,b=l,l=u,u=b),r<t&&(b=t,t=r,r=b,w=e,e=i,i=w),p=e+(T=(i<e?-1:1)*u/l)*((d=rn.round(t))-t),y=h?1:1-(t+.5-rn.floor(t+.5)),x=d,I=1-(k=p-(a=rn.floor(p))),o?(n(a,x,v*I*y),n(a+1,x,v*k*y)):(n(x,a,v*I*y),n(x,a+1,v*k*y)),S=p+T,p=i+T*((d=rn.round(r))-r),y=m?1:r+.5-rn.floor(r+.5),C=d,I=1-(k=p-(f=rn.floor(p))),o?(n(f,C,v*I*y),n(f+1,C,v*k*y)):(n(C,f,v*I*y),n(C,f+1,v*k*y)),o)for(b=x+1;b<C;++b)0<(I=1-(k=S-(w=rn.floor(S))))&&n(w,b,v*I),0<k&&n(w+1,b,v*k),S+=T;else for(b=x+1;b<C;++b)0<(I=1-(k=S-(w=rn.floor(S))))&&n(b,w,v*I),0<k&&n(b,w+1,v*k),S+=T}}return v}function cn(n,t,e,r,i,l,u,o,a,f,s,c,h,m,g,d,p,y,x,v,b,w){var C,T,S,k,I,R,q,P,z=r<t||t===r&&o<0?-1:1,A=i<e||e===i&&a<0?-1:1,D=l<r||r===l&&c<0?-1:1,O=u<i||i===u&&h<0?-1:1;o=rn.abs(o),X(A*(a=rn.abs(a))*D*(c=rn.abs(c)),O*(h=rn.abs(h))*z*o,1e-6)||(null==w&&(w=1),C={x:t-(P=z*f),y:e+(q=A*s)},t={x:t+P,y:e-q},e={x:r-P,y:i+q},P={x:r+P,y:i-q},R={x:r-(q=D*m),y:i+(I=O*g)},T={x:r+q,y:i-I},S={x:l-q,y:u+I},l={x:l+q,y:u-I},q={x:r,y:i},u=O*h*z*o<A*a*D*c?(k=e,R):(k=P,T),D*A*z*O<0&&(k=P===k?e:P,u=T===u?R:T),z*O<0&&(k=P===k?e:P),D*A<0&&(u=T===u?R:T),z*D<0&&(k=P===k?e:P,u=T===u?R:T),"bevel"===d?(j(n,k.x,k.y,u.x,u.y,null,null,w,y,x,v,b),J(n,q.x,q.y,k.x,k.y,u.x,u.y,y,x,v,b,w)):(r=(I=k===P?t:C).x,i=I.y,h=k.x,o=k.y,a=u.x,c=u.y,O=o-i,A=r-h,h=h*i-r*o,o=(D=(z=u===T?l:S).x)*c-a*(e=z.y),P=an((R=!V(D=O*(r=a-D)-A*(i=e-c),0)&&{x:(A*o-h*r)/D,y:(h*i-O*o)/D}).x-q.x,R.y-q.y),t=rn.min(an(f,s),an(m,g)),"round"===d?(R={x:q.x+t*(R.x-q.x)/P,y:q.y+t*(R.y-q.y)/P},J(n,q.x,q.y,k.x,k.y,u.x,u.y,y,x,v,b,w),L(n,k.x,k.y,u.x,u.y,R.x,R.y,t,y,x,v,b,w)):p*t<P?(j(n,k.x,k.y,u.x,u.y,null,null,w,y,x,v,b),J(n,q.x,q.y,k.x,k.y,u.x,u.y,y,x,v,b,w)):(j(n,k.x,k.y,R.x,R.y,null,null,w,y,x,v,b),j(n,u.x,u.y,R.x,R.y,null,null,w,y,x,v,b),J(n,q.x,q.y,k.x,k.y,u.x,u.y,y,x,v,b,w),J(n,R.x,R.y,k.x,k.y,u.x,u.y,y,x,v,b,w))))}function U(r,i,l,u,n,o,t,e,a){f=t,e=e,s=H(c=o),f+=s-c,!e&&w<=f-s?f=s+w:e&&w<=s-f?f=s-w:!e&&f<s?f=s+(w-H(s-f)):e&&s<f&&(f=s-(w-H(f-s)));var f,s,c=[s,f],h=(o=c[0],t=c[1],n?rn.cos(n):1),m=n?rn.sin(n):0,g=t-o,d=a&&!a.isIdentity;return p(function(n){var n=o+n*g,t=l*rn.cos(n),n=u*rn.sin(n),e=r+h*t-m*n,t=i+m*t+h*n;return d?a.transform(e,t):[e,t]},d?a.sx:1,d?a.sy:1)}function q(n,t,e,r,i,l,u,o){var a=[],n=function(n,t,e,r,i,l,u){if(X(e,n)&&X(r,t)||X(e,i)&&X(r,l)||X(u,0))return[e,r];var o,a,f,s=!1;if(i={x:i-e,y:l-r},a=an((l={x:n-e,y:t-r}).x,l.y),f=an(i.x,i.y),V(o=(l.x*i.x+l.y*i.y)/(a*f),-1))return[e,r];if(V(o,1))return[n+(n=65535/a)*l.x,t+n*l.y];t=u/rn.tan(rn.acos(o)/2),o={x:e+(n=t/a)*l.x,y:r+n*l.y},n=an((a={x:l.y,y:-l.x}).x,a.y),l=u/n,(a.x*i.x+a.y*i.y)/(n*f)<0&&(a={x:-a.x,y:-a.y});l={x:o.x+l*a.x,y:o.y+l*a.y},a={x:-a.x,y:-a.y},n=rn.acos(a.x/n),a.y<0&&(n=w-n);f=an((t={x:(e={x:e+(a=t/f)*i.x,y:r+a*i.y}).x-l.x,y:e.y-l.y}).x,t.y),r=rn.acos(t.x/f),t.y<0&&(r=w-r);r<n&&n-r<c&&(s=!0);n<r&&c<r-n&&(s=!0);return[o.x,o.y,l.x,l.y,n,r,!(!s||X(w,u))]}(n,t,e,r,i,l,u);return n&&2<=n.length&&(t=o?o.transform(n[0],n[1]):[n[0],n[1]],a.push(t[0],t[1]),2<n.length)&&a.push.apply(a,U(n[2],n[3],u,u,0,n[4],n[5],n[6],o)),a}function a(u,n){var t=n&&!n.isIdentity;return p(6<u.length?function(n){var t=1-n,e=n*n,r=t*t,i=r*t,l=e*n,r=3*r*n,n=3*e*t;return[i*u[0]+r*u[2]+n*u[4]+l*u[6],i*u[1]+r*u[3]+n*u[5]+l*u[7]]}:function(n){var t=1-n,e=t*t,t=2*t*n,n=n*n;return[e*u[0]+t*u[2]+n*u[4],e*u[1]+t*u[3]+n*u[5]]},t?n.sx:1,t?n.sy:1)}function Q(E,G,M,n,B,Y,F,N,_,j,U,Q,X,V){var t={length:0,min:ln,offset:B};n.forEach(function(n){t.length+=n,t.min=rn.min(t.min,n)}),1<=t.min&&(t.min=1),t.length<=t.offset&&(t.offset-=rn.floor(t.offset/t.length)*t.length),t.offset<0&&(t.offset+=rn.ceil(-t.offset/t.length)*t.length),t.offset/=t.min;for(var e,r=0,$=G._d,H=$.length;r<H;++r)if((e=$[r])&&2<e.length)for(var W=n.length?function(n,t,e,r,i,l){for(var u,o,a,f,s,c,h,m,g,d,p,y,x=n.length,v=(x>>>1)-1,b=new Array(v),w=t.length,C=0,T=[],S=0,k=0;S<v;++S,k+=2)u=an((+n[k+2]-n[k])/i,(+n[k+3]-n[k+1])/l),C+=b[S]=u;for(h={x:n[0],y:n[1],i:0,l:0},m={x:n[x-2],y:n[x-1],i:0,l:0},o=0,p=-e;p<C;)a=t[o]/r,f=t[o+1]/r,0<a&&0<p+a&&(fn(n,b,p,h,m,C),fn(n,b,p+a-1,m,h,C),y=null,h.i+1<m.i?((y=[]).push(h.x),y.push(h.y),y.push.apply(y,n.slice(h.i+1<<1,m.i<<1)),y.push(m.x),y.push(m.y)):h.i<m.i?y=[h.x,h.y,n[m.i<<1],n[1+(m.i<<1)],m.x,m.y]:h.i===m.i&&(y=[h.x,h.y,m.x,m.y]),y)&&y.length&&((I=(d=T.length?T[T.length-1]:null)?{x:d[d.length-2],y:d[d.length-1],i:d.i}:null)&&h.i-1===I.i&&(g={x:n[h.i<<1],y:n[1+(h.i<<1)],i:h.i},s+c<an((+I.x-g.x)/i,(+I.y-g.y)/l)+an((+g.x-h.x)/i,(+g.y-h.y)/l)+e)&&(q=n[I.i<<1],P=n[1+(I.i<<1)],I.i,I=n[2+(h.i<<1)],R=n[3+(h.i<<1)],h.i,T.push([g.x,{dx:+g.x-q,dy:+g.y-P,v:g.y,valueOf:un},g.x,g.y,g.x,{dx:+I-g.x,dy:+R-g.y,v:g.y,valueOf:un}]),T[T.length-1].i=h.i,T[T.length-1].alpha=d.alpha),y.i=m.i,y.alpha=rn.max(.7,t[o]<1?t[o]:1),T.push(y)),0<a&&(p+=a),0<f&&(p+=f),s=a,c=f,w<=(o+=2)&&(o=0);var I,R;var q,P;return T}(e,n,t.offset,t.min,_,j):[e],i=0,Z=W.length;i<Z;++i)if(0<W[i].length){en=tn=L=J=w=b=v=x=y=p=d=g=m=h=c=s=f=a=o=u=l=O=D=A=z=P=q=R=nn=K=I=k=S=T=C=void 0;var l,u,o,a,f,s,c,h,m,g,d,p,y,x,v,b,w,C=E,T=W[i],S=M,k=0===i?Y:"butt",I=Z===1+i?Y:"butt",K=F,nn=N,R=_,q=j,P=U,z=Q,A=X,D=V,O=T.length,J=K,L=0,tn=k,en=I;if(O<6)L=sn(C,+(u=T[0]),+(o=T[1]),+(a=T[2]),+(f=T[3]),g=rn.abs(+a-u),d=rn.abs(+f-o),(w=on(S,g,d,R,q,p=(null==o.dx?f:o).dx,y=(null==o.dy?f:o).dy))[0],w[1],k,I,S,P,z,A,D,p,y,T.alpha);else for(O-=2,l=0;l<O;l+=2)u=T[l],o=T[l+1],a=T[l+2],f=T[l+3],w=on(S,g=rn.abs(a-u),d=rn.abs(f-o),R,q,p=(null==o.dx?f:o).dx,y=(null==o.dy?f:o).dy),u.params&&u.params.lineCap&&(tn=!0===u.params.lineCap?k:u.params.lineCap),a.params&&a.params.lineCap&&(en=!0===a.params.lineCap?I:a.params.lineCap),L=rn.max(L,sn(C,+u,+o,+a,+f,g,d,w[0],w[1],0===l?tn:null,O===l+2?en:null,S,P,z,A,D,p,y,T.alpha)),0<l&&(0<b[0]||0<b[1]||0<w[0]||0<w[1])&&(u.params&&u.params.lineJoin&&(J=!0===u.params.lineJoin?K:u.params.lineJoin),cn(C,+s,+c,+u,+o,+a,+f,x||h,v||m,b[0],b[1],p||g,y||d,w[0],w[1],J,nn,P,z,A,D,L)),s=u,c=o,h=g,m=d,x=p,v=y,b=w;a.params&&a.params.join&&(s=a.params.join[0],c=a.params.join[1],0<(b=on(S,h=rn.abs(s-a),m=rn.abs(c-f),R,q,x=null,v=null))[0]||0<b[1]||0<w[0]||0<w[1])&&cn(C,+u,+o,+a,+f,+s,+c,p||g,y||d,w[0],w[1],x||h,v||m,b[0],b[1],J,nn,P,z,A,D,L)}}function Z(n){if(!n)return[];for(var t,e,r,i,l=[],u=n.length,o=ln,a=-ln,f=0,s=0,c=0;c<u;++c)if((i=n[c])&&!((t=i.length-2)<=0)){for(++f,r=-(s=1),e=0;e<t;e+=2)i[e].params&&i[e].params.type&&(0<=r&&r<l.length&&(l[r][7]=l[r+s-2][6]+1,l[r+s-2][7]=l[r][6]+1),++f,s=1,r=l.length),o=rn.min(o,i[e+1]),a=rn.max(a,i[e+1]),i[e+1]>i[e+3]?l.push([+i[e+2],i[e+3],+i[e],i[e+1],-1,f,s,s,0,0]):l.push([+i[e],i[e+1],+i[e+2],i[e+3],1,f,s,s,0,0]),++s;o=rn.min(o,i[1+t]),a=rn.max(a,i[1+t])}return(l=l.sort(d)).ymin=o,l.ymax=a,l}function K(n,t){for(var e,r,i,l=0,u=0;u<t;++u)if(!(r=n[u])[9])for(e=u+1;e<t;++e)(i=n[e])[9]||r[4]!==i[4]||r[5]!==i[5]||1<rn.abs(r[6]-i[6])&&1<rn.abs(r[7]-i[7])||(X(r[0],i[0],1e-6)&&X(r[1],i[1],1e-6)&&X(r[2],i[2],1e-6)&&X(r[3],i[3],1e-6)||X(r[3],i[1],1e-6)||X(r[1],i[3],1e-6))&&(i[9]=1,++l);return l}function p(n,t,e){var r,i=[],l=o,u=n(0);for(i.push(u[0],u[1]),r=0;r<l;++r)u=function n(t,e,r,i,l,u,o,a){if(u<=l||X(l,u,1e-6))return o;o=o||e(l);a=a||e(u);var f,s=rn.max(r,i),c=an(a[0]-o[0],a[1]-o[1])*s;if(c<=h){if(c<1)return o;t.push(a[0],a[1])}else g((f=e(c=(l+u)/2))[0],f[1],o[0],o[1],a[0],a[1])*s<m?t.push(a[0],a[1]):(n(t,e,r,i,l,c,o,f),n(t,e,r,i,c,u,f,a));return a}(i,n,t,e,0===r?0:r/l,l===r+1?1:(r+1)/l,u,null);return i}function nn(n,t,e,r,i,l){return(n-e)*(l-r)-(i-e)*(t-r)<0?-1:1}function an(n,t){n=rn.abs(n),t=rn.abs(t);var e=0;return V(n,0)?t:V(t,0)?n:t<n?n*rn.sqrt(1+(e=t/n)*e):n<t?t*rn.sqrt(1+(e=n/t)*e):n*r}function g(n,t,e,r,i,l){var i=i-e,l=l-r,u=an(i,l);return V(u,0)?an(n-e,t-r):rn.abs(i*(r-t)-l*(e-n))/u}function z(n,t,e,r){var i,l,u=n*r-t*e;return e=e,r=r,i=an(n=n,t=t),l=an(e,r),(u<0?-1:1)*(V(i,0)||V(l,0)?0:rn.acos($(n/i*(e/l)+t/i*(r/l),-1,1)))}function X(n,t,e){return rn.abs(+n-t)<(e||1e-6)}function V(n,t){return rn.abs(+n-t)<l}function $(n,t,e){return rn.min(rn.max(n,t),e)}function H(n){return n=n,e=0,r=t=w,(n-=t*rn.floor(n/t))<e&&(n+=t),r<n&&(n-=t),n;var t,e,r}function d(n,t){var e=n[1]-t[1];return X(e,0)?n[3]-t[3]:e}function A(n){return parseFloat(n||"")||0}function D(n){return n.trim()}function W(n){throw new Error(n)}function t(){}return Y.VERSION="1.1.1",Y[n]={constructor:Y,width:null,height:null,getContext:null},Y.getRGBAFrom=function(l){var e;return"function"==typeof l?function(n,t){n=l(n,t);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:l.data&&null!=l.width&&null!=l.height?function(n,t){var e=l.width,r=l.height,i=l.data;return 0<=n&&n<e&&0<=t&&t<r?[i[r=n+e*t<<2],i[1+r],i[2+r],i[3+r]/255]:B}:(e=[l[0]||0,l[1]||0,l[2]||0,3<l.length?l[3]||0:1],function(n,t){return e})},Y.setRGBATo=function(y){var n;return"function"==typeof y?y:((n=function(n,t,e,r,i,l,u){var o=y.width,a=y.height,f=y.data;if(0<=n&&n<o&&0<=t&&t<a){var a=n+o*t<<2,n=f[a]||0,o=f[1+a]||0,t=f[2+a]||0,s=(f[3+a]||0)/255,c=l,h=null,m=0,g=0,d=0,p=0;switch("clear"!==(u=u||"source-over")&&"copy"!==u&&(h=(h=x.CompositionMode[u])||x.CompositionMode[u="source-over"]),u){case"clear":h=null;break;case"copy":m=e,g=r,d=i,p=$(rn.round(255*c),0,255),h=null;break;case"xor":case"destination-out":case"destination-in":case"destination-atop":case"destination-over":case"source-out":case"source-in":case"source-atop":case"source-over":p=h(s,s,c,c);break;default:p=c+s-c*s}h&&(p=0<p?(m=$(rn.round(255*h(s*n/255,s,c*e/255,c)/p),0,255),g=$(rn.round(255*h(s*o/255,s,c*r/255,c)/p),0,255),d=$(rn.round(255*h(s*t/255,s,c*i/255,c)/p),0,255),$(rn.round(255*p),0,255)):d=g=m=0),f[a]=m,f[1+a]=g,f[2+a]=d,f[3+a]=p}}).$target=y,n)},x[n]={constructor:x,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,getLineDash:null,setLineDash:null,shadowColor:null,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,globalAlpha:null,globalCompositeOperation:null,save:null,restore:null,reset:null,scale:null,rotate:null,translate:null,transform:null,getTransform:null,setTransform:null,resetTransform:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,clearRect:null,strokeRect:null,fillRect:null,stroke:null,fill:null,clip:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,t){return null==t&&null!=n.width&&null!=n.height&&(t=n.height,n=n.width),{data:new M(n*t<<2),width:n,height:t}},getImageData:null,putImageData:null,drawImage:null,createLinearGradient:t,createRadialGradient:t,createConicGradient:t,createPattern:t,strokeText:t,fillText:t,measureText:t},((Y.RenderingContext2D=x).CompositionMode={xor:function(n,t,e,r){return e*(1-t)+n*(1-r)},"destination-out":function(n,t,e,r){return n*(1-r)},"destination-in":function(n,t,e,r){return n*r},"destination-atop":function(n,t,e,r){return e*(1-t)+n*r},"destination-over":function(n,t,e,r){return e*(1-t)+n},"source-out":function(n,t,e,r){return e*(1-t)},"source-in":function(n,t,e,r){return e*t},"source-atop":function(n,t,e,r){return e*t+n*(1-r)},"source-over":function(n,t,e,r){return e+n*(1-r)},multiply:function(n,t,e,r){return e*n+e*(1-t)+n*(1-r)},screen:function(n,t,e,r){return e+n-e*n},overlay:function(n,t,e,r){return 2*n<=t?2*e*n+e*(1-t)+n*(1-r):e*(1+t)+n*(1+r)-2*n*e-t*r},darken:function(n,t,e,r){return rn.min(e*t,n*r)+e*(1-t)+n*(1-r)},lighten:function(n,t,e,r){return rn.max(e*t,n*r)+e*(1-t)+n*(1-r)},"color-dodge":function(n,t,e,r){return e===r&&0===n?e*(1-t):e===r?r*t+e*(1-t)+n*(1-r):r*t*rn.min(1,n/t*r/(r-e))+e*(1-t)+n*(1-r)},"color-burn":function(n,t,e,r){return 0===e&&n===t?r*t+n*(1-r):0===e?n*(1-r):r*t*(1-rn.min(1,(1-(t?n/t:0))*r/e))+e*(1-t)+n*(1-r)},"hard-light":function(n,t,e,r){return 2*e<=r?2*e*n+e*(1-t)+n*(1-r):e*(1+t)+n*(1+r)-r*t-2*e*n},"soft-light":function(n,t,e,r){var i=t?n/t:0;return 2*e<=r?n*(r+(2*e-r)*(1-i))+e*(1-t)+n*(1-r):r<2*e&&4*n<=t?t*(2*e-r)*(16*rn.pow(i,3)-12*rn.pow(i,2)-3*i)+e-e*t+n:t*(2*e-r)*(rn.pow(i,.5)-i)+e-e*t+n},difference:function(n,t,e,r){return e+n-2*rn.min(e*t,n*r)},exclusion:function(n,t,e,r){return e*t+n*r-2*e*n+e*(1-t)+n*(1-r)}}).hardlight=x.CompositionMode["hard-light"],x.CompositionMode.softlight=x.CompositionMode["soft-light"],x.Interpolation={},N[n]={constructor:N,_d:null,_sd:null,transform:null,dispose:null,addPath:null,moveTo:null,lineTo:null,rect:null,roundRect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null},x.Path2D=N,_[n]={constructor:_,is2D:!0,isIdentity:!0,m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1,a:null,b:null,c:null,d:null,e:null,f:null,clone:function(){var n=this,t=new _(n.m11,n.m12,n.m13,n.m21,n.m22,n.m23);return t.sx=n.sx,t.sy=n.sy,t},mul:function(n){var t,e=this;if(n instanceof _)return(t=new _(e.m11*n.m11+e.m12*n.m21,e.m11*n.m12+e.m12*n.m22,e.m11*n.m13+e.m12*n.m23+e.m13,e.m21*n.m11+e.m22*n.m21,e.m21*n.m12+e.m22*n.m22,e.m21*n.m13+e.m22*n.m23+e.m23)).sx=e.sx*n.sx,t.sy=e.sy*n.sy,t},inv:function(){var n=this,t=n.m11,e=n.m12,r=n.m13,i=n.m21,l=n.m22,u=n.m23,o=t*l-e*i;return V(o,0)?null:((i=new _(l=l/o,e=-e/o,-l*r-e*u,l=-i/o,e=t/o,-l*r-e*u)).sx=1/n.sx,i.sy=1/n.sy,i)},transform:function(n,t,e){2===arguments.length&&t&&t.length?(e=t,t=n[1],n=n[0]):1===arguments.length&&(t=n[1],n=n[0]);var r=this,i=r.m11*n+r.m12*t+r.m13,n=r.m21*n+r.m22*t+r.m23;return e&&e.length?(e[0]=i,e[1]=n):e=[i,n],e}},_.translate=function(n,t){return new _(1,0,n||0,0,1,t||0)},_.scale=function(n,t,e,r){e=new _(n,0,-n*(e=e||0)+e,0,t,-t*(r=r||0)+r);return e.sx=n,e.sy=t,e},_.rotate=function(n,t,e){t=t||0,e=e||0;var r=rn.cos(n||0),n=rn.sin(n||0);return new _(r,-n,t-r*t+n*e,n,r,e-r*e-n*t)},_.skewX=function(n){return new _(1,n||0,0,0,1,0)},_.skewY=function(n){return new _(1,0,0,n||0,1,0)},_.EYE=function(){return new _(1,0,0,0,1,0)},x.Matrix2D=_,C[n]={constructor:C,value:0,params:null,valueOf:function(){return this.value},toString:function(){return String(this.value)}},Y});