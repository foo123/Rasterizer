/**
*   Rasterizer
*   rasterize, draw and fill lines, rectangles and curves
*
*   @version 0.9.5
*   https://github.com/foo123/Rasterizer
*
**/
!function(e,n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t.call(e):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return t.call(e)}):n in e||(e[n]=t.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[n]})}("undefined"!=typeof self?self:this,"Rasterizer",function(n){"use strict";var m=Object.defineProperty,nn=Math,r=nn.sqrt(2),s=nn.PI,h=2*s,i=6,a=r,c=.5,t="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array;function d(n,e,t){var r=this;if(!(r instanceof d))return new d(n,e,t);var l=d.getRGBAFrom([0,0,0,1]),i=d.getRGBAFrom([0,0,0,1]),u="butt",o="miter",f=10,a=1,c=[],s=0,h=1,g=[new y(n,e,t,l,i,a,c,s,u,o,f,h)];m(r,"strokeStyle",{get:function(){return""},set:function(n){l=d.getRGBAFrom(n),g[g.length-1].strokeStyle=l}}),m(r,"fillStyle",{get:function(){return""},set:function(n){i=d.getRGBAFrom(n),g[g.length-1].fillStyle=i}}),m(r,"lineWidth",{get:function(){return a},set:function(n){0<(n=nn.abs(+n||0))&&(g[g.length-1].lineWidth=a=n)}}),m(r,"lineCap",{get:function(){return u},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square"].indexOf(n)?g[g.length-1].lineCap=u=n:C('"'+n+'" lineCap is not supported!')}}),m(r,"lineJoin",{get:function(){return o},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel"].indexOf(n)?g[g.length-1].lineJoin=o=n:C('"'+n+'" lineJoin is not supported!')}}),m(r,"miterLimit",{get:function(){return f},set:function(n){0<(n=+n)&&(g[g.length-1].miterLimit=f=n)}}),m(r,"lineDashOffset",{get:function(){return s},set:function(n){0<(n=+n)&&(g[g.length-1].lineDashOffset=s=n)}}),m(r,"lineDash",{get:function(){return c.slice()},set:function(n){1&(n=[].concat(n)).length&&(n=n.concat(n)),g[g.length-1].lineDash=c=n}}),r.setLineDash=function(n){r.lineDash=n},m(r,"globalAlpha",{get:function(){return h},set:function(n){0<=(n=+n)&&n<=1&&(g[g.length-1].globalAlpha=h=n)}}),r.strokeRect=function(n,e,t,r){g[g.length-1].strokeRect(n,e,t,r)},r.fillRect=function(n,e,t,r){g[g.length-1].fillRect(n,e,t,r)},r.beginPath=function(){g.push(new y(n,e,t,l,i,a,c,s,u,o,f,h))},r.closePath=function(){g[g.length-1].closePath()},r.moveTo=function(n,e){g[g.length-1].moveTo(n,e)},r.lineTo=function(n,e){g[g.length-1].lineTo(n,e)},r.rect=function(n,e,t,r){g[g.length-1].rect(n,e,t,r)},r.arc=function(n,e,t,r,l,i){g[g.length-1].arc(n,e,t,r,l,i)},r.ellipse=function(n,e,t,r,l,i,u,o){g[g.length-1].ellipse(n,e,t,r,l,i,u,o)},r.quadraticCurveTo=function(n,e,t,r){g[g.length-1].quadraticCurveTo(n,e,t,r)},r.bezierCurveTo=function(n,e,t,r,l,i){g[g.length-1].bezierCurveTo(n,e,t,r,l,i)},r.stroke=function(){g[g.length-1].stroke()},r.fill=function(n){n=String(n||"nonzero").toLowerCase(),-1===["nonzero","evenodd"].indexOf(n)&&(n="nonzero"),g[g.length-1].fill(n)},r.isPointInStroke=function(n,e){return g[g.length-1].isPointInStroke(n,e)},r.isPointInPath=function(n,e,t){return t=String(t||"nonzero").toLowerCase(),-1===["nonzero","evenodd"].indexOf(t)&&(t="nonzero"),g[g.length-1].isPointInPath(n,e,t)}}function y(z,L,i,u,o,f,e,t,a,c,s,r){var l,O,J,B,h,G,N=this,F=[[0,0]],W=1;f=f||1,e=e||[],t=t||0,a=a||"butt",c=c||"miter",s=s||10,r=null==r?1:r,J=function(){l={}},B=function(n){for(var e in l){var t=l[e],e=e.split(",");n(+e[0],+e[1],t)}},O=function(n,e,t){0<=n&&n<z&&0<=e&&e<L&&0<t&&0<r&&(t*=W*r,n=String(n)+","+String(e),(l[n]||0)<t)&&(l[n]=t)},h=function(n,e,t){var r=u(n,e),l=3<r.length?r[3]:1;0<l&&i(n,e,r[0],r[1],r[2],l*t)},G=function(n,e,t){var r=o(n,e),l=3<r.length?r[3]:1;0<l&&i(n,e,r[0],r[1],r[2],l*t)},m(N,"strokeStyle",{get:function(){},set:function(n){u=n}}),m(N,"fillStyle",{get:function(){},set:function(n){o=n}}),m(N,"lineWidth",{get:function(){return f},set:function(n){f=n}}),m(N,"lineCap",{get:function(){return a},set:function(n){a=n}}),m(N,"lineJoin",{get:function(){return c},set:function(n){c=n}}),m(N,"miterLimit",{get:function(){return s},set:function(n){s=n}}),m(N,"globalAlpha",{get:function(){return r},set:function(n){r=n}}),m(N,"lineDash",{get:function(){return e},set:function(n){e=n}}),m(N,"lineDashOffset",{get:function(){return t},set:function(n){t=n}}),N.moveTo=function(n,e){return F.push([n,e]),N},N.lineTo=function(n,e){return F[F.length-1].push(n,e),N},N.rect=function(n,e,t,r){return 0<t&&0<r&&((t=[n,e,n+t-1,e,n+t-1,e+r-1,n,e+r-1,n,e]).lineCap="butt",t.lineJoin="miter",F[F.length-1].length<=2?F[F.length-1]=t:F.push(t)),N},N.arc=function(n,e,t,r,l,i){n=g(n,e,t,t,0,r,l,i);return n.lineCap="butt",n.lineJoin="bevel",F[F.length-1].length<=2?F[F.length-1]=n:F.push(n),N},N.ellipse=function(n,e,t,r,l,i,u,o){n=g(n,e,t,r,l,i,u,o);return n.lineCap="butt",n.lineJoin="bevel",F[F.length-1].length<=2?F[F.length-1]=n:F.push(n),N},N.quadraticCurveTo=function(n,e,t,r){var l=F[F.length-1].pop(),l=x([F[F.length-1].pop(),l,n,e,t,r]);return F[F.length-1].push.apply(F[F.length-1],l),N},N.bezierCurveTo=function(n,e,t,r,l,i){var u=F[F.length-1].pop(),u=x([F[F.length-1].pop(),u,n,e,t,r,l,i]);return F[F.length-1].push.apply(F[F.length-1],u),N},N.closePath=function(){var n,e,t,r;return 2<F[F.length-1].length&&(n=F[F.length-1][0],e=F[F.length-1][1],t=F[F.length-1][F[F.length-1].length-2],r=F[F.length-1][F[F.length-1].length-1],fn(n,t,1e-6)&&fn(e,r,1e-6)||F[F.length-1].push(n,e),F.push([0,0])),N},N.stroke=function(){if(0<f){var n=W,e=z-1,t=L-1;f<1&&(W=f),J();for(var r,l=0,i=F.length;l<i;++l)(r=F[l])&&2<r.length&&U(O,r,f,0,0,r.lineCap||a,r.lineJoin||c,s,0,0,e,t);B(h),W=n}return N},N.fill=function(n){var e=W,t=z-1,r=L-1;J(),W=.65;for(var l,i=0,u=F.length;i<u;++i)(l=F[i])&&2<l.length&&U(O,l,.65,0,0,"butt","bevel",0,0,0,t,r);W=e;var o=O,e=n,f=0,n=0,a=t,c=r,s=j(F),h=s.ymin,g=s.ymax;if(s.length){s.sort(V);var m,d,y,x,p,v,b,C,P,T,S,k,I,q,A=s.length,R=new Array(A),D=0,w="evenodd"===e;for(h=nn.max(n,nn.round(h)),g=nn.min(c,nn.round(g));h<=g;++h){for(;D<A&&s[D][3]<h;)++D;if(A<=D)break;if((y=s[D])[1]>h)h=nn.floor(y[1]);else{for(T=y[0],S=y[2],p=y[1],v=y[3],P=an(p,v)?(k=!1,C=nn.min(T,S),nn.max(T,S)):C=k=(S-T)*(h-p)/(v-p)+T,y[6]=k,y[7]=0,R[0]=y,m=D+(d=1);m<A&&s[m][1]<=h;++m)(y=s[m])[3]>=h&&(T=y[0],S=y[2],p=y[1],v=y[3],P=an(p,v)?(k=!1,C=nn.min(C,T,S),nn.max(P,T,S)):(k=(S-T)*(h-p)/(v-p)+T,C=nn.min(C,k),nn.max(P,k)),y[6]=k,y[7]=0,R[d++]=y);if(x=M(R,d),!(d<x+2||(C=nn.max(f,nn.round(C+.5)),(P=nn.min(a,nn.round(P-.5)))<C)))if(w)for(b=C;b<=P;++b){for(q=I=!1,m=0;m<d;++m)(y=R[m])[7]||!1!==(k=y[6])&&(k<b&&(I=!I),b<k)&&(q=!q);I&&q&&o(b,h,1)}else for(b=C;b<=P;++b){for(m=q=I=0;m<d;++m)(y=R[m])[7]||!1!==(k=y[6])&&(k<b||b<k)&&(x=E(b,h,y[y[4]<0?2:0],y[y[4]<0?3:1],y[y[4]<0?0:2],y[y[4]<0?1:3]),k<b&&(I+=x),b<k)&&(q+=x);I&&q&&o(b,h,1)}}}}return B(G),N},N.isPointInStroke=function(n,e){var t,r,l,i,u,o,f,a=n,c=e,s=F,h=s.length;for(t=0;t<h;++t)if(l=s[t],0<(i=l.length-2))for(r=0;r<i;r+=2)if(u=l[r],o=l[r+1],f=l[r+2],fn((l[r+3]-o)*(a-u),(c-o)*(f-u),1e-4))return!0;return!1},N.isPointInPath=function(n,e,t){var r=n,l=e,n=t,i=j(e=F);if(!(!i.length||l<i.ymin||l>i.ymax)){i.sort(V);for(var u,o,f,a,c,s,h,g,m,d,y,x,p,v=i.length,b=new Array(v),C=0,e="evenodd"===n;C<v&&i[C][3]<l;)++C;if(!(v<=C||(f=i[C])[1]>l)){for(m=f[0],d=f[2],c=f[1],s=f[3],g=an(c,s)?(y=!1,h=nn.min(m,d),nn.max(m,d)):h=y=(d-m)*(l-c)/(s-c)+m,f[6]=y,f[7]=0,b[0]=f,u=C+(o=1);u<v&&i[u][1]<=l;++u)(f=i[u])[3]>=l&&(m=f[0],d=f[2],c=f[1],s=f[3],g=an(c,s)?(y=!1,h=nn.min(h,m,d),nn.max(g,m,d)):(y=(d-m)*(l-c)/(s-c)+m,h=nn.min(h,y),nn.max(g,y)),f[6]=y,f[7]=0,b[o++]=f);if(a=M(b,o),o<a+2)return!1!==b[0][6]&&fn(r,b[0][6]);if(!(g<h||r<h||g<r)){if(e)for(p=x=!1,u=0;u<o;++u)(f=b[u])[7]||!1!==(y=f[6])&&(y<=r&&(x=!x),r<=y)&&(p=!p);else for(u=p=x=0;u<o;++u)(f=b[u])[7]||!1!==(y=f[6])&&(y<r||r<y)&&(a=E(r,l,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),y<=r&&(x+=a),r<=y)&&(p+=a);if(x&&p)return!0}}}return!1},N.strokeRect=function(n,e,t,r){var l;return 1<=t&&1<=r&&0<f&&(l=W,f<1&&(W=f),J(),U(O,[n,e,n+t-1,e,n+t-1,e+r-1,n,e+r-1,n,e],f,0,0,"butt","miter",s,0,0,z-1,L-1),B(h),W=l),N},N.fillRect=function(n,e,t,r){return 1<=t&&1<=r&&(J(),I(O,nn.round(n),nn.round(e),nn.round(n+t-1),nn.round(e+r-1),0,0,z-1,L-1),B(G)),N},N.dispose=function(){F=null}}function U(B,n,e,G,N,t,F,W,U,E,j,M){var r,l,i,u,o,V,H,K,Q,f,a,X,c,Y,s,h,g,m,d,y,x,p,v,b,C,P,T,S,k,I,Z,q,A,R,D,$,w,z,L,O,J,_=n.length;if(_<6)en(B,l=n[0],i=n[1],u=n[2],o=n[3],f=nn.abs(u-l),a=nn.abs(o-i),(c=tn(e,f,a))[0],c[1],t,t,U,E,j,M);else for(_-=2,Y=W*e/2,r=0;r<_;r+=2)en(B,l=n[r],i=n[r+1],u=n[r+2],o=n[r+3],f=nn.abs(u-l),a=nn.abs(o-i),(c=tn(e,f,a))[0],c[1],0===r?t:null,_===r+2?t:null,U,E,j,M),1<e&&0<r&&(s=B,h=V,g=H,m=l,d=i,y=u,x=o,p=K,v=Q,b=X[0],C=X[1],P=f,T=a,S=c[0],k=c[1],Z=Y,q=U,A=E,R=j,D=M,J=O=L=z=w=$=void 0,"bevel"!==(I=F)&&"miter"!==I||fn(v*P,T*p,1e-4)||(m<h&&y<m&&(J=h,h=y,y=J,J=g,g=x,x=J,J=p,p=P,P=J,J=v,v=T,T=J,J=b,b=S,S=J,J=C,C=k,k=J),C={x:h-(P=(p=m<h?-1:1)*b),y:g+(b=(T=d<g?-1:1)*C)},h={x:h+P,y:g-b},g={x:m-P,y:d+b},P={x:m+P,y:d-b},w={x:m-(S=(b=y<m?-1:1)*S),y:d+(k=($=x<d?-1:1)*k)},z={x:m+S,y:d-k},L={x:y-S,y:x+k},y={x:y+S,y:x-k},S={x:m,y:d},x=p==b?T==$?an(v,0)?(O=P,z):(O=g,w):(O=g,z):(O=P,w),"bevel"===I?(un(s,O.x,O.y,x.x,x.y,null,null,q,A,R,D),ln(s,S.x,S.y,O.x,O.y,x.x,x.y,q,A,R,D)):"miter"===I&&(J=p==b?T==$?an(v,0)?rn(h.x,h.y,P.x,P.y,z.x,z.y,y.x,y.y):rn(C.x,C.y,g.x,g.y,w.x,w.y,L.x,L.y):rn(C.x,C.y,g.x,g.y,z.x,z.y,y.x,y.y):rn(h.x,h.y,P.x,P.y,w.x,w.y,L.x,L.y),k=on(J.x-S.x,J.y-S.y),Z<k?(un(s,O.x,O.y,x.x,x.y,null,null,q,A,R,D),ln(s,S.x,S.y,O.x,O.y,x.x,x.y,q,A,R,D)):(un(s,O.x,O.y,J.x,J.y,null,null,q,A,R,D),un(s,x.x,x.y,J.x,J.y,null,null,q,A,R,D),ln(s,S.x,S.y,O.x,O.y,x.x,x.y,q,A,R,D),ln(s,J.x,J.y,O.x,O.y,x.x,x.y,q,A,R,D))))),V=l,H=i,K=f,Q=a,X=c}function en(n,e,t,r,l,i,u,o,f,a,c,s,h,g,m){var d;0===o&&0===f?un(n,e,t,r,l,i,u,s,h,g,m):(n=n,t=t,l=l,u=u,o=o,f=f,a=a,c=c,s=s,h=h,g=g,m=m,(r=r)<(e=e)&&(d=e,e=r,r=d,d=t,t=l,l=d,d=a,a=c,c=d),d=l<t?-1:1,an(i=i,0)?("square"===a&&(t-=d*o),"square"===c&&(l+=d*o),I(n,nn.round(e-o),nn.round(t),nn.round(e+o),nn.round(l),s,h,g,m)):an(u,0)?("square"===a&&(e-=+f),"square"===c&&(r+=+f),I(n,nn.round(e),nn.round(t-f),nn.round(r),nn.round(t+f),s,h,g,m)):("square"===a&&(e-=+f,t-=d*o),"square"===c&&(r+=+f,l+=d*o),u=r-(i=+o),c=l+(a=d*f),o=r+i,d=l-a,un(n,f=e-i,r=t+a,l=e+i,e=t-a,null,null,s,h,g,m),un(n,l,e,o,d,null,null,s,h,g,m),un(n,o,d,u,c,null,null,s,h,g,m),un(n,u,c,f,r,null,null,s,h,g,m),ln(n,f,r,l,e,u,c,s,h,g,m),ln(n,l,e,u,c,o,d,s,h,g,m)))}function tn(n,e,t){return n<=1?[0,0]:an(e,0)?[(n-1)/2,0]:an(t,0)?[0,(n-1)/2]:[t*(n=(n-1)/2)/(t=on(e,t)),e*n/t]}function rn(n,e,t,r,l,i,u,o){var f=r-e,a=n-t,t=t*e-n*r,e=o-i,n=l-u,r=u*i-l*o,u=f*n-a*e;return!an(u,0)&&{x:(a*r-t*n)/u,y:(t*e-f*r)/u}}function I(n,e,t,r,l,i,u,o,f){var a,c;if(r<e&&(a=e,e=r,r=a),l<t&&(c=t,t=l,l=c),null!=i){if(r<i||o<e||l<u||f<t)return;e=nn.max(e,i),t=nn.max(t,u),r=nn.min(r,o),l=nn.min(l,f)}if(t===l)for(a=e;a<=r;++a)n(a,t,1);else if(e===r)for(c=t;c<=l;++c)n(e,c,1);else for(c=t;c<=l;++c)for(a=e;a<=r;++a)n(a,c,1)}function ln(n,e,t,r,l,i,u,o,f,a,c){var s,h,g,m,d,y,x,p,v,b,C,P,T,S,k=null!=o;if(!k||!(nn.max(e,r,i)<o||nn.min(e,r,i)>a||nn.max(t,l,u)<f||nn.min(t,l,u)>c)){if(l<t&&(g=t,t=l,l=g,g=e,e=r,r=g),u<t&&(g=t,t=u,u=g,g=e,e=i,i=g),u<l&&(g=l,l=u,u=g,g=r,r=i,i=g),an(b=u-t,0))return m=nn.round(t),I(n,s=nn.round(nn.min(e,r,i)),m,h=nn.round(nn.max(e,r,i)),m,o,f,a,c);for(P=u-l,x=i-e,p=r-e,v=i-r,T=an(C=l-t,0),S=an(P,0),m=nn.round(t+.5),d=l,y=nn.round(u-.5),k&&(m=nn.max(f,m),y=nn.min(c,y));m<=y;++m)if(h=m<d?T?(s=e,r):(s=x*(m-t)/b+e,p*(m-t)/C+e):S?(s=r,i):(s=x*(m-t)/b+e,v*(m-l)/P+r),nn.abs(h-s)<1)(!k||o<=s&&s<=a)&&n(nn.round(s),m,1);else for(h<s&&(g=s,s=h,h=g),s=nn.round(s+.5),h=nn.round(h-.5),k&&(s=nn.max(o,s),h=nn.min(a,h));s<=h;++s)n(s,m,1)}}function un(n,e,t,r,l,i,u,o,f,a,c){var s=nn.min(e,r),h=nn.max(e,r),g=nn.min(t,l),m=nn.max(t,l);if(!(h<o||a<s||m<f||c<g)){if(null==i&&(i=nn.abs(r-e),u=nn.abs(l-t)),s<o||a<h||g<f||c<m){s=function(n,e,t,r,l,i,u,o){var f=-(t=-(t-n)),a=-(r=-(r-e)),l=n-l,u=u-n,i=e-i,o=o-e,c=1,s=0;if(!(0==t&&l<0||0==f&&u<0||0==r&&i<0||0==a&&o<0||(0!=t&&(l=l/t,u=u/f,t<0?(s<l&&(s=l),u<c&&(c=u)):(s<u&&(s=u),l<c&&(c=l))),0!=r&&(t=i/r,u=o/a,r<0?(s<t&&(s=t),u<c&&(c=u)):(s<u&&(s=u),t<c&&(c=t))),c<s)))return[n+f*s,e+a*s,n+f*c,e+a*c]}(e,t,r,l,o,f,a,c);if(!s)return;e=s[0],t=s[1],r=s[2],l=s[3]}if(an(i,0)||an(u,0))return I(n,nn.round(e),nn.round(t),nn.round(r),nn.round(l));var d,y,x,p,v=0,b=0,C=0,h=i<u;if(h&&(d=e,e=t,t=d,d=r,r=l,l=d,d=i,i=u,u=d),r<e&&(d=e,e=r,r=d,y=t,t=l,l=y),m=t+(p=(l<t?-1:1)*u/i)*((g=nn.round(e))-e),o=1-(e+.5-nn.floor(e+.5)),f=g,C=1-(b=m-(a=nn.floor(m))),h?(n(a,f,C*o),n(a+1,f,b*o)):(n(f,a,C*o),n(f,a+1,b*o)),v=m+p,m=l+p*((g=nn.round(r))-r),o=r+.5-nn.floor(r+.5),x=g,C=1-(b=m-(c=nn.floor(m))),h?(n(c,x,C*o),n(c+1,x,b*o)):(n(x,c,C*o),n(x,c+1,b*o)),h)for(d=f+1;d<x;++d)0<(C=1-(b=v-(y=nn.floor(v))))&&n(y,d,C),0<b&&n(y+1,d,b),v+=p;else for(d=f+1;d<x;++d)0<(C=1-(b=v-(y=nn.floor(v))))&&n(d,y,C),0<b&&n(d,y+1,b),v+=p}}function g(t,r,l,i,n,u,e,o){o&&(e=-e-s);var f=nn.cos(n),a=nn.sin(n),c=e-u,o=v(function(n){var n=u+n*c,e=l*nn.cos(n),n=i*nn.sin(n);return[t+f*e-a*n,r+a*e+f*n]});return nn.abs(c)+1e-4>=h&&!fn(o[0],o[o.length-2],1e-4)&&!fn(o[1],o[o.length-1],1e-4)&&o.push(o[0],o[1]),o}function x(u){return v(6<u.length?function(n){var e=1-n,t=n*n,r=e*e,l=r*e,i=t*n,r=3*r*n,n=3*t*e;return[l*u[0]+r*u[2]+n*u[4]+i*u[6],l*u[1]+r*u[3]+n*u[5]+i*u[7]]}:function(n){var e=1-n,t=e*e,e=2*e*n,n=n*n;return[t*u[0]+e*u[2]+n*u[4],t*u[1]+e*u[3]+n*u[5]]})}function on(n,e){n=nn.abs(n),e=nn.abs(e);var t=0;return an(n,0)?e:an(e,0)?n:e<n?n*nn.sqrt(1+(t=e/n)*t):n<e?e*nn.sqrt(1+(t=n/e)*t):n*r}function E(n,e,t,r,l,i){return(n-t)*(i-r)-(l-t)*(e-r)<0?-1:1}function p(n,e,t){var r=e[0],e=e[1],l=t[0],t=t[1],i=n[0],n=n[1],l=l-r,t=t-e,u=on(l,t);return an(u,0)?on(i-r,n-e):nn.abs(l*(e-n)-t*(r-i))/u}function j(n){for(var e,t,r,l=[],i=n.length,u=1/0,o=-1/0,f=0,a=0;a<i;++a)if(0<(e=(r=n[a]).length-2)){for(t=0;t<e;t+=2)u=nn.min(u,r[t+1]),o=nn.max(o,r[t+1]),r[t+1]>r[t+3]?l.push([r[t+2],r[t+3],r[t],r[t+1],-1,f,0,0]):l.push([r[t],r[t+1],r[t+2],r[t+3],1,f,0,0]);u=nn.min(u,r[1+e]),o=nn.max(o,r[1+e]),++f}return l.ymin=u,l.ymax=o,l}function M(n,e){for(var t,r,l,i=0,u=0;u<e;++u)if(!(r=n[u])[7])for(t=u+1;t<e;++t)(l=n[t])[7]||r[4]!==l[4]||r[5]!==l[5]||(fn(r[0],l[0],1e-5)&&fn(r[1],l[1],1e-5)&&fn(r[2],l[2],1e-5)&&fn(r[3],l[3],1e-5)||fn(r[3],l[1],1e-6))&&(l[7]=1,++i);return i}function v(n){var e,t=[],r=i,l=n(0);for(t.push(l[0],l[1]),e=0;e<r;++e)l=function n(e,t,r,l,i,u){if(l<=r||fn(r,l,1e-6))return i;i=i||t(r);u=u||t(l);var o,f=on(u[0]-i[0],u[1]-i[1]);if(f<=a){if(f<1)return i;e.push(u[0],u[1])}else p(o=t(f=(r+l)/2),i,u)<=c?e.push(u[0],u[1]):(n(e,t,r,f,i,o),n(e,t,f,l,o,u));return u}(t,n,0===e?0:e/r,r===e+1?1:(e+1)/r,l,null);return t}function fn(n,e,t){return nn.abs(n-e)<(t||1e-6)}function an(n,e){return nn.abs(n-e)<Number.EPSILON}function b(n,e,t){return nn.min(nn.max(n,e),t)}function V(n,e){var t=n[1]-e[1];return fn(t,0)?n[3]-e[3]:t}function C(n){throw new Error(n)}return d.VERSION="0.9.5",d.prototype={constructor:d,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,setLineDash:null,globalAlpha:null,strokeRect:null,fillRect:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,quadraticCurveTo:null,bezierCurveTo:null,stroke:null,fill:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,e){return d.createImageData(n,e)},strokeText:function(){C("Not Implemented!")},fillText:function(){C("Not Implemented!")},measureText:function(){C("Not Implemented!")}},d.createImageData=function(n,e){return{data:new t(n*e<<2),width:n,height:e}},d.getRGBAFrom=function(t){var r;return"function"==typeof t?function(n,e){n=t(n,e);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:(r=[t[0],t[1],t[2],3<t.length?t[3]:1],function(n,e){return r})},d.setRGBATo=function(u){var c,s,h;return"function"==typeof u?function(n,e,t,r,l,i){0<i&&u(n,e,t,r,l,i)}:(c=u.width,s=u.height,h=u.data,function(n,e,t,r,l,i){var u,o,f,a;0<=n&&n<c&&0<=e&&e<s&&0<i&&(e=h[n=n+c*e<<2],u=h[1+n],o=h[2+n],0<(a=(i=i)+(f=h[3+n]/255)*(1-i)))&&(h[n]=b(nn.round((t*i+e*f*(1-i))/a),0,255),h[1+n]=b(nn.round((r*i+u*f*(1-i))/a),0,255),h[2+n]=b(nn.round((l*i+o*f*(1-i))/a),0,255),h[3+n]=b(nn.round(255*a),0,255))})},y.prototype={constructor:y,dispose:null,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,globalAlpha:null,lineDash:null,lineDashOffset:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null,isPointInStroke:null,isPointInPath:null,stroke:null,fill:null,strokeRect:null,fillRect:null},d.Path=y,d});