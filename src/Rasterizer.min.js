/**
*   Rasterizer
*   rasterize, stroke and fill lines, rectangles, curves and paths
*
*   @version 0.9.9
*   https://github.com/foo123/Rasterizer
*
**/
!function(t,n,e){"use strict";"object"==typeof module&&module.exports?module.exports=e.call(t):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return e.call(t)}):n in t||(t[n]=e.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[n]})}("undefined"!=typeof self?self:this,"Rasterizer",function(e){"use strict";var D=Object.defineProperty,n="prototype",cn=Math,_=1/0,r=cn.sqrt(2),z=isNaN,P=isFinite,s=cn.PI,p=2*s,o=6,c=r,m=.5,J="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array,A=[0,0,0,0];function L(n,t,e,r){var u;if(!(this instanceof L))return new L(n,t,e,r);r=r||(e&&e.$target?L.getRGBAFrom(e.$target):function(n,t){return A}),u=new E(n,t,e,r),D(this,"width",{get:function(){return n},set:function(n){}}),D(this,"height",{get:function(){return t},set:function(n){}}),this.getContext=function(n){if("2d"===n)return u;U('Unsupported context "'+n+'"')}}function E(k,q,g,h){var o,i,t,e,p,y,r,u,l,a,f,c,s,m,d,T,x=this,v=null,w=null,b=function(){v={}},C=function(n){for(var t in v){var e=v[t],t=t.split(",");n(+t[0],+t[1],e)}v=null},S=function(n,t,e){var r;0<=n&&n<k&&0<=t&&t<q&&0<e&&0<m&&(n=String(n)+","+String(t),t=v[n]||0,r=w?w[n]||0:1,t<(e*=m*r))&&(v[n]=e)},I=function(n,t,e){var r="clear"===d?A:o(n,t),u=3<r.length?r[3]:1;g(n,t,r[0],r[1],r[2],u*e,d)},R=function(n,t,e){var r="clear"===d?A:i(n,t),u=3<r.length?r[3]:1;g(n,t,r[0],r[1],r[2],u*e,d)},n=function(n){o=L.getRGBAFrom([0,0,0,1]),i=L.getRGBAFrom([0,0,0,1]),w=v=null,r="butt",u="miter",l=10,a=1,f=[],c=0,s=O.EYE(),m=1,d="source-over",t=[],T=new G(s),n||x.clearRect(0,0,k,q)};D(x,"strokeStyle",{get:function(){return""},set:function(n){o=L.getRGBAFrom(n)}}),D(x,"fillStyle",{get:function(){return""},set:function(n){i=L.getRGBAFrom(n)}}),D(x,"lineWidth",{get:function(){return a},set:function(n){!z(n=+n)&&P(n)&&0<=n&&(a=n)}}),D(x,"lineCap",{get:function(){return r},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square","round"].indexOf(n)&&(r=n)}}),D(x,"lineJoin",{get:function(){return u},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel","round"].indexOf(n)&&(u=n)}}),D(x,"miterLimit",{get:function(){return l},set:function(n){!z(n=+n)&&P(n)&&0<=n&&(l=n)}}),D(x,"lineDashOffset",{get:function(){return c},set:function(n){!z(n=+n)&&P(n)&&0<=n&&(c=n)}}),D(x,"lineDash",{get:function(){return f.slice()},set:function(n){1&(n=[].concat(n)).length&&(n=n.concat(n)),f=n}}),x.getLineDash=function(){return x.lineDash},x.setLineDash=function(n){x.lineDash=n},D(x,"globalAlpha",{get:function(){return m},set:function(n){!z(n=+n)&&0<=n&&n<=1&&(m=n)}}),D(x,"globalCompositeOperation",{get:function(){return d},set:function(n){d=String(n)}}),x.save=function(){(t=t||[]).push([o,i,w,r,u,l,a,f,c,s,m,d])},x.restore=function(){var n;t&&t.length&&(n=t.pop(),o=n[0],i=n[1],w=n[2],r=n[3],u=n[4],l=n[5],a=n[6],f=n[7],c=n[8],T.transform=s=n[9],m=n[10],d=n[11])},x.reset=function(){n()},x.scale=function(n,t){T.transform=s=s.mul(O.scale(n,t))},x.rotate=function(n){T.transform=s=s.mul(O.rotate(n||0))},x.translate=function(n,t){T.transform=s=s.mul(O.translate(n||0,t||0))},x.transform=function(n,t,e,r,u,o){T.transform=s=s.mul(new O(n,e,u,t,r,o))},x.getTransform=function(){return s.clone()},x.setTransform=function(n,t,e,r,u,o){1<arguments.length?s=new O(n,e,u,t,r,o):n&&null!=n.a&&null!=n.f&&(s=new O(n.a,n.c,n.e,n.b,n.d,n.f)),T.transform=s},x.resetTransform=function(){T.transform=s=O.EYE()},x.beginPath=function(){T=new G(s)},x.closePath=function(){T.closePath()},x.moveTo=function(n,t){T.moveTo(n,t)},x.lineTo=function(n,t){T.lineTo(n,t)},x.rect=function(n,t,e,r){T.rect(n,t,e,r)},x.roundRect=function(n,t,e,r){T.roundRect.apply(T,arguments)},x.arc=function(n,t,e,r,u,o){T.arc(n,t,e,r,u,o)},x.ellipse=function(n,t,e,r,u,o,i,l){T.ellipse(n,t,e,r,u,o,i,l)},x.arcTo=function(n,t,e,r,u){T.arcTo(n,t,e,r,u)},x.quadraticCurveTo=function(n,t,e,r){T.quadraticCurveTo(n,t,e,r)},x.bezierCurveTo=function(n,t,e,r,u,o){T.bezierCurveTo(n,t,e,r,u,o)},x.clearRect=function(n,t,e,r){var u=d,o=m;d="clear",m=1,x.fill(new G(s).rect(n,t,e,r),"evenodd"),d=u,m=o},x.strokeRect=function(n,t,e,r){0<a&&x.stroke(new G(s).rect(n,t,e,r))},x.fillRect=function(n,t,e,r){x.fill(new G(s).rect(n,t,e,r),"evenodd")},x.stroke=function(n){var t,e;0<a&&(e=(n=n||T).transform,t=cn.abs(e.sx),e=cn.abs(e.sy),b(),N(S,n,a,0,0,r,u,l,t,e,0,0,k-1,q-1),C(I))},e=function(n,t){var e=k-1,r=q-1,u=(N(S,n,.5,0,0,"butt","bevel",0,1,1,0,0,e,r),S),o=0,i=0,l=e,e=r,a=n._sd;if(a.length){var f,c,s,m,h,d,g,p,y,x,v,w,b,C,T=a.length,I=new Array(T),R=a.ymin,D=a.ymax,z=0,P="evenodd"===t;for(R=cn.max(i,cn.round(R)),D=cn.min(e,cn.round(D));R<=D;++R){for(;z<T&&a[z][3]<R;)++z;if(T<=z)break;if((s=a[z])[1]>R)R=cn.floor(s[1]);else{for(x=s[0],v=s[2],h=s[1],d=s[3],y=xn(h,d)?(w=!1,p=cn.min(x,v),cn.max(x,v)):p=w=(v-x)*(R-h)/(d-h)+x,s[8]=w,s[9]=0,I[0]=s,f=z+(c=1);f<T&&a[f][1]<=R;++f)(s=a[f])[3]>=R&&(x=s[0],v=s[2],h=s[1],d=s[3],y=xn(h,d)?(w=!1,p=cn.min(p,x,v),cn.max(y,x,v)):(w=(v-x)*(R-h)/(d-h)+x,p=cn.min(p,w),cn.max(y,w)),s[8]=w,s[9]=0,I[c++]=s);if(m=j(I,c),!(c<m+2||(p=cn.max(o,cn.round(p+.5)),(y=cn.min(l,cn.round(y-.5)))<p)))if(P)for(g=p;g<=y;++g){for(C=b=!1,f=0;f<c;++f)(s=I[f])[9]||!1!==(w=s[8])&&(w<g&&(b=!b),g<w)&&(C=!C);b&&C&&u(g,R,1)}else for(g=p;g<=y;++g){for(f=C=b=0;f<c;++f)(s=I[f])[9]||!1!==(w=s[8])&&(w<g||g<w)&&(m=Y(g,R,s[s[4]<0?2:0],s[s[4]<0?3:1],s[s[4]<0?0:2],s[s[4]<0?1:3]),w<g&&(b+=m),g<w)&&(C+=m);b&&C&&u(g,R,1)}}}}},x.fill=function(n,t){!arguments.length||null==n&&null==t?(n=T,t="nonzero"):1!==arguments.length&&null!=t||(n instanceof G?t="nonzero":(t=n,n=T)),t=String(t||"nonzero").toLowerCase(),b(),e(n=n||T,t="evenodd"!==t?"nonzero":t),C(R)},x.clip=function(n,t){!arguments.length||null==n&&null==t?(n=T,t="nonzero"):1!==arguments.length&&null!=t||(n instanceof G?t="nonzero":(t=n,n=T)),"evenodd"!==(t=String(t||"nonzero").toLowerCase())&&(t="nonzero"),(n=n||T)===T&&(T=new G(s)),b(),e(n,t),w=v,v=null},x.isPointInStroke=function(n,t,e){arguments.length<3&&(e=t,t=n,n=T);var r,u,o,i,l,a,f,c=t||0,s=e||0,t=n||T,m=t._d,h=m.length;for(r=0;r<h;++r)if(o=m[r],0<(i=o.length-2))for(u=0;u<i;u+=2)if(l=+o[u],a=o[u+1],f=+o[u+2],yn((o[u+3]-a)*(c-l),(s-a)*(f-l),1e-4))return!0;return!1},x.isPointInPath=function(n,t,e,r){n instanceof G||(r=e,e=t,t=n,n=T),"evenodd"!==(r=String(r||"nonzero").toLowerCase())&&(r="nonzero");var u=t||0,o=e||0,t=r,i=(e=n||T)._sd;if(!(!i.length||o<i.ymin||o>i.ymax)){for(var l,a,f,c,s,m,h,d,g,p,y,x,v,w=i.length,b=new Array(w),C=0,e="evenodd"===t;C<w&&i[C][3]<o;)++C;if(!(w<=C||(f=i[C])[1]>o)){for(g=f[0],p=f[2],s=f[1],m=f[3],d=xn(s,m)?(y=!1,h=cn.min(g,p),cn.max(g,p)):h=y=(p-g)*(o-s)/(m-s)+g,f[8]=y,f[9]=0,b[0]=f,l=C+(a=1);l<w&&i[l][1]<=o;++l)(f=i[l])[3]>=o&&(g=f[0],p=f[2],s=f[1],m=f[3],d=xn(s,m)?(y=!1,h=cn.min(h,g,p),cn.max(d,g,p)):(y=(p-g)*(o-s)/(m-s)+g,h=cn.min(h,y),cn.max(d,y)),f[8]=y,f[9]=0,b[a++]=f);if(c=j(b,a),a<c+2)return!1!==b[0][8]&&yn(u,b[0][8]);if(!(d<h||u<h||d<u)){if(e)for(v=x=!1,l=0;l<a;++l)(f=b[l])[9]||!1!==(y=f[8])&&(y<=u&&(x=!x),u<=y)&&(v=!v);else for(l=v=x=0;l<a;++l)(f=b[l])[9]||!1!==(y=f[8])&&(y<u||u<y)&&(c=Y(u,o,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),y<=u&&(x+=c),u<=y)&&(v+=c);if(x&&v)return!0}}}return!1},p=function(n,t,e,r,u,o,i){if(r=cn.min(r,t-1),u=cn.min(u,e-1),o=cn.min(o,t-1),i=cn.min(i,e-1),o<r||i<u)return new J(0);var l,a,f,c,s,m=new J((o-r+1)*(i-u+1)<<2);if(n)for(a=r,f=u,c=0;f<=i;c+=4,++a)o<a&&(a=r,++f),m[c]=n[s=f*t+a<<2],m[c+1]=n[1+s],m[c+2]=n[2+s],m[c+3]=n[3+s];else for(a=r,f=u,c=0;f<=i;c+=4,++a)o<a&&(a=r,++f),l=h(a,f),m[c]=B(l[0],0,255),m[c+1]=B(l[1],0,255),m[c+2]=B(l[2],0,255),m[c+3]=B(cn.round(255*l[3]),0,255);return m},y=function(n,t,e,r,u,o,i,l,a,f,c,s){var m,h,d;for(i=cn.min(i,u-1),l=cn.min(l,o-1),c=cn.min(c,t-1),s=cn.min(s,e-1),a=cn.min(a,u-1),f=cn.min(f,o-1),c-=i,s-=l,h=i,d=l;d<=f;++h)a<h&&(h=i,++d),e<=d+s||t<=h+c||g(h+c,d+s,r[m=d*u+h<<2],r[1+m],r[2+m],r[3+m]/255,"copy")},x.drawImage=function(n,t,e,r,u,o,i,l,a){n&&n.data||U("Invalid image data in drawImage");var f=k,c=q,s=n.width,m=n.height,n=n.data,h=E.Interpolation.bilinear,d=arguments.length;s&&m||U("Invalid image data in drawImage"),t=t||0,e=e||0,3===d?y(0,f,c,n,s,m,0,0,s-1,m-1,o=t,i=e):5===d?(o=t,i=e,a=u,y(0,f,c,s===(l=r)&&m===a?n:h(n,s,m,l,a),l,a,0,0,l-1,a-1,o,i)):y(0,f,c,r===l&&u===a?p(n,s,m,t,e,t+r-1,e+u-1):h(p(n,s,m,t,e,t+r-1,e+u-1),r,u,l,a),l,a,0,0,l-1,a-1,o,i)},x.getImageData=function(n,t,e,r){var u=k,o=q;return null==t&&(t=0),null==r&&(r=o),n=cn.max(0,cn.min(n=null==n?0:n,(e=null==e?u:e)-1,u-1)),t=cn.max(0,cn.min(t,r-1,o-1)),e=cn.min(n+e-1,e-1,u-1),r=cn.min(t+r-1,r-1,o-1),{data:p(null,u,o,n,t,e,r),width:e-n+1,height:r-t+1}},x.putImageData=function(n,t,e){n&&n.data||U("Invalid image data in putImageData");var r=n.width,u=n.height;y(0,k,q,n.data,r,u,0,0,r-1,u-1,t=null==t?0:t,e=null==e?0:e)},n(!0)}function G(s){s=s||O.EYE();var m=this,h=!0,d=[],g=null;D(m,"transform",{get:function(){return s.clone()},set:function(n){s=n}}),D(m,"_d",{get:function(){return d},set:function(n){}}),D(m,"_sd",{get:function(){return g=g||$(d).sort(W)},set:function(n){}}),m.moveTo=function(n,t){n=x([n,t],s);return n&&(d.push(n),h=!1),m},m.closePath=function(){var n,t,e,r;return d.length&&2<d[d.length-1].length&&(n=+d[d.length-1][0],t=d[d.length-1][1],e=+d[d.length-1][d[d.length-1].length-2],r=d[d.length-1][d[d.length-1].length-1],yn(n,e,1e-6)&&yn(t,r,1e-6)||(d[d.length-1].push(n,t),d.push([n,t]),h=!1,g=null)),m},m.lineTo=function(n,t){n=x([n,t],s);return n&&(h?(d.push(n),h=!1):(d[d.length-1].push(n[0],n[1]),g=null)),m},m.rect=function(n,t,e,r){e=x([n,t,n+e,t,n+e,t+r,n,t+r],s);return e&&(e.push(e[0],e[1]),d.length&&d[d.length-1].length<=2?d[d.length-1]=e:d.push(e),d.push([e[0],e[1]]),e[0]=new y(+e[0],{lineCap:"butt",lineJoin:"miter"}),g=null,h=!1),m},m.roundRect=function(n,t,e,r){var u,o,i,l,a,f,c=x([n,t,e,r]);return c&&(((f=(arguments[4]&&arguments[4].push?arguments[4]:[].slice.call(arguments,4)).filter(function(n){return 0<n})).length<1||4<f.length)&&U("Invalid radii in roundRect"),4===f.length?(u=f[0],o=f[1],i=f[2],l=f[3]):3===f.length?(u=f[0],o=f[1],l=f[1],i=f[2]):l=2===f.length?(u=f[0],i=f[0],o=f[1],f[1]):(u=f[0],o=f[0],i=f[0],f[0]),e<0&&(n+=e,e=-e,a=u,u=o,o=a,a=l,l=i,i=a),r<0&&(t+=r,r=-r,a=u,u=l,l=a,a=o,o=i,i=a),(f=cn.min(e/(u+o),r/(o+i),e/(i+l),r/(u+l)))<1&&(u*=f,o*=f,l*=f,i*=f),v(c=[],n+u,t,s),v(c,n+e-o,t,s),w(c,n+e-o,t,n+e,t,n+e,t+o,o,s),v(c,n+e,t+r-i,s),w(c,n+e,t+r-i,n+e,t+r,n+e-i,t+r,i,s),v(c,n+l,t+r,s),w(c,n+l,t+r,n,t+r,n,t+r-l,l,s),v(c,n,t+u,s),w(c,n,t+u,n,t,n+u,t,u,s),c[0]=new y(+c[0],{lineCap:"butt",lineJoin:"bevel"}),d.push(c),d.push(s.transform(n,t)),g=null,h=!1),m},m.arc=function(n,t,e,r,u,o){var i=x([n,t,e,r,u]);return i&&(e<0&&U("Negative radius in arc"),(i=M(n,t,e,e,0,r,u,o,s))[0]=new y(+i[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),i[i.length-2]=new y(+i[i.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),h?(d.push(i),h=!1):d[d.length-1].push.apply(d[d.length-1],i),g=null),m},m.ellipse=function(n,t,e,r,u,o,i,l){var a=x([n,t,e,r,u,o,i]);return a&&((e<0||r<0)&&U("Negative radius in ellipse"),(a=M(n,t,e,r,u,o,i,l,s))[0]=new y(+a[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),a[a.length-2]=new y(+a[a.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),h?(d.push(a),h=!1):d[d.length-1].push.apply(d[d.length-1],a),g=null),m},m.arcTo=function(n,t,e,r,u){n=x([n,t,e,r,u]);return n&&(u<0&&U("Negative radius in arcTo"),h&&(d.push(s.transform(n[0],n[1])),h=!1),(n=f((t=s.inv().transform(+d[d.length-1][d[d.length-1].length-2],d[d.length-1][d[d.length-1].length-1]))[0],t[1],n[0],n[1],n[2],n[3],u,s))[0]=new y(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new y(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),d[d.length-1].push.apply(d[d.length-1],n),g=null),m},m.quadraticCurveTo=function(n,t,e,r){n=x([n,t,e,r],s);return n&&(h&&(d.push([n[0],n[1]]),h=!1),t=d[d.length-1].pop(),(n=i([+d[d.length-1].pop(),t,n[0],n[1],n[2],n[3]]))[0]=new y(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new y(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),d[d.length-1].push.apply(d[d.length-1],n),g=null),m},m.bezierCurveTo=function(n,t,e,r,u,o){n=x([n,t,e,r,u,o],s);return n&&(h&&(d.push([n[0],n[1]]),h=!1),t=d[d.length-1].pop(),(n=i([+d[d.length-1].pop(),t,n[0],n[1],n[2],n[3],n[4],n[5]]))[0]=new y(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new y(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),d[d.length-1].push.apply(d[d.length-1],n),g=null),m},m.addPath=function(n){return n instanceof G&&(d.push.apply(d,n._d),g=null),m},m.dispose=function(){g=d=null}}function O(n,t,e,r,u,o){var i=this,l=1,a=1;arguments.length&&(i.m11=n,i.m12=t,i.m13=e,i.m21=r,i.m22=u,i.m23=o),D(i,"a",{get:function(){return i.m11},set:function(n){i.m11=l=n}}),D(i,"c",{get:function(){return i.m12},set:function(n){i.m12=n}}),D(i,"e",{get:function(){return i.m13},set:function(n){i.m13=n}}),D(i,"b",{get:function(){return i.m21},set:function(n){i.m21=n}}),D(i,"d",{get:function(){return i.m22},set:function(n){i.m22=a=n}}),D(i,"f",{get:function(){return i.m23},set:function(n){i.m23=n}}),D(i,"is2D",{get:function(){return!0},set:function(n){}}),D(i,"isIdentity",{get:function(){return xn(i.m11,1)&&xn(i.m12,0)&&xn(i.m13,0)&&xn(i.m21,0)&&xn(i.m22,1)&&xn(i.m23,0)},set:function(n){}}),D(i,"sx",{get:function(){return l},set:function(n){l*=n}}),D(i,"sy",{get:function(){return a},set:function(n){a*=n}})}function y(n,t){this.value=n,this.params=t||null}function x(n,t){for(var e=0,r=n.length;e<r;++e)if(z(n[e])||!P(n[e]))return null;if(t)for(e=0;e<r;e+=2){var u=t.transform(n[e],n[e+1]);n[e]=u[0],n[e+1]=u[1]}return n}function v(n,t,e,r){r=r?r.transform(t,e):[t,e];n.push(r[0],r[1])}function w(n,t,e,r,u,o,i,l,a){n.push.apply(n,f(t,e,r,u,o,i,l,a))}function b(G,n,t,O,_,e,M,N,B,F,U,Y,$,j){var r,u,o,i,l,W,V,X,H,a,f,c,s,m,h,d,g,p,y,x,v,K,Q,Z,nn,w,tn,en,rn,un,b,C,T,I,on,R,D,z,ln,P,k,q,S,J,A,L,E=n.length,an=M,fn=e;if(E<6)sn(G,u=n[0],o=n[1],i=n[2],l=n[3],a=cn.abs(i-u),f=cn.abs(l-o),(s=mn(t,a,f,B,F))[0],s[1],e,e,t,U,Y,$,j);else for(E-=2,r=0;r<E;r+=2)u=n[r],o=n[r+1],i=n[r+2],l=n[r+3],s=mn(t,a=cn.abs(i-u),f=cn.abs(l-o),B,F),u.params&&u.params.lineCap&&(fn=!0===u.params.lineCap?e:u.params.lineCap),sn(G,u,o,i,l,a,f,s[0],s[1],0===r?fn:null,E===r+2?fn:null,t,U,Y,$,j),0<r&&(0<c[0]||0<c[1]||0<s[0]||0<s[1])&&(u.params&&u.params.lineJoin&&(an=!0===u.params.lineJoin?M:u.params.lineJoin),m=G,h=W,d=V,g=u,p=o,y=i,x=l,v=X,K=H,Q=c[0],Z=c[1],nn=a,w=f,tn=s[0],en=s[1],rn=an,un=N,b=U,C=Y,T=$,I=j,L=A=J=S=q=k=P=ln=z=D=R=on=void 0,yn((J=p<d?-1:1)*K*(A=y<g?-1:1)*nn,(L=x<p?-1:1)*w*(S=g<h?-1:1)*v,1e-6)||(on={x:h-(R=S*Q),y:d+(q=J*Z)},h={x:h+R,y:d-q},d={x:g-R,y:p+q},R={x:g+R,y:p-q},D={x:g-(q=A*tn),y:p+(k=L*en)},z={x:g+q,y:p-k},ln={x:y-q,y:x+k},y={x:y+q,y:x-k},q={x:g,y:p},x=L*w*S*v<J*K*A*nn?(P=d,D):(P=R,z),A*J*S*L<0&&(P=R===P?d:R,x=z===x?D:z),S*L<0&&(P=R===P?d:R),A*J<0&&(x=z===x?D:z),S*A<0&&(P=R===P?d:R,x=z===x?D:z),"bevel"===rn?(gn(m,P.x,P.y,x.x,x.y,null,null,1,b,C,T,I),hn(m,q.x,q.y,P.x,P.y,x.x,x.y,b,C,T,I)):(k=x===z?y:ln,p=function(n,t,e,r,u,o,i,l){var a=r-t,f=n-e,e=e*t-n*r,t=l-o,n=u-i,r=i*o-u*l,i=a*n-f*t;return!xn(i,0)&&{x:(f*r-e*n)/i,y:(e*t-a*r)/i}}((g=P===R?h:on).x,g.y,P.x,P.y,x.x,x.y,k.x,k.y),w=pn(p.x-q.x,p.y-q.y),v=cn.max(pn(Q,Z),pn(tn,en)),"round"===rn?(p={x:q.x+v*(p.x-q.x)/w,y:q.y+v*(p.y-q.y)/w},hn(m,q.x,q.y,P.x,P.y,x.x,x.y,b,C,T,I),dn(m,P.x,P.y,x.x,x.y,p.x,p.y,v,b,C,T,I)):un*v<w?(gn(m,P.x,P.y,x.x,x.y,null,null,1,b,C,T,I),hn(m,q.x,q.y,P.x,P.y,x.x,x.y,b,C,T,I)):(gn(m,P.x,P.y,p.x,p.y,null,null,1,b,C,T,I),gn(m,x.x,x.y,p.x,p.y,null,null,1,b,C,T,I),hn(m,q.x,q.y,P.x,P.y,x.x,x.y,b,C,T,I),hn(m,p.x,p.y,P.x,P.y,x.x,x.y,b,C,T,I))))),W=u,V=o,X=a,H=f,c=s}function sn(n,t,e,r,u,o,i,l,a,f,c,s,m,h,d,g){var p,y,x,v,w;0===l&&0===a?gn(n,t,e,r,u,o,i,s,m,h,d,g,!0,!0):(n=n,e=e,u=u,i=i,l=l,a=a,f=f,c=c,s=s,m=m,h=h,d=d,g=g,(r=r)<(t=t)&&(p=t,t=r,r=p,p=e,e=u,u=p,p=f,f=c,c=p),p=u<e?-1:1,xn(o=o,0)?("square"===f&&(e-=p*l),"square"===c&&(u+=p*l),"round"===f&&dn(n,t-l,e,t+l,e,t,e-p*l,l,m,h,d,g),"round"===c&&dn(n,r-l,u,r+l,u,r,u+p*l,l,m,h,d,g),k(n,cn.round(t-l),cn.round(e),cn.round(t+l),cn.round(u),m,h,d,g)):xn(i,0)?("square"===f&&(t-=+a),"square"===c&&(r+=+a),"round"===f&&dn(n,t,e-a,t,e+a,t-a,e,a,m,h,d,g),"round"===c&&dn(n,r,u-a,r,u+a,r+a,u,a,m,h,d,g),k(n,cn.round(t),cn.round(e-a),cn.round(r),cn.round(e+a),m,h,d,g)):("square"===f&&(t-=+a,e-=p*l),"square"===c&&(r+=+a,u+=p*l),i=t-(o=+l),v=e+(y=p*a),t=t+o,e=e-y,x=r-o,w=u+y,r=r+o,o=u-y,s=pn(l,a),"round"===f?dn(n,i,v,t,e,(i-+a+t-+a)/2,(v-p*l+e-p*l)/2,s,m,h,d,g):gn(n,i,v,t,e,null,null,1,m,h,d,g),gn(n,t,e,r,o,null,null,1,m,h,d,g),"round"===c?dn(n,r,o,x,w,(+a+x+r+ +a)/2,(w+p*l+o+p*l)/2,s,m,h,d,g):gn(n,r,o,x,w,null,null,1,m,h,d,g),gn(n,x,w,i,v,null,null,1,m,h,d,g),hn(n,i,v,t,e,x,w,m,h,d,g),hn(n,t,e,x,w,r,o,m,h,d,g)))}function mn(n,t,e,r,u){n=cn.abs(n/2),e=xn(t,0)?[r*n,0]:xn(e,0)?[0,u*n]:[r*e*n/(r=pn(t,e)),u*t*n/r];return e=e[0]<=.5&&e[1]<=.5?[0,0]:e}function k(n,t,e,r,u,o,i,l,a){var f,c;if(r<t&&(f=t,t=r,r=f),u<e&&(c=e,e=u,u=c),null!=o){if(r<o||l<t||u<i||a<e)return;t=cn.max(t,o),e=cn.max(e,i),r=cn.min(r,l),u=cn.min(u,a)}if(e===u)for(f=t;f<=r;++f)n(f,e,1);else if(t===r)for(c=e;c<=u;++c)n(t,c,1);else for(c=e;c<=u;++c)for(f=t;f<=r;++f)n(f,c,1)}function hn(n,t,e,r,u,o,i,l,a,f,c){var s,m,h,d,g,p,y,x,v,w,b,C,T,I,R=null!=l;if(!R||!(cn.max(t,r,o)<l||cn.min(t,r,o)>f||cn.max(e,u,i)<a||cn.min(e,u,i)>c)){if(u<e&&(h=e,e=u,u=h,h=t,t=r,r=h),i<e&&(h=e,e=i,i=h,h=t,t=o,o=h),i<u&&(h=u,u=i,i=h,h=r,r=o,o=h),xn(w=i-e,0))return d=cn.round(e),k(n,s=cn.round(cn.min(t,r,o)),d,m=cn.round(cn.max(t,r,o)),d,l,a,f,c);for(C=i-u,y=o-t,x=r-t,v=o-r,T=xn(b=u-e,0),I=xn(C,0),d=cn.round(e+.5),g=u,p=cn.round(i-.5),R&&(d=cn.max(a,d),p=cn.min(c,p));d<=p;++d)if(m=d<g?T?(s=t,r):(s=y*(d-e)/w+t,x*(d-e)/b+t):I?(s=r,o):(s=y*(d-e)/w+t,v*(d-u)/C+r),cn.abs(m-s)<1)(!R||l<=s&&s<=f)&&n(cn.round(s),d,1);else for(m<s&&(h=s,s=m,m=h),s=cn.round(s+.5),m=cn.round(m-.5),R&&(s=cn.max(l,s),m=cn.min(f,m));s<=m;++s)n(s,d,1)}}function dn(n,t,e,r,u,o,i,l,a,f,c,s){var m,h,d,g,p,y,x,v,w,b,C,T,G,I,R,D,z,P,k,q,S,J,A,L,E,O=null!=a;for(u<e&&(P=e,e=u,u=P,P=t,t=r,r=P),P=o,k=i,J=r,A=u,L=(J-=q=t)*(P-=q)+(A-=S=e)*(k-=S),E=pn(J,A),pn(P,k),q=o+l/(k=pn(o-(b=[q+(P=L/E)*J/E,S+P*A/E])[0],i-b[1]))*(b[0]-o),L=i+l/k*(b[1]-i),J=cn.atan2(i-L,o-q),S=cn.atan2(e-L,t-q),A=cn.atan2(u-L,r-q),J=F(J),E=F(S),k=F(A),D=(b=M(q,L,l,l,0,S,A,!(J<E&&J<k||E<J&&k<J||E<J&&J<k))).length-2,I=0;I<D;I+=2)gn(n,b[I],b[I+1],b[I+2],b[I+3],null,null,1,a,f,c,s);for(b=$([b]).sort(W),m=cn.round(cn.min(e,u,i,b.ymin)),h=cn.round(cn.max(e,u,i,b.ymax)),O&&(m=cn.max(m,f),h=cn.min(h,s)),C=r-t,G=xn(T=u-e,0),I=0,D=b.length;m<=h;++m){for(;I<D&&b[I][3]<m;)++I;if(D<=I)break;if((z=b[I])[1]>m)m=cn.floor(z[1]);else{for(g=-(d=_),e<=m&&m<=u&&(g=G?(d=cn.min(d,t,r),cn.max(g,t,r)):(d=cn.min(d,p=C*(m-e)/T+t),cn.max(g,p))),R=I;R<D&&b[R][1]<=m;++R)(z=b[R])[3]>=m&&(y=z[0],x=z[2],g=xn(v=z[1],w=z[3])?(d=cn.min(d,y,x),cn.max(g,y,x)):(d=cn.min(d,p=(x-y)*(m-v)/(w-v)+y),cn.max(g,p)));for(d=cn.round(d+.5),g=cn.round(g-.5),O&&(d=cn.max(d,a),g=cn.min(g,c));d<=g;++d)n(d,m,1)}}}function gn(n,t,e,r,u,o,i,l,a,f,c,s,m,h){var d=cn.min(t,r),g=cn.max(t,r),p=cn.min(e,u),y=cn.max(e,u);if(!(g<a||c<d||y<f||s<p)){if(null==o&&(o=cn.abs(r-t),i=cn.abs(u-e)),d<a||c<g||p<f||s<y){d=function(n,t,e,r,u,o,i,l){var a=-(e=-(e-n)),f=-(r=-(r-t)),u=n-u,i=i-n,o=t-o,l=l-t,c=1,s=0;if(!(0==e&&u<0||0==a&&i<0||0==r&&o<0||0==f&&l<0||(0!=e&&(u=u/e,i=i/a,e<0?(s<u&&(s=u),i<c&&(c=i)):(s<i&&(s=i),u<c&&(c=u))),0!=r&&(e=o/r,i=l/f,r<0?(s<e&&(s=e),i<c&&(c=i)):(s<i&&(s=i),e<c&&(c=e))),c<s)))return[n+a*s,t+f*s,n+a*c,t+f*c]}(t,e,r,u,a,f,c,s);if(!d)return;t=d[0],e=d[1],r=d[2],u=d[3]}if(xn(o,0)||xn(i,0))return k(n,cn.round(t),cn.round(e),cn.round(r),cn.round(u));var x,v,w,b,C=0,T=0,I=0,g=o<i,R=l<1?l:1;if(g&&(x=t,t=e,e=x,x=r,r=u,u=x,x=o,o=i,i=x),r<t&&(x=t,t=r,r=x,v=e,e=u,u=v),y=e+(b=(u<e?-1:1)*i/o)*((p=cn.round(t))-t),a=m?1:1-(t+.5-cn.floor(t+.5)),f=p,I=1-(T=y-(c=cn.floor(y))),g?(n(c,f,R*I*a),n(c+1,f,R*T*a)):(n(f,c,R*I*a),n(f,c+1,R*T*a)),C=y+b,y=u+b*((p=cn.round(r))-r),a=h?1:r+.5-cn.floor(r+.5),w=p,I=1-(T=y-(s=cn.floor(y))),g?(n(s,w,R*I*a),n(s+1,w,R*T*a)):(n(w,s,R*I*a),n(w,s+1,R*T*a)),g)for(x=f+1;x<w;++x)0<(I=1-(T=C-(v=cn.floor(C))))&&n(v,x,R*I),0<T&&n(v+1,x,R*T),C+=b;else for(x=f+1;x<w;++x)0<(I=1-(T=C-(v=cn.floor(C))))&&n(x,v,R*I),0<T&&n(x,v+1,R*T),C+=b}}function M(r,u,o,i,n,l,t,e,a){f=t,e=e,c=F(s=l),f+=c-s,!e&&p<=f-c?f=c+p:e&&p<=c-f?f=c-p:!e&&f<c?f=c+(p-F(c-f)):e&&c<f&&(f=c-(p-F(f-c)));var f,c,s=[c,f],m=(l=s[0],t=s[1],n?cn.cos(n):1),h=n?cn.sin(n):0,d=t-l,g=a&&!a.isIdentity;return C(function(n){var n=l+n*d,t=o*cn.cos(n),n=i*cn.sin(n),e=r+m*t-h*n,t=u+h*t+m*n;return g?a.transform(e,t):[e,t]})}function f(n,t,e,r,u,o,i,l){var a=[],n=function(n,t,e,r,u,o,i){if(yn(e,n)&&yn(r,t)||yn(e,u)&&yn(r,o)||yn(i,0))return[e,r];var l,a,f,c=!1;if(u={x:u-e,y:o-r},a=pn((o={x:n-e,y:t-r}).x,o.y),f=pn(u.x,u.y),xn(l=(o.x*u.x+o.y*u.y)/(a*f),-1))return[e,r];if(xn(l,1))return[n+(n=65535/a)*o.x,t+n*o.y];t=i/cn.tan(cn.acos(l)/2),l={x:e+(n=t/a)*o.x,y:r+n*o.y},n=pn((a={x:o.y,y:-o.x}).x,a.y),o=i/n,(a.x*u.x+a.y*u.y)/(n*f)<0&&(a={x:-a.x,y:-a.y});o={x:l.x+o*a.x,y:l.y+o*a.y},a={x:-a.x,y:-a.y},n=cn.acos(a.x/n),a.y<0&&(n=p-n);f=pn((t={x:(e={x:e+(a=t/f)*u.x,y:r+a*u.y}).x-o.x,y:e.y-o.y}).x,t.y),r=cn.acos(t.x/f),t.y<0&&(r=p-r);r<n&&n-r<s&&(c=!0);n<r&&s<r-n&&(c=!0);return[l.x,l.y,o.x,o.y,n,r,!(!c||yn(p,i))]}(n,t,e,r,u,o,i);return n&&2<=n.length&&(t=l?l.transform(n[0],n[1]):[n[0],n[1]],a.push(t[0],t[1]),2<n.length)&&a.push.apply(a,M(n[2],n[3],i,i,0,n[4],n[5],n[6],l)),a}function i(i){return C(6<i.length?function(n){var t=1-n,e=n*n,r=t*t,u=r*t,o=e*n,r=3*r*n,n=3*e*t;return[u*i[0]+r*i[2]+n*i[4]+o*i[6],u*i[1]+r*i[3]+n*i[5]+o*i[7]]}:function(n){var t=1-n,e=t*t,t=2*t*n,n=n*n;return[e*i[0]+t*i[2]+n*i[4],e*i[1]+t*i[3]+n*i[5]]})}function N(n,t,e,r,u,o,i,l,a,f,c,s,m,h){for(var d,g=0,p=t._d,y=p.length;g<y;++g)(d=p[g])&&2<d.length&&b(n,d,e,0,0,o,i,l,a,f,c,s,m,h)}function pn(n,t){n=cn.abs(n),t=cn.abs(t);var e=0;return xn(n,0)?t:xn(t,0)?n:t<n?n*cn.sqrt(1+(e=t/n)*e):n<t?t*cn.sqrt(1+(e=n/t)*e):n*r}function Y(n,t,e,r,u,o){return(n-e)*(o-r)-(u-e)*(t-r)<0?-1:1}function h(n,t,e,r,u,o){var u=u-e,o=o-r,i=pn(u,o);return xn(i,0)?pn(n-e,t-r):cn.abs(u*(r-t)-o*(e-n))/i}function $(n){if(!n)return[];for(var t,e,r,u=[],o=n.length,i=_,l=-_,a=0,f=0,c=0;c<o;++c)if((r=n[c])&&!((t=r.length-2)<=0)){for(++a,f=1,e=0;e<t;e+=2)r[e].params&&r[e].params.type&&(++a,f=1),i=cn.min(i,r[e+1]),l=cn.max(l,r[e+1]),r[e+1]>r[e+3]?u.push([+r[e+2],r[e+3],+r[e],r[e+1],-1,a,f,0,0,0]):u.push([+r[e],r[e+1],+r[e+2],r[e+3],1,a,f,0,0,0]),++f;i=cn.min(i,r[1+t]),l=cn.max(l,r[1+t])}return u.ymin=i,u.ymax=l,u}function j(n,t){for(var e,r,u,o=0,i=0;i<t;++i)if(!(r=n[i])[9])for(e=i+1;e<t;++e)(u=n[e])[9]||r[4]!==u[4]||r[5]!==u[5]||1<cn.abs(r[6]-u[6])||(yn(r[0],u[0],1e-5)&&yn(r[1],u[1],1e-5)&&yn(r[2],u[2],1e-5)&&yn(r[3],u[3],1e-5)||yn(r[3],u[1],1e-6)||yn(r[1],u[3],1e-6))&&(u[9]=1,++o);return o}function C(n){var t,e=[],r=o,u=n(0);for(e.push(u[0],u[1]),t=0;t<r;++t)u=function n(t,e,r,u,o,i){if(u<=r||yn(r,u,1e-6))return o;o=o||e(r);i=i||e(u);var l,a=pn(i[0]-o[0],i[1]-o[1]);if(a<=c){if(a<1)return o;t.push(i[0],i[1])}else h((l=e(a=(r+u)/2))[0],l[1],o[0],o[1],i[0],i[1])<=m?t.push(i[0],i[1]):(n(t,e,r,a,o,l),n(t,e,a,u,l,i));return i}(e,n,0===t?0:t/r,r===t+1?1:(t+1)/r,u,null);return e}function yn(n,t,e){return cn.abs(n-t)<(e||1e-6)}function xn(n,t){return cn.abs(n-t)<Number.EPSILON}function B(n,t,e){return cn.min(cn.max(n,t),e)}function F(n){return n=n,e=0,r=t=p,(n-=t*cn.floor(n/t))<e&&(n+=t),r<n&&(n-=t),n;var t,e,r}function W(n,t){var e=n[1]-t[1];return yn(e,0)?n[3]-t[3]:e}function U(n){throw new Error(n)}function t(){}return L.VERSION="0.9.9",L[n]={constructor:L,width:null,height:null,getContext:null},L.getRGBAFrom=function(o){var e;return"function"==typeof o?function(n,t){n=o(n,t);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:o.data&&null!=o.width&&null!=o.height?function(n,t){var e=o.width,r=o.height,u=o.data;return 0<=n&&n<e&&0<=t&&t<r?[u[r=n+e*t<<2],u[1+r],u[2+r],u[3+r]/255]:A}:(e=[o[0]||0,o[1]||0,o[2]||0,3<o.length?o[3]||0:1],function(n,t){return e})},L.setRGBATo=function(y){var n;return"function"==typeof y?y:((n=function(n,t,e,r,u,o,i){var l=y.width,a=y.height,f=y.data;if(0<=n&&n<l&&0<=t&&t<a){var a=n+l*t<<2,n=f[a]||0,l=f[1+a]||0,t=f[2+a]||0,c=(f[3+a]||0)/255,s=o,m=null,h=0,d=0,g=0,p=0;switch("clear"!==(i=i||"source-over")&&"copy"!==i&&(m=(m=E.CompositionMode[i])||E.CompositionMode[i="source-over"]),i){case"clear":m=null;break;case"copy":h=e,d=r,g=u,p=B(cn.round(255*s),0,255),m=null;break;case"xor":case"destination-out":case"destination-in":case"destination-atop":case"destination-over":case"source-out":case"source-in":case"source-atop":case"source-over":p=m(c,c,s,s);break;default:p=s+c-s*c}m&&(p=0<p?(h=B(cn.round(255*m(c*n/255,c,s*e/255,s)/p),0,255),d=B(cn.round(255*m(c*l/255,c,s*r/255,s)/p),0,255),g=B(cn.round(255*m(c*t/255,c,s*u/255,s)/p),0,255),B(cn.round(255*p),0,255)):g=d=h=0),f[a]=h,f[1+a]=d,f[2+a]=g,f[3+a]=p}}).$target=y,n)},E[n]={constructor:E,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,getLineDash:null,setLineDash:null,globalAlpha:null,globalCompositeOperation:null,save:null,restore:null,reset:null,scale:null,rotate:null,translate:null,transform:null,getTransform:null,setTransform:null,resetTransform:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,clearRect:null,strokeRect:null,fillRect:null,stroke:null,fill:null,clip:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,t){return null==t&&null!=n.width&&null!=n.height&&(t=n.height,n=n.width),{data:new J(n*t<<2),width:n,height:t}},getImageData:null,putImageData:null,drawImage:null,createLinearGradient:t,createRadialGradient:t,createConicGradient:t,createPattern:t,strokeText:t,fillText:t,measureText:t},((L.RenderingContext2D=E).CompositionMode={xor:function(n,t,e,r){return e*(1-t)+n*(1-r)},"destination-out":function(n,t,e,r){return n*(1-r)},"destination-in":function(n,t,e,r){return n*r},"destination-atop":function(n,t,e,r){return e*(1-t)+n*r},"destination-over":function(n,t,e,r){return e*(1-t)+n},"source-out":function(n,t,e,r){return e*(1-t)},"source-in":function(n,t,e,r){return e*t},"source-atop":function(n,t,e,r){return e*t+n*(1-r)},"source-over":function(n,t,e,r){return e+n*(1-r)},multiply:function(n,t,e,r){return e*n+e*(1-t)+n*(1-r)},screen:function(n,t,e,r){return e+n-e*n},overlay:function(n,t,e,r){return 2*n<=t?2*e*n+e*(1-t)+n*(1-r):e*(1+t)+n*(1+r)-2*n*e-t*r},darken:function(n,t,e,r){return cn.min(e*t,n*r)+e*(1-t)+n*(1-r)},lighten:function(n,t,e,r){return cn.max(e*t,n*r)+e*(1-t)+n*(1-r)},"color-dodge":function(n,t,e,r){return e===r&&0===n?e*(1-t):e===r?r*t+e*(1-t)+n*(1-r):r*t*cn.min(1,n/t*r/(r-e))+e*(1-t)+n*(1-r)},"color-burn":function(n,t,e,r){return 0===e&&n===t?r*t+n*(1-r):0===e?n*(1-r):r*t*(1-cn.min(1,(1-(t?n/t:0))*r/e))+e*(1-t)+n*(1-r)},"hard-light":function(n,t,e,r){return 2*e<=r?2*e*n+e*(1-t)+n*(1-r):e*(1+t)+n*(1+r)-r*t-2*e*n},"soft-light":function(n,t,e,r){var u=t?n/t:0;return 2*e<=r?n*(r+(2*e-r)*(1-u))+e*(1-t)+n*(1-r):r<2*e&&4*n<=t?t*(2*e-r)*(16*cn.pow(u,3)-12*cn.pow(u,2)-3*u)+e-e*t+n:t*(2*e-r)*(cn.pow(u,.5)-u)+e-e*t+n},difference:function(n,t,e,r){return e+n-2*cn.min(e*t,n*r)},exclusion:function(n,t,e,r){return e*t+n*r-2*e*n+e*(1-t)+n*(1-r)}}).hardlight=E.CompositionMode["hard-light"],E.CompositionMode.softlight=E.CompositionMode["soft-light"],E.Interpolation={bilinear:function(n,t,e,r,u){for(var o,i,l,a,f,c,s,m,h,d,g=r*u<<2,p=new J(g),y=(t-1)/r,x=(e-1)/u,v=t<<2,w=0,b=0,C=0,T=0,I=0,R=0;R<g;R+=4,++w,b+=y)r<=w&&(I=(C+=x)-(d=(b=w=0)|C),T=d*t),o=n[m=T+(d=0|b)<<2],i=n[4+m],l=n[m+v],a=n[m+v+4],p[R]=B(cn.round(o*(f=(1-(h=b-d))*(1-I))+i*(c=h*(1-I))+l*(s=I*(1-h))+a*(h=h*I)),0,255),o=n[1+m],i=n[5+m],l=n[m+v+1],a=n[m+v+5],p[R+1]=B(cn.round(o*f+i*c+l*s+a*h),0,255),o=n[2+m],i=n[6+m],l=n[m+v+2],a=n[m+v+6],p[R+2]=B(cn.round(o*f+i*c+l*s+a*h),0,255),o=n[3+m],i=n[7+m],l=n[m+v+3],a=n[m+v+7],p[R+3]=B(cn.round(o*f+i*c+l*s+a*h),0,255);return p}},G[n]={constructor:G,_d:null,_sd:null,transform:null,dispose:null,addPath:null,moveTo:null,lineTo:null,rect:null,roundRect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null},E.Path2D=G,O[n]={constructor:O,is2D:!0,isIdentity:!0,m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1,a:null,b:null,c:null,d:null,e:null,f:null,clone:function(){var n=this,t=new O(n.m11,n.m12,n.m13,n.m21,n.m22,n.m23);return t.sx=n.sx,t.sy=n.sy,t},mul:function(n){var t,e=this;if(n instanceof O)return(t=new O(e.m11*n.m11+e.m12*n.m21,e.m11*n.m12+e.m12*n.m22,e.m11*n.m13+e.m12*n.m23+e.m13,e.m21*n.m11+e.m22*n.m21,e.m21*n.m12+e.m22*n.m22,e.m21*n.m13+e.m22*n.m23+e.m23)).sx=e.sx*n.sx,t.sy=e.sy*n.sy,t},inv:function(){var n=this,t=n.m11,e=n.m12,r=n.m13,u=n.m21,o=n.m22,i=n.m23,l=t*o-e*u;return xn(l,0)?null:((u=new O(o=o/l,e=-e/l,-o*r-e*i,o=-u/l,e=t/l,-o*r-e*i)).sx=1/n.sx,u.sy=1/n.sy,u)},transform:function(n,t){1===arguments.length&&(t=n[1],n=n[0]);var e=this;return[e.m11*n+e.m12*t+e.m13,e.m21*n+e.m22*t+e.m23]}},O.translate=function(n,t){return new O(1,0,n||0,0,1,t||0)},O.scale=function(n,t,e,r){e=new O(n,0,-n*(e=e||0)+e,0,t,-t*(r=r||0)+r);return e.sx=n,e.sy=t,e},O.rotate=function(n,t,e){t=t||0,e=e||0;var r=cn.cos(n||0),n=cn.sin(n||0);return new O(r,-n,t-r*t+n*e,n,r,e-r*e-n*t)},O.skewX=function(n){return new O(1,n||0,0,0,1,0)},O.skewY=function(n){return new O(1,0,0,n||0,1,0)},O.EYE=function(){return new O(1,0,0,0,1,0)},E.Matrix2D=O,y[n]={constructor:y,value:0,params:null,valueOf:function(){return this.value},toString:function(){return String(this.value)}},L});