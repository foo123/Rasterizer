/**
*   Rasterizer
*   rasterize, stroke and fill lines, rectangles, curves and paths
*
*   @version 0.9.7
*   https://github.com/foo123/Rasterizer
*
**/
!function(e,n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t.call(e):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return t.call(e)}):n in e||(e[n]=t.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[n]})}("undefined"!=typeof self?self:this,"Rasterizer",function(e){"use strict";var y=Object.defineProperty,n="prototype",tn=Math,s=1/0,r=tn.sqrt(2),d=isNaN,x=isFinite,v=tn.PI,b=2*v,w=v/2,o=6,f=r,c=.5,t="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array;function C(n,e,t){if(!(this instanceof C))return new C(n,e,t);var r=new T(n,e,t);y(this,"width",{get:function(){return n},set:function(n){}}),y(this,"height",{get:function(){return e},set:function(n){}}),this.getContext=function(n){if("2d"===n)return r;F('Unsupported context "'+n+'"')}}function T(z,_,o){var r,u=this,i=C.getRGBAFrom([0,0,0,1]),l=C.getRGBAFrom([0,0,0,1]),A=1,t="butt",a="miter",f=10,c=1,e=[],s=0,m=P.EYE(),h=1,p="source-over",S=new N(m),I=function(){r={}},k=function(n){for(var e in r){var t=r[e],e=e.split(",");n(+e[0],+e[1],t)}},E=function(n,e,t){0<=n&&n<z&&0<=e&&e<_&&0<t&&0<h&&(t*=A*h,n=String(n)+","+String(e),(r[n]||0)<t)&&(r[n]=t)},g=function(n,e,t){var r=i(n,e),u=3<r.length?r[3]:1;o(n,e,r[0],r[1],r[2],u*t,p)},L=function(n,e,t){var r=l(n,e),u=3<r.length?r[3]:1;o(n,e,r[0],r[1],r[2],u*t,p)};y(u,"strokeStyle",{get:function(){return""},set:function(n){i=C.getRGBAFrom(n)}}),y(u,"fillStyle",{get:function(){return""},set:function(n){l=C.getRGBAFrom(n)}}),y(u,"lineWidth",{get:function(){return c},set:function(n){!d(n=+n)&&x(n)&&0<=n&&(c=n)}}),y(u,"lineCap",{get:function(){return t},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square"].indexOf(n)?t=n:F('"'+n+'" lineCap is not supported!')}}),y(u,"lineJoin",{get:function(){return a},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel"].indexOf(n)?a=n:F('"'+n+'" lineJoin is not supported!')}}),y(u,"miterLimit",{get:function(){return f},set:function(n){!d(n=+n)&&x(n)&&0<=n&&(f=n)}}),y(u,"lineDashOffset",{get:function(){return s},set:function(n){!d(n=+n)&&x(n)&&0<=n&&(s=n)}}),y(u,"lineDash",{get:function(){return e.slice()},set:function(n){1&(n=[].concat(n)).length&&(n=n.concat(n)),e=n}}),u.getLineDash=function(){return u.lineDash},u.setLineDash=function(n){u.lineDash=n},y(u,"globalAlpha",{get:function(){return h},set:function(n){!d(n=+n)&&0<=n&&n<=1&&(h=n)}}),y(u,"globalCompositeOperation",{get:function(){return p},set:function(n){p=String(n)}}),u.scale=function(n,e){S._t=m=P.scale(n,e).mul(m)},u.rotate=function(n){S._t=m=P.rotate(n||0).mul(m)},u.translate=function(n,e){S._t=m=P.translate(n||0,e||0).mul(m)},u.transform=function(n,e,t,r,u,o){S._t=m=new P(n,t,u,e,r,o).mul(m)},u.getTransform=function(){return m.clone()},u.setTransform=function(n,e,t,r,u,o){1<arguments.length?m=new P(n,t,u,e,r,o):n&&null!=n.a&&null!=n.f&&(m=new P(n.a,n.c,n.e,n.b,n.d,n.f)),S._t=m},u.resetTransform=function(){S._t=m=P.EYE()},u.beginPath=function(){S=new N(m)},u.closePath=function(){S.closePath()},u.moveTo=function(n,e){S.moveTo(n,e)},u.lineTo=function(n,e){S.lineTo(n,e)},u.rect=function(n,e,t,r){S.rect(n,e,t,r)},u.roundRect=function(n,e,t,r){S.roundRect.apply(S,arguments)},u.arc=function(n,e,t,r,u,o){S.arc(n,e,t,r,u,o)},u.ellipse=function(n,e,t,r,u,o,i,l){S.ellipse(n,e,t,r,u,o,i,l)},u.arcTo=function(n,e,t,r,u){S.arcTo(n,e,t,r,u)},u.quadraticCurveTo=function(n,e,t,r){S.quadraticCurveTo(n,e,t,r)},u.bezierCurveTo=function(n,e,t,r,u,o){S.bezierCurveTo(n,e,t,r,u,o)},u.strokeRect=function(n,e,t,r){0<c&&u.stroke(new N(m).rect(n,e,t,r))},u.fillRect=function(n,e,t,r){u.fill(new N(m).rect(n,e,t,r),"evenodd")},u.stroke=function(n){var e;0<c&&(e=A,c<1&&(A=c),I(),O(E,n||S,c,0,0,t,a,f,0,0,z-1,_-1),k(g),A=e)},u.fill=function(n,e){!arguments.length||null==n&&null==e?(n=S,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof N?e="nonzero":(e=n,n=S)),"evenodd"!==(e=String(e||"nonzero").toLowerCase())&&(e="nonzero");var t=A,r=z-1,u=_-1,o=(I(),O(E,n=n||S,A=.5,0,0,"butt","bevel",0,0,0,r,u),A=t,E),t=n,n=e,i=0,e=0,l=r,r=u,a=t._sd;if(a.length){var f,c,s,m,h,p,g,y,d,x,v,b,w,C,T=a.length,P=new Array(T),q=a.ymin,J=a.ymax,R=0,D="evenodd"===n;for(q=tn.max(e,tn.round(q)),J=tn.min(r,tn.round(J));q<=J;++q){for(;R<T&&a[R][3]<q;)++R;if(T<=R)break;if((s=a[R])[1]>q)q=tn.floor(s[1]);else{for(x=s[0],v=s[2],h=s[1],p=s[3],d=sn(h,p)?(b=!1,y=tn.min(x,v),tn.max(x,v)):y=b=(v-x)*(q-h)/(p-h)+x,s[8]=b,s[9]=0,P[0]=s,f=R+(c=1);f<T&&a[f][1]<=q;++f)(s=a[f])[3]>=q&&(x=s[0],v=s[2],h=s[1],p=s[3],d=sn(h,p)?(b=!1,y=tn.min(y,x,v),tn.max(d,x,v)):(b=(v-x)*(q-h)/(p-h)+x,y=tn.min(y,b),tn.max(d,b)),s[8]=b,s[9]=0,P[c++]=s);if(m=B(P,c),!(c<m+2||(y=tn.max(i,tn.round(y+.5)),(d=tn.min(l,tn.round(d-.5)))<y)))if(D)for(g=y;g<=d;++g){for(C=w=!1,f=0;f<c;++f)(s=P[f])[9]||!1!==(b=s[8])&&(b<g&&(w=!w),g<b)&&(C=!C);w&&C&&o(g,q,1)}else for(g=y;g<=d;++g){for(f=C=w=0;f<c;++f)(s=P[f])[9]||!1!==(b=s[8])&&(b<g||g<b)&&(m=M(g,q,s[s[4]<0?2:0],s[s[4]<0?3:1],s[s[4]<0?0:2],s[s[4]<0?1:3]),b<g&&(w+=m),g<b)&&(C+=m);w&&C&&o(g,q,1)}}}}k(L)},u.isPointInStroke=function(n,e,t){arguments.length<3&&(t=e,e=n,n=S);var r,u,o,i,l,a,f,c=e||0,s=t||0,e=n||S,m=e._d,h=m.length;for(r=0;r<h;++r)if(o=m[r],0<(i=o.length-2))for(u=0;u<i;u+=2)if(l=+o[u],a=o[u+1],f=+o[u+2],cn((o[u+3]-a)*(c-l),(s-a)*(f-l),1e-4))return!0;return!1},u.isPointInPath=function(n,e,t,r){n instanceof N||(r=t,t=e,e=n,n=S),"evenodd"!==(r=String(r||"nonzero").toLowerCase())&&(r="nonzero");var u=e||0,o=t||0,e=r,i=(t=n||S)._sd;if(!(!i.length||o<i.ymin||o>i.ymax)){for(var l,a,f,c,s,m,h,p,g,y,d,x,v,b=i.length,w=new Array(b),C=0,t="evenodd"===e;C<b&&i[C][3]<o;)++C;if(!(b<=C||(f=i[C])[1]>o)){for(g=f[0],y=f[2],s=f[1],m=f[3],p=sn(s,m)?(d=!1,h=tn.min(g,y),tn.max(g,y)):h=d=(y-g)*(o-s)/(m-s)+g,f[8]=d,f[9]=0,w[0]=f,l=C+(a=1);l<b&&i[l][1]<=o;++l)(f=i[l])[3]>=o&&(g=f[0],y=f[2],s=f[1],m=f[3],p=sn(s,m)?(d=!1,h=tn.min(h,g,y),tn.max(p,g,y)):(d=(y-g)*(o-s)/(m-s)+g,h=tn.min(h,d),tn.max(p,d)),f[8]=d,f[9]=0,w[a++]=f);if(c=B(w,a),a<c+2)return!1!==w[0][8]&&cn(u,w[0][8]);if(!(p<h||u<h||p<u)){if(t)for(v=x=!1,l=0;l<a;++l)(f=w[l])[9]||!1!==(d=f[8])&&(d<=u&&(x=!x),u<=d)&&(v=!v);else for(l=v=x=0;l<a;++l)(f=w[l])[9]||!1!==(d=f[8])&&(d<u||u<d)&&(c=M(u,o,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),d<=u&&(x+=c),u<=d)&&(v+=c);if(x&&v)return!0}}}return!1}}function N(i){i=i||P.EYE();var m=this,h=!0,p=[],g=null;y(m,"_t",{get:function(){return i.clone()},set:function(n){i=n}}),y(m,"_d",{get:function(){return p},set:function(n){}}),y(m,"_sd",{get:function(){return g=g||function(n){if(!n)return[];var e,t,r,u,o,i,l=[],a=n.length,f=s,c=-s;for(r=o=u=0;r<a;++r)if((i=n[r])&&!((e=i.length-2)<=0)){for(++u,o=1,t=0;t<e;t+=2)i[t].params&&i[t].params.type&&(++u,o=1),f=tn.min(f,i[t+1]),c=tn.max(c,i[t+1]),i[t+1]>i[t+3]?l.push([+i[t+2],i[t+3],+i[t],i[t+1],-1,u,o,0,0,0]):l.push([+i[t],i[t+1],+i[t+2],i[t+3],1,u,o,0,0,0]),++o;f=tn.min(f,i[1+e]),c=tn.max(c,i[1+e])}return l.ymin=f,l.ymax=c,l}(p).sort(u)},set:function(n){}}),m.moveTo=function(n,e){n=J([n,e],i);return n&&(p.push(n),h=!1),m},m.closePath=function(){var n,e,t,r;return p.length&&2<p[p.length-1].length&&(n=+p[p.length-1][0],e=p[p.length-1][1],t=+p[p.length-1][p[p.length-1].length-2],r=p[p.length-1][p[p.length-1].length-1],cn(n,t,1e-6)&&cn(e,r,1e-6)||(p[p.length-1].push(n,e),p.push([n,e]),h=!1,g=null)),m},m.lineTo=function(n,e){n=J([n,e],i);return n&&(h?(p.push(n),h=!1):(p[p.length-1].push(n[0],n[1]),g=null)),m},m.rect=function(n,e,t,r){t=J([n,e,n+t,e,n+t,e+r,n,e+r],i);return t&&(t.push(t[0],t[1]),p.length&&p[p.length-1].length<=2?p[p.length-1]=t:p.push(t),p.push([t[0],t[1]]),t[0]=new q(+t[0],{lineCap:"butt",lineJoin:"miter"}),g=null,h=!1),m},m.roundRect=function(n,e,t,r){var u,o,i,l,a,f,c,s=J([n,e,t,r]);return s&&(((c=(arguments[4]&&arguments[4].push?arguments[4]:[].slice.call(arguments,4)).filter(function(n){return 0<n})).length<1||4<c.length)&&F("Invalid radii in roundRect"),a=!1,4===c.length?(u=c[0],o=c[1],i=c[2],l=c[3]):3===c.length?(u=c[0],o=c[1],l=c[1],i=c[2]):l=2===c.length?(u=c[0],i=c[0],o=c[1],c[1]):(u=c[0],o=c[0],i=c[0],c[0]),t<0&&(a=!0,n+=t,t=-t,f=u,u=o,o=f,f=l,l=i,i=f),r<0&&(a=!a,e+=r,r=-r,f=u,u=l,l=f,f=o,o=i,i=f),(c=tn.min(t/(u+o),r/(o+i),t/(i+l),r/(u+l)))<1&&(u*=c,o*=c,l*=c,i*=c),s=[n+u,e],a?(s.push.apply(s,D(n+u,e+u,u,u,0,v,3*w,a)),s.push(n,e+u),s.push.apply(s,D(n+l,e+r-l,l,l,0,w,v,a)),s.push(n+l,e+r),s.push.apply(s,D(n+t-i,e+r-i,i,i,0,0,w,a)),s.push(n+t,e+r-i),s.push.apply(s,D(n+t-o,e+o,o,o,0,3*w,b,a)),s.push(n+t-o,e)):(s.push(n+t-o,e),s.push.apply(s,D(n+t-o,e+o,o,o,0,3*w,b,a)),s.push(n+t,e+r-i),s.push.apply(s,D(n+t-i,e+r-i,i,i,0,0,w,a)),s.push(n+l,e+r),s.push.apply(s,D(n+l,e+r-l,l,l,0,w,v,a)),s.push(n,e+u),s.push.apply(s,D(n+u,e+u,u,u,0,v,3*w,a))),s.push(n+u,e),s[0]=new q(+s[0],{lineCap:"butt",lineJoin:"bevel"}),p.push(s),p.push([n,e]),g=null,h=!1),m},m.arc=function(n,e,t,r,u,o){t<0&&F("Negative radius in arc");n=D(n,e,t,t,0,r,u,o);return n[0]=new q(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new q(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),h?(p.push(n),h=!1):p[p.length-1].push.apply(p[p.length-1],n),g=null,m},m.ellipse=function(n,e,t,r,u,o,i,l){(t<0||r<0)&&F("Negative radius in ellipse");n=D(n,e,t,r,u,o,i,l);return n[0]=new q(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new q(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),h?(p.push(n),h=!1):p[p.length-1].push.apply(p[p.length-1],n),g=null,m},m.arcTo=function(n,e,t,r,u){u<0&&F("Negative radius in arcTo");n=J([n,e,t,r],i);return n&&(h&&(p.push([n[0],n[1]]),h=!1),(n=function(n,e,t,r,u,o,i){var l=[],n=function(n,e,t,r,u,o,i){if(cn(t,n)&&cn(r,e)||cn(t,u)&&cn(r,o)||cn(i,0))return[t,r];var l,a,f,c=!1;if(u={x:u-t,y:o-r},a=fn((o={x:n-t,y:e-r}).x,o.y),f=fn(u.x,u.y),sn(l=(o.x*u.x+o.y*u.y)/(a*f),-1))return[t,r];if(sn(l,1))return[n+(n=65535/a)*o.x,e+n*o.y];e=i/tn.tan(tn.acos(l)/2),l={x:t+(n=e/a)*o.x,y:r+n*o.y},n=fn((a={x:o.y,y:-o.x}).x,a.y),o=i/n,(a.x*u.x+a.y*u.y)/(n*f)<0&&(a={x:-a.x,y:-a.y});o={x:l.x+o*a.x,y:l.y+o*a.y},a={x:-a.x,y:-a.y},n=tn.acos(a.x/n),a.y<0&&(n=b-n);f=fn((e={x:(t={x:t+(a=e/f)*u.x,y:r+a*u.y}).x-o.x,y:t.y-o.y}).x,e.y),r=tn.acos(e.x/f),e.y<0&&(r=b-r);r<n&&n-r<v&&(c=!0);n<r&&v<r-n&&(c=!0);return[l.x,l.y,o.x,o.y,n,r,!(!c||cn(b,i))]}(n,e,t,r,u,o,i);n&&2<=n.length&&(l.push(n[0],n[1]),2<n.length)&&l.push.apply(l,D(n[2],n[3],i,i,0,n[4],n[5],n[6]));return l}(+p[p.length-1][p[p.length-1].length-2],p[p.length-1][p[p.length-1].length-1],n[0],n[1],n[2],n[3],u))[0]=new q(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new q(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),p[p.length-1].push.apply(p[p.length-1],n),g=null),m},m.quadraticCurveTo=function(n,e,t,r){n=J([n,e,t,r],i);return n&&(h&&(p.push([n[0],n[1]]),h=!1),e=p[p.length-1].pop(),(n=l([+p[p.length-1].pop(),e,n[0],n[1],n[2],n[3]]))[0]=new q(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new q(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),p[p.length-1].push.apply(p[p.length-1],n),g=null),m},m.bezierCurveTo=function(n,e,t,r,u,o){n=J([n,e,t,r,u,o],i);return n&&(h&&(p.push([n[0],n[1]]),h=!1),e=p[p.length-1].pop(),(n=l([+p[p.length-1].pop(),e,n[0],n[1],n[2],n[3],n[4],n[5]]))[0]=new q(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new q(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),p[p.length-1].push.apply(p[p.length-1],n),g=null),m},m.addPath=function(n){return n instanceof N&&(p.push.apply(p,n._d),g=null),m},m.dispose=function(){g=p=null}}function P(n,e,t,r,u,o){var i=this;arguments.length&&(i.m11=n,i.m12=e,i.m13=t,i.m21=r,i.m22=u,i.m23=o),y(i,"a",{get:function(){return i.m11},set:function(n){i.m11=n}}),y(i,"c",{get:function(){return i.m12},set:function(n){i.m12=n}}),y(i,"e",{get:function(){return i.m13},set:function(n){i.m13=n}}),y(i,"b",{get:function(){return i.m21},set:function(n){i.m21=n}}),y(i,"d",{get:function(){return i.m22},set:function(n){i.m22=n}}),y(i,"f",{get:function(){return i.m23},set:function(n){i.m23=n}})}function q(n,e){this.v=n,this.params=e||null}function J(n,e){for(var t=0,r=n.length;t<r;++t)if(d(n[t])||!x(n[t]))return null;if(e)for(t=0;t<r;t+=2){var u=e.transform(n[t],n[t+1]);n[t]=u[0],n[t+1]=u[1]}return n}function _(L,n,e,N,O,t,M,B,F,G,U,Y){var r,u,o,i,l,j,W,V,H,a,f,K,c,Q,s,m,h,p,g,y,d,x,v,b,w,C,T,P,q,J,X,R,D,z,_,Z,A,S,I,k,E,$=n.length,nn=M,en=t;if($<6)rn(L,u=n[0],o=n[1],i=n[2],l=n[3],a=tn.abs(i-u),f=tn.abs(l-o),(c=un(e,a,f))[0],c[1],t,t,F,G,U,Y);else for($-=2,Q=B*e/2,r=0;r<$;r+=2)u=n[r],o=n[r+1],i=n[r+2],l=n[r+3],c=un(e,a=tn.abs(i-u),f=tn.abs(l-o)),u.params&&u.params.lineCap&&(en=!0===u.params.lineCap?t:u.params.lineCap),rn(L,u,o,i,l,a,f,c[0],c[1],0===r?en:null,$===r+2?en:null,F,G,U,Y),1<e&&0<r&&(u.params&&u.params.lineJoin&&(nn=!0===u.params.lineJoin?M:u.params.lineJoin),s=L,m=j,h=W,p=u,g=o,y=i,d=l,x=V,v=H,b=K[0],w=K[1],C=a,T=f,P=c[0],q=c[1],X=Q,R=F,D=G,z=U,_=Y,E=k=I=S=A=Z=void 0,"bevel"!==(J=nn)&&"miter"!==J||cn(v*C,T*x,1e-4)||(p<m&&y<p&&(E=m,m=y,y=E,E=h,h=d,d=E,E=x,x=C,C=E,E=v,v=T,T=E,E=b,b=P,P=E,E=w,w=q,q=E),w={x:m-(C=(x=p<m?-1:1)*b),y:h+(b=(T=g<h?-1:1)*w)},m={x:m+C,y:h-b},h={x:p-C,y:g+b},C={x:p+C,y:g-b},A={x:p-(P=(b=y<p?-1:1)*P),y:g+(q=(Z=d<g?-1:1)*q)},S={x:p+P,y:g-q},I={x:y-P,y:d+q},y={x:y+P,y:d-q},P={x:p,y:g},d=x==b?T==Z?sn(v,0)?(k=C,S):(k=h,A):(k=h,S):(k=C,A),"bevel"===J?(an(s,k.x,k.y,d.x,d.y,null,null,R,D,z,_),ln(s,P.x,P.y,k.x,k.y,d.x,d.y,R,D,z,_)):"miter"===J&&(E=x==b?T==Z?sn(v,0)?on(m.x,m.y,C.x,C.y,S.x,S.y,y.x,y.y):on(w.x,w.y,h.x,h.y,A.x,A.y,I.x,I.y):on(w.x,w.y,h.x,h.y,S.x,S.y,y.x,y.y):on(m.x,m.y,C.x,C.y,A.x,A.y,I.x,I.y),q=fn(E.x-P.x,E.y-P.y),X<q?(an(s,k.x,k.y,d.x,d.y,null,null,R,D,z,_),ln(s,P.x,P.y,k.x,k.y,d.x,d.y,R,D,z,_)):(an(s,k.x,k.y,E.x,E.y,null,null,R,D,z,_),an(s,d.x,d.y,E.x,E.y,null,null,R,D,z,_),ln(s,P.x,P.y,k.x,k.y,d.x,d.y,R,D,z,_),ln(s,E.x,E.y,k.x,k.y,d.x,d.y,R,D,z,_))))),j=u,W=o,V=a,H=f,K=c}function rn(n,e,t,r,u,o,i,l,a,f,c,s,m,h,p){var g;0===l&&0===a?an(n,e,t,r,u,o,i,s,m,h,p,!0,!0):(n=n,t=t,u=u,i=i,l=l,a=a,f=f,c=c,s=s,m=m,h=h,p=p,(r=r)<(e=e)&&(g=e,e=r,r=g,g=t,t=u,u=g,g=f,f=c,c=g),g=u<t?-1:1,sn(o=o,0)?("square"===f&&(t-=g*l),"square"===c&&(u+=g*l),R(n,tn.round(e-l),tn.round(t),tn.round(e+l),tn.round(u),s,m,h,p)):sn(i,0)?("square"===f&&(e-=+a),"square"===c&&(r+=+a),R(n,tn.round(e),tn.round(t-a),tn.round(r),tn.round(t+a),s,m,h,p)):("square"===f&&(e-=+a,t-=g*l),"square"===c&&(r+=+a,u+=g*l),i=r-(o=+l),c=u+(f=g*a),l=r+o,g=u-f,an(n,a=e-o,r=t+f,u=e+o,e=t-f,null,null,s,m,h,p),an(n,u,e,l,g,null,null,s,m,h,p),an(n,l,g,i,c,null,null,s,m,h,p),an(n,i,c,a,r,null,null,s,m,h,p),ln(n,a,r,u,e,i,c,s,m,h,p),ln(n,u,e,i,c,l,g,s,m,h,p)))}function un(n,e,t){return n<=1?[0,0]:sn(e,0)?[(n-1)/2,0]:sn(t,0)?[0,(n-1)/2]:[t*(n=(n-1)/2)/(t=fn(e,t)),e*n/t]}function on(n,e,t,r,u,o,i,l){var a=r-e,f=n-t,t=t*e-n*r,e=l-o,n=u-i,r=i*o-u*l,i=a*n-f*e;return!sn(i,0)&&{x:(f*r-t*n)/i,y:(t*e-a*r)/i}}function R(n,e,t,r,u,o,i,l,a){var f,c;if(r<e&&(f=e,e=r,r=f),u<t&&(c=t,t=u,u=c),null!=o){if(r<o||l<e||u<i||a<t)return;e=tn.max(e,o),t=tn.max(t,i),r=tn.min(r,l),u=tn.min(u,a)}if(t===u)for(f=e;f<=r;++f)n(f,t,1);else if(e===r)for(c=t;c<=u;++c)n(e,c,1);else for(c=t;c<=u;++c)for(f=e;f<=r;++f)n(f,c,1)}function ln(n,e,t,r,u,o,i,l,a,f,c){var s,m,h,p,g,y,d,x,v,b,w,C,T,P,q=null!=l;if(!q||!(tn.max(e,r,o)<l||tn.min(e,r,o)>f||tn.max(t,u,i)<a||tn.min(t,u,i)>c)){if(u<t&&(h=t,t=u,u=h,h=e,e=r,r=h),i<t&&(h=t,t=i,i=h,h=e,e=o,o=h),i<u&&(h=u,u=i,i=h,h=r,r=o,o=h),sn(b=i-t,0))return p=tn.round(t),R(n,s=tn.round(tn.min(e,r,o)),p,m=tn.round(tn.max(e,r,o)),p,l,a,f,c);for(C=i-u,d=o-e,x=r-e,v=o-r,T=sn(w=u-t,0),P=sn(C,0),p=tn.round(t+.5),g=u,y=tn.round(i-.5),q&&(p=tn.max(a,p),y=tn.min(c,y));p<=y;++p)if(m=p<g?T?(s=e,r):(s=d*(p-t)/b+e,x*(p-t)/w+e):P?(s=r,o):(s=d*(p-t)/b+e,v*(p-u)/C+r),tn.abs(m-s)<1)(!q||l<=s&&s<=f)&&n(tn.round(s),p,1);else for(m<s&&(h=s,s=m,m=h),s=tn.round(s+.5),m=tn.round(m-.5),q&&(s=tn.max(l,s),m=tn.min(f,m));s<=m;++s)n(s,p,1)}}function an(n,e,t,r,u,o,i,l,a,f,c,s,m){var h=tn.min(e,r),p=tn.max(e,r),g=tn.min(t,u),y=tn.max(t,u);if(!(p<l||f<h||y<a||c<g)){if(null==o&&(o=tn.abs(r-e),i=tn.abs(u-t)),h<l||f<p||g<a||c<y){h=function(n,e,t,r,u,o,i,l){var a=-(t=-(t-n)),f=-(r=-(r-e)),u=n-u,i=i-n,o=e-o,l=l-e,c=1,s=0;if(!(0==t&&u<0||0==a&&i<0||0==r&&o<0||0==f&&l<0||(0!=t&&(u=u/t,i=i/a,t<0?(s<u&&(s=u),i<c&&(c=i)):(s<i&&(s=i),u<c&&(c=u))),0!=r&&(t=o/r,i=l/f,r<0?(s<t&&(s=t),i<c&&(c=i)):(s<i&&(s=i),t<c&&(c=t))),c<s)))return[n+a*s,e+f*s,n+a*c,e+f*c]}(e,t,r,u,l,a,f,c);if(!h)return;e=h[0],t=h[1],r=h[2],u=h[3]}if(sn(o,0)||sn(i,0))return R(n,tn.round(e),tn.round(t),tn.round(r),tn.round(u));var d,x,v,b,w=0,C=0,T=0,p=o<i;if(p&&(d=e,e=t,t=d,d=r,r=u,u=d,d=o,o=i,i=d),r<e&&(d=e,e=r,r=d,x=t,t=u,u=x),y=t+(b=(u<t?-1:1)*i/o)*((g=tn.round(e))-e),l=s?1:1-(e+.5-tn.floor(e+.5)),a=g,T=1-(C=y-(f=tn.floor(y))),p?(n(f,a,T*l),n(f+1,a,C*l)):(n(a,f,T*l),n(a,f+1,C*l)),w=y+b,y=u+b*((g=tn.round(r))-r),l=m?1:r+.5-tn.floor(r+.5),v=g,T=1-(C=y-(c=tn.floor(y))),p?(n(c,v,T*l),n(c+1,v,C*l)):(n(v,c,T*l),n(v,c+1,C*l)),p)for(d=a+1;d<v;++d)0<(T=1-(C=w-(x=tn.floor(w))))&&n(x,d,T),0<C&&n(x+1,d,C),w+=b;else for(d=a+1;d<v;++d)0<(T=1-(C=w-(x=tn.floor(w))))&&n(d,x,T),0<C&&n(d,x+1,C),w+=b}}function D(t,r,u,o,n,i,e,l){a=e,l=l,f=g(c=i),a+=f-c,!l&&b<=a-f?a=f+b:l&&b<=f-a?a=f-b:!l&&a<f?a=f+(b-g(f-a)):l&&f<a&&(a=f-(b-g(a-f)));var a,f,c=[f,a],s=(i=c[0],e=c[1],n?tn.cos(n):1),m=n?tn.sin(n):0,h=e-i;return p(function(n){var n=i+n*h,e=u*tn.cos(n),n=o*tn.sin(n);return[t+s*e-m*n,r+m*e+s*n]})}function l(i){return p(6<i.length?function(n){var e=1-n,t=n*n,r=e*e,u=r*e,o=t*n,r=3*r*n,n=3*t*e;return[u*i[0]+r*i[2]+n*i[4]+o*i[6],u*i[1]+r*i[3]+n*i[5]+o*i[7]]}:function(n){var e=1-n,t=e*e,e=2*e*n,n=n*n;return[t*i[0]+e*i[2]+n*i[4],t*i[1]+e*i[3]+n*i[5]]})}function O(n,e,t,r,u,o,i,l,a,f,c,s){for(var m,h=0,p=e._d,g=p.length;h<g;++h)(m=p[h])&&2<m.length&&_(n,m,t,0,0,o,i,l,a,f,c,s)}function fn(n,e){n=tn.abs(n),e=tn.abs(e);var t=0;return sn(n,0)?e:sn(e,0)?n:e<n?n*tn.sqrt(1+(t=e/n)*t):n<e?e*tn.sqrt(1+(t=n/e)*t):n*r}function M(n,e,t,r,u,o){return(n-t)*(o-r)-(u-t)*(e-r)<0?-1:1}function m(n,e,t){var r=e[0],e=e[1],u=t[0],t=t[1],o=n[0],n=n[1],u=u-r,t=t-e,i=fn(u,t);return sn(i,0)?fn(o-r,n-e):tn.abs(u*(e-n)-t*(r-o))/i}function B(n,e){for(var t,r,u,o=0,i=0;i<e;++i)if(!(r=n[i])[9])for(t=i+1;t<e;++t)(u=n[t])[9]||r[4]!==u[4]||r[5]!==u[5]||1<tn.abs(r[6]-u[6])||(cn(r[0],u[0],1e-5)&&cn(r[1],u[1],1e-5)&&cn(r[2],u[2],1e-5)&&cn(r[3],u[3],1e-5)||cn(r[3],u[1],1e-6)||cn(r[1],u[3],1e-6))&&(u[9]=1,++o);return o}function p(n){var e,t=[],r=o,u=n(0);for(t.push(u[0],u[1]),e=0;e<r;++e)u=function n(e,t,r,u,o,i){if(u<=r||cn(r,u,1e-6))return o;o=o||t(r);i=i||t(u);var l,a=fn(i[0]-o[0],i[1]-o[1]);if(a<=f){if(a<1)return o;e.push(i[0],i[1])}else m(l=t(a=(r+u)/2),o,i)<=c?e.push(i[0],i[1]):(n(e,t,r,a,o,l),n(e,t,a,u,l,i));return i}(t,n,0===e?0:e/r,r===e+1?1:(e+1)/r,u,null);return t}function cn(n,e,t){return tn.abs(n-e)<(t||1e-6)}function sn(n,e){return tn.abs(n-e)<Number.EPSILON}function z(n,e,t){return tn.min(tn.max(n,e),t)}function g(n){return n=n,t=0,r=e=b,(n-=e*tn.floor(n/e))<t&&(n+=e),r<n&&(n-=e),n;var e,t,r}function u(n,e){var t=n[1]-e[1];return cn(t,0)?n[3]-e[3]:t}function F(n){throw new Error(n)}return C.VERSION="0.9.7",C[n]={constructor:C,width:null,height:null,getContext:null},C.createImageData=function(n,e){return{data:new t(n*e<<2),width:n,height:e}},C.getRGBAFrom=function(t){var r;return"function"==typeof t?function(n,e){n=t(n,e);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:(r=[t[0],t[1],t[2],3<t.length?t[3]:1],function(n,e){return r})},C.setRGBATo=function(n){var g,y,d;return"function"==typeof n?n:(g=n.width,y=n.height,d=n.data,function(n,e,t,r,u,o,i){if(0<=n&&n<g&&0<=e&&e<y){var n=n+g*e<<2,e=d[n],l=d[1+n],a=d[2+n],f=d[3+n]/255,c=o,o=0,s=0,m=0,h=0,p=(p=T.CompositionMode[i=i||"source-over"])||T.CompositionMode[i="source-over"];switch(i){case"clear":case"copy":case"xor":case"destination-out":case"destination-in":case"destination-atop":case"destination-over":case"source-out":case"source-in":case"source-atop":case"source-over":h=p(f,f,c,c);break;default:h=c+f-c*f}h=0<h?(o=z(tn.round(255*p(f*e/255,f,c*t/255,c)/h),0,255),s=z(tn.round(255*p(f*l/255,f,c*r/255,c)/h),0,255),m=z(tn.round(255*p(f*a/255,f,c*u/255,c)/h),0,255),z(tn.round(255*h),0,255)):m=s=o=0,d[n]=o,d[1+n]=s,d[2+n]=m,d[3+n]=h}})},T[n]={constructor:T,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,getLineDash:null,setLineDash:null,globalAlpha:null,globalCompositeOperation:null,scale:null,rotate:null,translate:null,transform:null,getTransform:null,setTransform:null,resetTransform:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,strokeRect:null,fillRect:null,stroke:null,fill:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,e){return C.createImageData(n,e)},strokeText:function(){F("Not Implemented!")},fillText:function(){F("Not Implemented!")},measureText:function(){F("Not Implemented!")}},((C.RenderingContext2D=T).CompositionMode={clear:function(n,e,t,r){return 0},copy:function(n,e,t,r){return t},xor:function(n,e,t,r){return t*(1-e)+n*(1-r)},"destination-out":function(n,e,t,r){return n*(1-r)},"destination-in":function(n,e,t,r){return n*r},"destination-atop":function(n,e,t,r){return t*(1-e)+n*r},"destination-over":function(n,e,t,r){return t*(1-e)+n},"source-out":function(n,e,t,r){return t*(1-e)},"source-in":function(n,e,t,r){return t*e},"source-atop":function(n,e,t,r){return t*e+n*(1-r)},"source-over":function(n,e,t,r){return t+n*(1-r)},multiply:function(n,e,t,r){return t*n+t*(1-e)+n*(1-r)},screen:function(n,e,t,r){return t+n-t*n},overlay:function(n,e,t,r){return 2*n<=e?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-2*n*t-e*r},darken:function(n,e,t,r){return tn.min(t*e,n*r)+t*(1-e)+n*(1-r)},lighten:function(n,e,t,r){return tn.max(t*e,n*r)+t*(1-e)+n*(1-r)},"color-dodge":function(n,e,t,r){return t===r&&0===n?t*(1-e):t===r?r*e+t*(1-e)+n*(1-r):r*e*tn.min(1,n/e*r/(r-t))+t*(1-e)+n*(1-r)},"color-burn":function(n,e,t,r){return 0===t&&n===e?r*e+n*(1-r):0===t?n*(1-r):r*e*(1-tn.min(1,(1-(e?n/e:0))*r/t))+t*(1-e)+n*(1-r)},"hard-light":function(n,e,t,r){return 2*t<=r?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-r*e-2*t*n},"soft-light":function(n,e,t,r){var u=e?n/e:0;return 2*t<=r?n*(r+(2*t-r)*(1-u))+t*(1-e)+n*(1-r):r<2*t&&4*n<=e?e*(2*t-r)*(16*tn.pow(u,3)-12*tn.pow(u,2)-3*u)+t-t*e+n:e*(2*t-r)*(tn.pow(u,.5)-u)+t-t*e+n},difference:function(n,e,t,r){return t+n-2*tn.min(t*e,n*r)},exclusion:function(n,e,t,r){return t*e+n*r-2*t*n+t*(1-e)+n*(1-r)}}).hardlight=T.CompositionMode["hard-light"],T.CompositionMode.softlight=T.CompositionMode["soft-light"],N[n]={constructor:N,_d:null,_sd:null,dispose:null,addPath:null,moveTo:null,lineTo:null,rect:null,roundRect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null},T.Path2D=N,P[n]={constructor:P,is2D:!0,m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1,a:null,b:null,c:null,d:null,e:null,f:null,clone:function(){var n=this;return new P(n.m11,n.m12,n.m13,n.m21,n.m22,n.m23)},mul:function(n){var e=this;if(n instanceof P)return new P(e.m11*n.m11+e.m12*n.m21,e.m11*n.m12+e.m12*n.m22,e.m11*n.m13+e.m12*n.m23+e.m13,e.m21*n.m11+e.m22*n.m21,e.m21*n.m12+e.m22*n.m22,e.m21*n.m13+e.m22*n.m23+e.m23)},inv:function(){var n=this,e=n.m11,t=n.m12,r=n.m13,u=n.m21,o=n.m22,n=n.m23,i=e*o-t*u;return sn(i,0)?null:new P(o=o/i,t=-t/i,-o*r-t*n,o=-u/i,t=e/i,-o*r-t*n)},transform:function(n,e){1===arguments.length&&(e=n[1],n=n[0]);var t=this;return[t.m11*n+t.m12*e+t.m13,t.m21*n+t.m22*e+t.m23]}},P.translate=function(n,e){return new P(1,0,n||0,0,1,e||0)},P.scale=function(n,e,t,r){return new P(n,0,-n*(t=t||0)+t,0,e,-e*(r=r||0)+r)},P.rotate=function(n,e,t){e=e||0,t=t||0;var r=tn.cos(n||0),n=tn.sin(n||0);return new P(r,-n,e-r*e+n*t,n,r,t-r*t-n*e)},P.EYE=function(){return new P(1,0,0,0,1,0)},T.Matrix2D=P,q[n]={constructor:q,v:0,params:null,valueOf:function(){return this.v}},C});