/**
*   Rasterizer
*   rasterize, stroke and fill lines, rectangles, curves and paths
*
*   @version 0.9.8
*   https://github.com/foo123/Rasterizer
*
**/
!function(e,n,t){"use strict";"object"==typeof module&&module.exports?module.exports=t.call(e):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return t.call(e)}):n in e||(e[n]=t.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[n]})}("undefined"!=typeof self?self:this,"Rasterizer",function(e){"use strict";var w=Object.defineProperty,n="prototype",on=Math,s=1/0,r=on.sqrt(2),C=isNaN,z=isFinite,m=on.PI,y=2*m,u=6,f=r,c=.5,t="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array;function P(n,e,t){if(!(this instanceof P))return new P(n,e,t);var r=new x(n,e,t);w(this,"width",{get:function(){return n},set:function(n){}}),w(this,"height",{get:function(){return e},set:function(n){}}),this.getContext=function(n){if("2d"===n)return r;k('Unsupported context "'+n+'"')}}function x(J,k,u){var o,t,i=this,l=P.getRGBAFrom([0,0,0,1]),a=P.getRGBAFrom([0,0,0,1]),f=null,S=1,r="butt",c="miter",s=10,m=1,e=[],h=0,p=R.EYE(),y=1,d="source-over",T=new q(p),g=function(){o={}},x=function(n){for(var e in o){var t=o[e],e=e.split(",");n(+e[0],+e[1],t)}},_=function(n,e,t){var r;0<=n&&n<J&&0<=e&&e<k&&0<t&&0<y&&(n=String(n)+","+String(e),e=o[n]||0,r=f?f[n]||0:1,e<(t*=S*y*r))&&(o[n]=t)},v=function(n,e,t){var r=l(n,e),o=3<r.length?r[3]:1;u(n,e,r[0],r[1],r[2],o*t,d)},b=function(n,e,t){var r=a(n,e),o=3<r.length?r[3]:1;u(n,e,r[0],r[1],r[2],o*t,d)};w(i,"strokeStyle",{get:function(){return""},set:function(n){l=P.getRGBAFrom(n)}}),w(i,"fillStyle",{get:function(){return""},set:function(n){a=P.getRGBAFrom(n)}}),w(i,"lineWidth",{get:function(){return m},set:function(n){!C(n=+n)&&z(n)&&0<=n&&(m=n)}}),w(i,"lineCap",{get:function(){return r},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square","round"].indexOf(n)&&(r=n)}}),w(i,"lineJoin",{get:function(){return c},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel","round"].indexOf(n)&&(c=n)}}),w(i,"miterLimit",{get:function(){return s},set:function(n){!C(n=+n)&&z(n)&&0<=n&&(s=n)}}),w(i,"lineDashOffset",{get:function(){return h},set:function(n){!C(n=+n)&&z(n)&&0<=n&&(h=n)}}),w(i,"lineDash",{get:function(){return e.slice()},set:function(n){1&(n=[].concat(n)).length&&(n=n.concat(n)),e=n}}),i.getLineDash=function(){return i.lineDash},i.setLineDash=function(n){i.lineDash=n},w(i,"globalAlpha",{get:function(){return y},set:function(n){!C(n=+n)&&0<=n&&n<=1&&(y=n)}}),w(i,"globalCompositeOperation",{get:function(){return d},set:function(n){d=String(n)}}),i.scale=function(n,e){T._t=p=p.mul(R.scale(n,e))},i.rotate=function(n){T._t=p=p.mul(R.rotate(n||0))},i.translate=function(n,e){T._t=p=p.mul(R.translate(n||0,e||0))},i.transform=function(n,e,t,r,o,u){T._t=p=p.mul(new R(n,t,o,e,r,u))},i.getTransform=function(){return p.clone()},i.setTransform=function(n,e,t,r,o,u){1<arguments.length?p=new R(n,t,o,e,r,u):n&&null!=n.a&&null!=n.f&&(p=new R(n.a,n.c,n.e,n.b,n.d,n.f)),T._t=p},i.resetTransform=function(){T._t=p=R.EYE()},i.beginPath=function(){T=new q(p)},i.closePath=function(){T.closePath()},i.moveTo=function(n,e){T.moveTo(n,e)},i.lineTo=function(n,e){T.lineTo(n,e)},i.rect=function(n,e,t,r){T.rect(n,e,t,r)},i.roundRect=function(n,e,t,r){T.roundRect.apply(T,arguments)},i.arc=function(n,e,t,r,o,u){T.arc(n,e,t,r,o,u)},i.ellipse=function(n,e,t,r,o,u,i,l){T.ellipse(n,e,t,r,o,u,i,l)},i.arcTo=function(n,e,t,r,o){T.arcTo(n,e,t,r,o)},i.quadraticCurveTo=function(n,e,t,r){T.quadraticCurveTo(n,e,t,r)},i.bezierCurveTo=function(n,e,t,r,o,u){T.bezierCurveTo(n,e,t,r,o,u)},i.strokeRect=function(n,e,t,r){0<m&&i.stroke(new q(p).rect(n,e,t,r))},i.fillRect=function(n,e,t,r){i.fill(new q(p).rect(n,e,t,r),"evenodd")},i.stroke=function(n){var e;0<m&&(e=S,m<1&&(S=m),g(),A(_,n=n||T,m,0,0,r,c,s,0,0,J-1,k-1),x(v),S=e)},t=function(n,e){var t=S,r=J-1,o=k-1,u=(A(_,n,S=.5,0,0,"butt","bevel",0,0,0,r,o),S=t,_),t=e,i=0,e=0,l=r,r=o,a=n._sd;if(a.length){var f,c,s,m,h,p,y,d,g,x,v,b,w,C,T=a.length,z=new Array(T),P=a.ymin,q=a.ymax,R=0,D="evenodd"===t;for(P=on.max(e,on.round(P)),q=on.min(r,on.round(q));P<=q;++P){for(;R<T&&a[R][3]<P;)++R;if(T<=R)break;if((s=a[R])[1]>P)P=on.floor(s[1]);else{for(x=s[0],v=s[2],h=s[1],p=s[3],g=pn(h,p)?(b=!1,d=on.min(x,v),on.max(x,v)):d=b=(v-x)*(P-h)/(p-h)+x,s[8]=b,s[9]=0,z[0]=s,f=R+(c=1);f<T&&a[f][1]<=P;++f)(s=a[f])[3]>=P&&(x=s[0],v=s[2],h=s[1],p=s[3],g=pn(h,p)?(b=!1,d=on.min(d,x,v),on.max(g,x,v)):(b=(v-x)*(P-h)/(p-h)+x,d=on.min(d,b),on.max(g,b)),s[8]=b,s[9]=0,z[c++]=s);if(m=N(z,c),!(c<m+2||(d=on.max(i,on.round(d+.5)),(g=on.min(l,on.round(g-.5)))<d)))if(D)for(y=d;y<=g;++y){for(C=w=!1,f=0;f<c;++f)(s=z[f])[9]||!1!==(b=s[8])&&(b<y&&(w=!w),y<b)&&(C=!C);w&&C&&u(y,P,1)}else for(y=d;y<=g;++y){for(f=C=w=0;f<c;++f)(s=z[f])[9]||!1!==(b=s[8])&&(b<y||y<b)&&(m=I(y,P,s[s[4]<0?2:0],s[s[4]<0?3:1],s[s[4]<0?0:2],s[s[4]<0?1:3]),b<y&&(w+=m),y<b)&&(C+=m);w&&C&&u(y,P,1)}}}}},i.fill=function(n,e){!arguments.length||null==n&&null==e?(n=T,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof q?e="nonzero":(e=n,n=T)),e=String(e||"nonzero").toLowerCase(),g(),t(n=n||T,e="evenodd"!==e?"nonzero":e),x(b)},i.clip=function(n,e){!arguments.length||null==n&&null==e?(n=T,e="nonzero"):1!==arguments.length&&null!=e||(n instanceof q?e="nonzero":(e=n,n=T)),"evenodd"!==(e=String(e||"nonzero").toLowerCase())&&(e="nonzero"),(n=n||T)===T&&(T=new q(p)),g(),t(n,e),f=o,o=null},i.isPointInStroke=function(n,e,t){arguments.length<3&&(t=e,e=n,n=T);var r,o,u,i,l,a,f,c=e||0,s=t||0,e=n||T,m=e._d,h=m.length;for(r=0;r<h;++r)if(u=m[r],0<(i=u.length-2))for(o=0;o<i;o+=2)if(l=+u[o],a=u[o+1],f=+u[o+2],hn((u[o+3]-a)*(c-l),(s-a)*(f-l),1e-4))return!0;return!1},i.isPointInPath=function(n,e,t,r){n instanceof q||(r=t,t=e,e=n,n=T),"evenodd"!==(r=String(r||"nonzero").toLowerCase())&&(r="nonzero");var o=e||0,u=t||0,e=r,i=(t=n||T)._sd;if(!(!i.length||u<i.ymin||u>i.ymax)){for(var l,a,f,c,s,m,h,p,y,d,g,x,v,b=i.length,w=new Array(b),C=0,t="evenodd"===e;C<b&&i[C][3]<u;)++C;if(!(b<=C||(f=i[C])[1]>u)){for(y=f[0],d=f[2],s=f[1],m=f[3],p=pn(s,m)?(g=!1,h=on.min(y,d),on.max(y,d)):h=g=(d-y)*(u-s)/(m-s)+y,f[8]=g,f[9]=0,w[0]=f,l=C+(a=1);l<b&&i[l][1]<=u;++l)(f=i[l])[3]>=u&&(y=f[0],d=f[2],s=f[1],m=f[3],p=pn(s,m)?(g=!1,h=on.min(h,y,d),on.max(p,y,d)):(g=(d-y)*(u-s)/(m-s)+y,h=on.min(h,g),on.max(p,g)),f[8]=g,f[9]=0,w[a++]=f);if(c=N(w,a),a<c+2)return!1!==w[0][8]&&hn(o,w[0][8]);if(!(p<h||o<h||p<o)){if(t)for(v=x=!1,l=0;l<a;++l)(f=w[l])[9]||!1!==(g=f[8])&&(g<=o&&(x=!x),o<=g)&&(v=!v);else for(l=v=x=0;l<a;++l)(f=w[l])[9]||!1!==(g=f[8])&&(g<o||o<g)&&(c=I(o,u,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),g<=o&&(x+=c),o<=g)&&(v+=c);if(x&&v)return!0}}}return!1}}function q(m){m=m||R.EYE();var h=this,p=!0,y=[],d=null;w(h,"_t",{get:function(){return m.clone()},set:function(n){m=n}}),w(h,"_d",{get:function(){return y},set:function(n){}}),w(h,"_sd",{get:function(){return d=d||E(y).sort(O)},set:function(n){}}),h.moveTo=function(n,e){n=v([n,e],m);return n&&(y.push(n),p=!1),h},h.closePath=function(){var n,e,t,r;return y.length&&2<y[y.length-1].length&&(n=+y[y.length-1][0],e=y[y.length-1][1],t=+y[y.length-1][y[y.length-1].length-2],r=y[y.length-1][y[y.length-1].length-1],hn(n,t,1e-6)&&hn(e,r,1e-6)||(y[y.length-1].push(n,e),y.push([n,e]),p=!1,d=null)),h},h.lineTo=function(n,e){n=v([n,e],m);return n&&(p?(y.push(n),p=!1):(y[y.length-1].push(n[0],n[1]),d=null)),h},h.rect=function(n,e,t,r){t=v([n,e,n+t,e,n+t,e+r,n,e+r],m);return t&&(t.push(t[0],t[1]),y.length&&y[y.length-1].length<=2?y[y.length-1]=t:y.push(t),y.push([t[0],t[1]]),t[0]=new g(+t[0],{lineCap:"butt",lineJoin:"miter"}),d=null,p=!1),h},h.roundRect=function(n,e,t,r){var o,u,i,l,a,f,c,s=v([n,e,t,r]);return s&&(((f=(arguments[4]&&arguments[4].push?arguments[4]:[].slice.call(arguments,4)).filter(function(n){return 0<n})).length<1||4<f.length)&&k("Invalid radii in roundRect"),4===f.length?(o=f[0],u=f[1],i=f[2],l=f[3]):3===f.length?(o=f[0],u=f[1],l=f[1],i=f[2]):l=2===f.length?(o=f[0],i=f[0],u=f[1],f[1]):(o=f[0],u=f[0],i=f[0],f[0]),t<0&&(n+=t,t=-t,c=o,o=u,u=c,c=l,l=i,i=c),r<0&&(e+=r,r=-r,c=o,o=l,l=c,c=u,u=i,i=c),(f=on.min(t/(o+u),r/(u+i),t/(i+l),r/(o+l)))<1&&(o*=f,u*=f,l*=f,i*=f),a=m.transform(0,0),c=function(n,e,t,r,o,u,i,l){e=m.transform(e,t),t=m.transform(r,o),r=m.transform(u,i),o=m.transform(l,0);n.push.apply(n,b(e[0],e[1],t[0],t[1],r[0],r[1],mn(o[0]-a[0],o[1]-a[1])))},(f=function(n,e,t){e=m.transform(e,t);n.push(e[0],e[1])})(s=[],n+o,e),f(s,n+t-u,e),c(s,n+t-u,e,n+t,e,n+t,e+u,u),f(s,n+t,e+r-i),c(s,n+t,e+r-i,n+t,e+r,n+t-i,e+r,i),f(s,n+l,e+r),c(s,n+l,e+r,n,e+r,n,e+r-l,l),f(s,n,e+o),c(s,n,e+o,n,e,n+o,e,o),s[0]=new g(+s[0],{lineCap:"butt",lineJoin:"bevel"}),y.push(s),y.push(m.transform(n,e)),d=null,p=!1),h},h.arc=function(n,e,t,r,o,u){var i=v([n,e,t,r,o]);return i&&(t<0&&k("Negative radius in arc"),(i=L(n,e,t,t,0,r,o,u,m))[0]=new g(+i[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),i[i.length-2]=new g(+i[i.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),p?(y.push(i),p=!1):y[y.length-1].push.apply(y[y.length-1],i),d=null),h},h.ellipse=function(n,e,t,r,o,u,i,l){var a=v([n,e,t,r,o,u,i]);return a&&((t<0||r<0)&&k("Negative radius in ellipse"),(a=L(n,e,t,r,o,u,i,l,m))[0]=new g(+a[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),a[a.length-2]=new g(+a[a.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),p?(y.push(a),p=!1):y[y.length-1].push.apply(y[y.length-1],a),d=null),h},h.arcTo=function(n,e,t,r,o){o<0&&k("Negative radius in arcTo");n=v([n,e,t,r],m);return n&&(p&&(y.push([n[0],n[1]]),p=!1),e=m.transform(0,0),t=m.transform(o,0),(n=b(+y[y.length-1][y[y.length-1].length-2],y[y.length-1][y[y.length-1].length-1],n[0],n[1],n[2],n[3],mn(t[0]-e[0],t[1]-e[1])))[0]=new g(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new g(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),y[y.length-1].push.apply(y[y.length-1],n),d=null),h},h.quadraticCurveTo=function(n,e,t,r){n=v([n,e,t,r],m);return n&&(p&&(y.push([n[0],n[1]]),p=!1),e=y[y.length-1].pop(),(n=i([+y[y.length-1].pop(),e,n[0],n[1],n[2],n[3]]))[0]=new g(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new g(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),y[y.length-1].push.apply(y[y.length-1],n),d=null),h},h.bezierCurveTo=function(n,e,t,r,o,u){n=v([n,e,t,r,o,u],m);return n&&(p&&(y.push([n[0],n[1]]),p=!1),e=y[y.length-1].pop(),(n=i([+y[y.length-1].pop(),e,n[0],n[1],n[2],n[3],n[4],n[5]]))[0]=new g(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new g(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),y[y.length-1].push.apply(y[y.length-1],n),d=null),h},h.addPath=function(n){return n instanceof q&&(y.push.apply(y,n._d),d=null),h},h.dispose=function(){d=y=null}}function R(n,e,t,r,o,u){var i=this;arguments.length&&(i.m11=n,i.m12=e,i.m13=t,i.m21=r,i.m22=o,i.m23=u),w(i,"a",{get:function(){return i.m11},set:function(n){i.m11=n}}),w(i,"c",{get:function(){return i.m12},set:function(n){i.m12=n}}),w(i,"e",{get:function(){return i.m13},set:function(n){i.m13=n}}),w(i,"b",{get:function(){return i.m21},set:function(n){i.m21=n}}),w(i,"d",{get:function(){return i.m22},set:function(n){i.m22=n}}),w(i,"f",{get:function(){return i.m23},set:function(n){i.m23=n}})}function g(n,e){this.value=n,this.params=e||null}function v(n,e){for(var t=0,r=n.length;t<r;++t)if(C(n[t])||!z(n[t]))return null;if(e)for(t=0;t<r;t+=2){var o=e.transform(n[t],n[t+1]);n[t]=o[0],n[t+1]=o[1]}return n}function S(E,n,e,N,O,t,M,B,F,G,U,Y){var r,o,u,i,l,j,W,V,X,a,f,H,c,K,s,m,h,p,y,d,g,x,v,b,w,C,T,z,P,Q,Z,$,q,R,D,J,k,S,_,A,I,L,nn=n.length,en=(e-1)/2,tn=M,rn=t;if(nn<6)un(E,o=n[0],u=n[1],i=n[2],l=n[3],a=on.abs(i-o),f=on.abs(l-u),(c=ln(e,a,f))[0],c[1],t,t,en,F,G,U,Y);else for(nn-=2,K=B*e/2,r=0;r<nn;r+=2)o=n[r],u=n[r+1],i=n[r+2],l=n[r+3],c=ln(e,a=on.abs(i-o),f=on.abs(l-u)),o.params&&o.params.lineCap&&(rn=!0===o.params.lineCap?t:o.params.lineCap),un(E,o,u,i,l,a,f,c[0],c[1],0===r?rn:null,nn===r+2?rn:null,en,F,G,U,Y),1<e&&0<r&&(o.params&&o.params.lineJoin&&(tn=!0===o.params.lineJoin?M:o.params.lineJoin),s=E,m=j,h=W,p=o,y=u,d=i,g=l,x=V,v=X,b=H[0],w=H[1],C=a,T=f,z=c[0],P=c[1],Q=tn,Z=en,$=K,q=F,R=G,D=U,J=Y,L=I=A=_=S=k=void 0,hn(v*C,T*x,1e-4)||(p<m&&d<p&&(L=m,m=d,d=L,L=h,h=g,g=L,L=x,x=C,C=L,L=v,v=T,T=L,L=b,b=z,z=L,L=w,w=P,P=L),w={x:m-(C=(x=p<m?-1:1)*b),y:h+(b=(T=y<h?-1:1)*w)},m={x:m+C,y:h-b},h={x:p-C,y:y+b},C={x:p+C,y:y-b},S={x:p-(z=(b=d<p?-1:1)*z),y:y+(P=(k=g<y?-1:1)*P)},_={x:p+z,y:y-P},A={x:d-z,y:g+P},d={x:d+z,y:g-P},z={x:p,y:y},g=x==b?T==k?pn(v,0)?(I=C,_):(I=h,S):(I=h,_):(I=C,S),"bevel"===Q?(sn(s,I.x,I.y,g.x,g.y,null,null,q,R,D,J),fn(s,z.x,z.y,I.x,I.y,g.x,g.y,q,R,D,J)):"round"===Q?(L=x==b?T==k?pn(v,0)?an(m.x,m.y,C.x,C.y,_.x,_.y,d.x,d.y):an(w.x,w.y,h.x,h.y,S.x,S.y,A.x,A.y):an(w.x,w.y,h.x,h.y,_.x,_.y,d.x,d.y):an(m.x,m.y,C.x,C.y,S.x,S.y,A.x,A.y),cn(s,I.x,I.y,g.x,g.y,L.x,L.y,Z,q,R,D,J)):"miter"===Q&&(L=x==b?T==k?pn(v,0)?an(m.x,m.y,C.x,C.y,_.x,_.y,d.x,d.y):an(w.x,w.y,h.x,h.y,S.x,S.y,A.x,A.y):an(w.x,w.y,h.x,h.y,_.x,_.y,d.x,d.y):an(m.x,m.y,C.x,C.y,S.x,S.y,A.x,A.y),P=mn(L.x-z.x,L.y-z.y),$<P?(sn(s,I.x,I.y,g.x,g.y,null,null,q,R,D,J),fn(s,z.x,z.y,I.x,I.y,g.x,g.y,q,R,D,J)):(sn(s,I.x,I.y,L.x,L.y,null,null,q,R,D,J),sn(s,g.x,g.y,L.x,L.y,null,null,q,R,D,J),fn(s,z.x,z.y,I.x,I.y,g.x,g.y,q,R,D,J),fn(s,L.x,L.y,I.x,I.y,g.x,g.y,q,R,D,J))))),j=o,W=u,V=a,X=f,H=c}function un(n,e,t,r,o,u,i,l,a,f,c,s,m,h,p,y){var d,g,x;0===l&&0===a?sn(n,e,t,r,o,u,i,m,h,p,y,!0,!0):(n=n,t=t,o=o,i=i,l=l,a=a,f=f,c=c,s=s,m=m,h=h,p=p,y=y,(r=r)<(e=e)&&(d=e,e=r,r=d,d=t,t=o,o=d,d=f,f=c,c=d),d=o<t?-1:1,pn(u=u,0)?("square"===f&&(t-=d*l),"square"===c&&(o+=d*l),"round"===f&&cn(n,e-l,t,e+l,t,e,t-d*l,l,m,h,p,y),"round"===c&&cn(n,r-l,o,r+l,o,r,o+d*l,l,m,h,p,y),D(n,on.round(e-l),on.round(t),on.round(e+l),on.round(o),m,h,p,y)):pn(i,0)?("square"===f&&(e-=+a),"square"===c&&(r+=+a),"round"===f&&cn(n,e,t-a,e,t+a,e-a,t,a,m,h,p,y),"round"===c&&cn(n,r,o-a,r,o+a,r+a,o,a,m,h,p,y),D(n,on.round(e),on.round(t-a),on.round(r),on.round(t+a),m,h,p,y)):("square"===f&&(e-=+a,t-=d*l),"square"===c&&(r+=+a,o+=d*l),i=r-(u=+l),a=o+(l=d*a),r=r+u,o=o-l,sn(n,g=e-u,x=t+l,e=e+u,u=t-l,null,null,m,h,p,y),sn(n,e,u,r,o,null,null,m,h,p,y),sn(n,r,o,i,a,null,null,m,h,p,y),sn(n,i,a,g,x,null,null,m,h,p,y),fn(n,g,x,e,u,i,a,m,h,p,y),fn(n,e,u,i,a,r,o,m,h,p,y),"round"===f&&cn(n,g,x,e,u,(g+e)/2,on[d<0?"max":"min"](x,u),s,m,h,p,y),"round"===c&&cn(n,r,o,i,a,(i+r)/2,on[d<0?"min":"max"](a,o),s,m,h,p,y)))}function ln(n,e,t){return n<=1?[0,0]:pn(e,0)?[(n-1)/2,0]:pn(t,0)?[0,(n-1)/2]:[t*(n=(n-1)/2)/(t=mn(e,t)),e*n/t]}function an(n,e,t,r,o,u,i,l){var a=r-e,f=n-t,t=t*e-n*r,e=l-u,n=o-i,r=i*u-o*l,i=a*n-f*e;return!pn(i,0)&&{x:(f*r-t*n)/i,y:(t*e-a*r)/i}}function D(n,e,t,r,o,u,i,l,a){var f,c;if(r<e&&(f=e,e=r,r=f),o<t&&(c=t,t=o,o=c),null!=u){if(r<u||l<e||o<i||a<t)return;e=on.max(e,u),t=on.max(t,i),r=on.min(r,l),o=on.min(o,a)}if(t===o)for(f=e;f<=r;++f)n(f,t,1);else if(e===r)for(c=t;c<=o;++c)n(e,c,1);else for(c=t;c<=o;++c)for(f=e;f<=r;++f)n(f,c,1)}function fn(n,e,t,r,o,u,i,l,a,f,c){var s,m,h,p,y,d,g,x,v,b,w,C,T,z,P=null!=l;if(!P||!(on.max(e,r,u)<l||on.min(e,r,u)>f||on.max(t,o,i)<a||on.min(t,o,i)>c)){if(o<t&&(h=t,t=o,o=h,h=e,e=r,r=h),i<t&&(h=t,t=i,i=h,h=e,e=u,u=h),i<o&&(h=o,o=i,i=h,h=r,r=u,u=h),pn(b=i-t,0))return p=on.round(t),D(n,s=on.round(on.min(e,r,u)),p,m=on.round(on.max(e,r,u)),p,l,a,f,c);for(C=i-o,g=u-e,x=r-e,v=u-r,T=pn(w=o-t,0),z=pn(C,0),p=on.round(t+.5),y=o,d=on.round(i-.5),P&&(p=on.max(a,p),d=on.min(c,d));p<=d;++p)if(m=p<y?T?(s=e,r):(s=g*(p-t)/b+e,x*(p-t)/w+e):z?(s=r,u):(s=g*(p-t)/b+e,v*(p-o)/C+r),on.abs(m-s)<1)(!P||l<=s&&s<=f)&&n(on.round(s),p,1);else for(m<s&&(h=s,s=m,m=h),s=on.round(s+.5),m=on.round(m-.5),P&&(s=on.max(l,s),m=on.min(f,m));s<=m;++s)n(s,p,1)}}function cn(n,e,t,r,o,u,i,l,a,f,c,s){var m,h,p,y,d,g,x,v,b,w,C,T,z,P,q,R,D,J,k,S,_=on.round(on.min(t,o,i)),A=on.round(on.max(t,o,i)),I=null!=a;if(I&&(_=on.max(_,f),A=on.min(A,s)),!(A<_)){for(o<t&&(z=t,t=o,o=z,z=e,e=r,r=z),pn(o-t,0),z=u,P=i,D=r,J=o,k=(D-=q=e)*(z-=q)+(J-=R=t)*(P-=R),S=mn(D,J),mn(z,P),P=mn(u-(v=[q+(z=k/S)*D/S,R+z*J/S])[0],i-v[1]),C=(v=L(u+l*(v[0]-u)/P,i+l*(v[1]-i)/P,l,l,0,q=on.atan2(t,e),on.atan2(o,r),q<on.atan2(i,u))).length-2,b=0;b<C;b+=2)sn(n,v[b],v[b+1],v[b+2],v[b+3],null,null,a,f,c,s);for(b=0,C=(v=E([v,[r,o,e,t]]).sort(O)).length;_<=A;++_){for(;b<C&&v[b][3]<_;)++b;if(C<=b)break;if((T=v[b])[1]>_)_=on.floor(T[1]);else{for(y=T[0],d=T[2],p=pn(g=T[1],x=T[3])?(h=on.min(y,d),on.max(y,d)):h=m=(d-y)*(_-g)/(x-g)+y,T[9]=0,w=b+1;w<C&&v[w][1]<=_;++w)(T=v[w])[3]>=_&&(y=T[0],d=T[2],p=pn(g=T[1],x=T[3])?(h=on.min(h,y,d),on.max(p,y,d)):(h=on.min(h,m=(d-y)*(_-g)/(x-g)+y),on.max(p,m)),T[9]=0);for(h=on.round(h+.5),p=on.round(p-.5),I&&(h=on.max(h,a),p=on.min(p,c));h<=p;++h)n(h,_,1)}}}}function sn(n,e,t,r,o,u,i,l,a,f,c,s,m){var h=on.min(e,r),p=on.max(e,r),y=on.min(t,o),d=on.max(t,o);if(!(p<l||f<h||d<a||c<y)){if(null==u&&(u=on.abs(r-e),i=on.abs(o-t)),h<l||f<p||y<a||c<d){h=function(n,e,t,r,o,u,i,l){var a=-(t=-(t-n)),f=-(r=-(r-e)),o=n-o,i=i-n,u=e-u,l=l-e,c=1,s=0;if(!(0==t&&o<0||0==a&&i<0||0==r&&u<0||0==f&&l<0||(0!=t&&(o=o/t,i=i/a,t<0?(s<o&&(s=o),i<c&&(c=i)):(s<i&&(s=i),o<c&&(c=o))),0!=r&&(t=u/r,i=l/f,r<0?(s<t&&(s=t),i<c&&(c=i)):(s<i&&(s=i),t<c&&(c=t))),c<s)))return[n+a*s,e+f*s,n+a*c,e+f*c]}(e,t,r,o,l,a,f,c);if(!h)return;e=h[0],t=h[1],r=h[2],o=h[3]}if(pn(u,0)||pn(i,0))return D(n,on.round(e),on.round(t),on.round(r),on.round(o));var g,x,v,b,w=0,C=0,T=0,p=u<i;if(p&&(g=e,e=t,t=g,g=r,r=o,o=g,g=u,u=i,i=g),r<e&&(g=e,e=r,r=g,x=t,t=o,o=x),d=t+(b=(o<t?-1:1)*i/u)*((y=on.round(e))-e),l=s?1:1-(e+.5-on.floor(e+.5)),a=y,T=1-(C=d-(f=on.floor(d))),p?(n(f,a,T*l),n(f+1,a,C*l)):(n(a,f,T*l),n(a,f+1,C*l)),w=d+b,d=o+b*((y=on.round(r))-r),l=m?1:r+.5-on.floor(r+.5),v=y,T=1-(C=d-(c=on.floor(d))),p?(n(c,v,T*l),n(c+1,v,C*l)):(n(v,c,T*l),n(v,c+1,C*l)),p)for(g=a+1;g<v;++g)0<(T=1-(C=w-(x=on.floor(w))))&&n(x,g,T),0<C&&n(x+1,g,C),w+=b;else for(g=a+1;g<v;++g)0<(T=1-(C=w-(x=on.floor(w))))&&n(g,x,T),0<C&&n(g,x+1,C),w+=b}}function L(r,o,u,i,n,l,e,t,a){f=e,t=t,c=J(s=l),f+=c-s,!t&&y<=f-c?f=c+y:t&&y<=c-f?f=c-y:!t&&f<c?f=c+(y-J(c-f)):t&&c<f&&(f=c-(y-J(f-c)));var f,c,s=[c,f],m=(l=s[0],e=s[1],n?on.cos(n):1),h=n?on.sin(n):0,p=e-l;return d(function(n){var n=l+n*p,e=u*on.cos(n),n=i*on.sin(n),t=r+m*e-h*n,e=o+h*e+m*n;return a?a.transform(t,e):[t,e]})}function b(n,e,t,r,o,u,i,l){var a=[],n=function(n,e,t,r,o,u,i){if(hn(t,n)&&hn(r,e)||hn(t,o)&&hn(r,u)||hn(i,0))return[t,r];var l,a,f,c=!1;if(o={x:o-t,y:u-r},a=mn((u={x:n-t,y:e-r}).x,u.y),f=mn(o.x,o.y),pn(l=(u.x*o.x+u.y*o.y)/(a*f),-1))return[t,r];if(pn(l,1))return[n+(n=65535/a)*u.x,e+n*u.y];e=i/on.tan(on.acos(l)/2),l={x:t+(n=e/a)*u.x,y:r+n*u.y},n=mn((a={x:u.y,y:-u.x}).x,a.y),u=i/n,(a.x*o.x+a.y*o.y)/(n*f)<0&&(a={x:-a.x,y:-a.y});u={x:l.x+u*a.x,y:l.y+u*a.y},a={x:-a.x,y:-a.y},n=on.acos(a.x/n),a.y<0&&(n=y-n);f=mn((e={x:(t={x:t+(a=e/f)*o.x,y:r+a*o.y}).x-u.x,y:t.y-u.y}).x,e.y),r=on.acos(e.x/f),e.y<0&&(r=y-r);r<n&&n-r<m&&(c=!0);n<r&&m<r-n&&(c=!0);return[l.x,l.y,u.x,u.y,n,r,!(!c||hn(y,i))]}(n,e,t,r,o,u,i);return n&&2<=n.length&&(a.push(n[0],n[1]),2<n.length)&&a.push.apply(a,L(n[2],n[3],i,i,0,n[4],n[5],n[6],l)),a}function i(i){return d(6<i.length?function(n){var e=1-n,t=n*n,r=e*e,o=r*e,u=t*n,r=3*r*n,n=3*t*e;return[o*i[0]+r*i[2]+n*i[4]+u*i[6],o*i[1]+r*i[3]+n*i[5]+u*i[7]]}:function(n){var e=1-n,t=e*e,e=2*e*n,n=n*n;return[t*i[0]+e*i[2]+n*i[4],t*i[1]+e*i[3]+n*i[5]]})}function A(n,e,t,r,o,u,i,l,a,f,c,s){for(var m,h=0,p=e._d,y=p.length;h<y;++h)(m=p[h])&&2<m.length&&S(n,m,t,0,0,u,i,l,a,f,c,s)}function mn(n,e){n=on.abs(n),e=on.abs(e);var t=0;return pn(n,0)?e:pn(e,0)?n:e<n?n*on.sqrt(1+(t=e/n)*t):n<e?e*on.sqrt(1+(t=n/e)*t):n*r}function I(n,e,t,r,o,u){return(n-t)*(u-r)-(o-t)*(e-r)<0?-1:1}function h(n,e,t,r,o,u){var o=o-t,u=u-r,i=mn(o,u);return pn(i,0)?mn(n-t,e-r):on.abs(o*(r-e)-u*(t-n))/i}function E(n){if(!n)return[];for(var e,t,r,o=[],u=n.length,i=s,l=-s,a=0,f=0,c=0;c<u;++c)if((r=n[c])&&!((e=r.length-2)<=0)){for(++a,f=1,t=0;t<e;t+=2)r[t].params&&r[t].params.type&&(++a,f=1),i=on.min(i,r[t+1]),l=on.max(l,r[t+1]),r[t+1]>r[t+3]?o.push([+r[t+2],r[t+3],+r[t],r[t+1],-1,a,f,0,0,0]):o.push([+r[t],r[t+1],+r[t+2],r[t+3],1,a,f,0,0,0]),++f;i=on.min(i,r[1+e]),l=on.max(l,r[1+e])}return o.ymin=i,o.ymax=l,o}function N(n,e){for(var t,r,o,u=0,i=0;i<e;++i)if(!(r=n[i])[9])for(t=i+1;t<e;++t)(o=n[t])[9]||r[4]!==o[4]||r[5]!==o[5]||1<on.abs(r[6]-o[6])||(hn(r[0],o[0],1e-5)&&hn(r[1],o[1],1e-5)&&hn(r[2],o[2],1e-5)&&hn(r[3],o[3],1e-5)||hn(r[3],o[1],1e-6)||hn(r[1],o[3],1e-6))&&(o[9]=1,++u);return u}function d(n){var e,t=[],r=u,o=n(0);for(t.push(o[0],o[1]),e=0;e<r;++e)o=function n(e,t,r,o,u,i){if(o<=r||hn(r,o,1e-6))return u;u=u||t(r);i=i||t(o);var l,a=mn(i[0]-u[0],i[1]-u[1]);if(a<=f){if(a<1)return u;e.push(i[0],i[1])}else h((l=t(a=(r+o)/2))[0],l[1],u[0],u[1],i[0],i[1])<=c?e.push(i[0],i[1]):(n(e,t,r,a,u,l),n(e,t,a,o,l,i));return i}(t,n,0===e?0:e/r,r===e+1?1:(e+1)/r,o,null);return t}function hn(n,e,t){return on.abs(n-e)<(t||1e-6)}function pn(n,e){return on.abs(n-e)<Number.EPSILON}function T(n,e,t){return on.min(on.max(n,e),t)}function J(n){return n=n,t=0,r=e=y,(n-=e*on.floor(n/e))<t&&(n+=e),r<n&&(n-=e),n;var e,t,r}function O(n,e){var t=n[1]-e[1];return hn(t,0)?n[3]-e[3]:t}function k(n){throw new Error(n)}return P.VERSION="0.9.8",P[n]={constructor:P,width:null,height:null,getContext:null},P.createImageData=function(n,e){return{data:new t(n*e<<2),width:n,height:e}},P.getRGBAFrom=function(t){var r;return"function"==typeof t?function(n,e){n=t(n,e);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:(r=[t[0],t[1],t[2],3<t.length?t[3]:1],function(n,e){return r})},P.setRGBATo=function(n){var y,d,g;return"function"==typeof n?n:(y=n.width,d=n.height,g=n.data,function(n,e,t,r,o,u,i){if(0<=n&&n<y&&0<=e&&e<d){var n=n+y*e<<2,e=g[n],l=g[1+n],a=g[2+n],f=g[3+n]/255,c=u,u=0,s=0,m=0,h=0,p=(p=x.CompositionMode[i=i||"source-over"])||x.CompositionMode[i="source-over"];switch(i){case"clear":case"copy":case"xor":case"destination-out":case"destination-in":case"destination-atop":case"destination-over":case"source-out":case"source-in":case"source-atop":case"source-over":h=p(f,f,c,c);break;default:h=c+f-c*f}h=0<h?(u=T(on.round(255*p(f*e/255,f,c*t/255,c)/h),0,255),s=T(on.round(255*p(f*l/255,f,c*r/255,c)/h),0,255),m=T(on.round(255*p(f*a/255,f,c*o/255,c)/h),0,255),T(on.round(255*h),0,255)):m=s=u=0,g[n]=u,g[1+n]=s,g[2+n]=m,g[3+n]=h}})},x[n]={constructor:x,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,getLineDash:null,setLineDash:null,globalAlpha:null,globalCompositeOperation:null,scale:null,rotate:null,translate:null,transform:null,getTransform:null,setTransform:null,resetTransform:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,strokeRect:null,fillRect:null,stroke:null,fill:null,clip:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,e){return P.createImageData(n,e)},strokeText:function(){k("Not Implemented!")},fillText:function(){k("Not Implemented!")},measureText:function(){k("Not Implemented!")}},((P.RenderingContext2D=x).CompositionMode={clear:function(n,e,t,r){return 0},copy:function(n,e,t,r){return t},xor:function(n,e,t,r){return t*(1-e)+n*(1-r)},"destination-out":function(n,e,t,r){return n*(1-r)},"destination-in":function(n,e,t,r){return n*r},"destination-atop":function(n,e,t,r){return t*(1-e)+n*r},"destination-over":function(n,e,t,r){return t*(1-e)+n},"source-out":function(n,e,t,r){return t*(1-e)},"source-in":function(n,e,t,r){return t*e},"source-atop":function(n,e,t,r){return t*e+n*(1-r)},"source-over":function(n,e,t,r){return t+n*(1-r)},multiply:function(n,e,t,r){return t*n+t*(1-e)+n*(1-r)},screen:function(n,e,t,r){return t+n-t*n},overlay:function(n,e,t,r){return 2*n<=e?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-2*n*t-e*r},darken:function(n,e,t,r){return on.min(t*e,n*r)+t*(1-e)+n*(1-r)},lighten:function(n,e,t,r){return on.max(t*e,n*r)+t*(1-e)+n*(1-r)},"color-dodge":function(n,e,t,r){return t===r&&0===n?t*(1-e):t===r?r*e+t*(1-e)+n*(1-r):r*e*on.min(1,n/e*r/(r-t))+t*(1-e)+n*(1-r)},"color-burn":function(n,e,t,r){return 0===t&&n===e?r*e+n*(1-r):0===t?n*(1-r):r*e*(1-on.min(1,(1-(e?n/e:0))*r/t))+t*(1-e)+n*(1-r)},"hard-light":function(n,e,t,r){return 2*t<=r?2*t*n+t*(1-e)+n*(1-r):t*(1+e)+n*(1+r)-r*e-2*t*n},"soft-light":function(n,e,t,r){var o=e?n/e:0;return 2*t<=r?n*(r+(2*t-r)*(1-o))+t*(1-e)+n*(1-r):r<2*t&&4*n<=e?e*(2*t-r)*(16*on.pow(o,3)-12*on.pow(o,2)-3*o)+t-t*e+n:e*(2*t-r)*(on.pow(o,.5)-o)+t-t*e+n},difference:function(n,e,t,r){return t+n-2*on.min(t*e,n*r)},exclusion:function(n,e,t,r){return t*e+n*r-2*t*n+t*(1-e)+n*(1-r)}}).hardlight=x.CompositionMode["hard-light"],x.CompositionMode.softlight=x.CompositionMode["soft-light"],q[n]={constructor:q,_d:null,_sd:null,dispose:null,addPath:null,moveTo:null,lineTo:null,rect:null,roundRect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null},x.Path2D=q,R[n]={constructor:R,is2D:!0,m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1,a:null,b:null,c:null,d:null,e:null,f:null,clone:function(){var n=this;return new R(n.m11,n.m12,n.m13,n.m21,n.m22,n.m23)},mul:function(n){var e=this;if(n instanceof R)return new R(e.m11*n.m11+e.m12*n.m21,e.m11*n.m12+e.m12*n.m22,e.m11*n.m13+e.m12*n.m23+e.m13,e.m21*n.m11+e.m22*n.m21,e.m21*n.m12+e.m22*n.m22,e.m21*n.m13+e.m22*n.m23+e.m23)},inv:function(){var n=this,e=n.m11,t=n.m12,r=n.m13,o=n.m21,u=n.m22,n=n.m23,i=e*u-t*o;return pn(i,0)?null:new R(u=u/i,t=-t/i,-u*r-t*n,u=-o/i,t=e/i,-u*r-t*n)},transform:function(n,e){1===arguments.length&&(e=n[1],n=n[0]);var t=this;return[t.m11*n+t.m12*e+t.m13,t.m21*n+t.m22*e+t.m23]}},R.translate=function(n,e){return new R(1,0,n||0,0,1,e||0)},R.scale=function(n,e,t,r){return new R(n,0,-n*(t=t||0)+t,0,e,-e*(r=r||0)+r)},R.rotate=function(n,e,t){e=e||0,t=t||0;var r=on.cos(n||0),n=on.sin(n||0);return new R(r,-n,e-r*e+n*t,n,r,t-r*t-n*e)},R.skewX=function(n){return new R(1,n||0,0,0,1,0)},R.skewY=function(n){return new R(1,0,0,n||0,1,0)},R.EYE=function(){return new R(1,0,0,0,1,0)},x.Matrix2D=R,g[n]={constructor:g,value:0,params:null,valueOf:function(){return this.value}},P});