/**
*   Rasterizer
*   rasterize, stroke and fill lines, rectangles, curves and paths
*
*   @version 0.9.91
*   https://github.com/foo123/Rasterizer
*
**/
!function(t,n,e){"use strict";"object"==typeof module&&module.exports?module.exports=e.call(t):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return e.call(t)}):n in t||(t[n]=e.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[n]})}("undefined"!=typeof self?self:this,"Rasterizer",function(i){"use strict";var R=Object.defineProperty,n="prototype",sn=Math,O=1/0,r=sn.sqrt(2),q=isNaN,z=isFinite,c=sn.PI,b=2*c,u=6,s=r,m=.5,P="undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:"undefined"!=typeof Uint8Array?Uint8Array:Array,J=[0,0,0,0],e=/[MLHVCSQTAZ]/gi,I=/-?(?:(?:\d+\.\d+)|(?:\.\d+)|(?:\d+))/g;function L(n,t,e,r){var i;if(!(this instanceof L))return new L(n,t,e,r);r=r||(e&&e.$target?L.getRGBAFrom(e.$target):function(n,t){return J}),i=new E(n,t,e,r),R(this,"width",{get:function(){return n},set:function(n){}}),R(this,"height",{get:function(){return t},set:function(n){}}),this.getContext=function(n){if("2d"===n)return i;B('Unsupported context "'+n+'"')}}function E(D,S,g,h){var u,o,t,e,p,y,r,i,l,a,f,s,c,m,d,T,x=this,v=null,b=null,w=function(){v={}},C=function(n){for(var t in v){var e=v[t],t=t.split(",");n(+t[0],+t[1],e)}v=null},A=function(n,t,e){var r;0<=n&&n<D&&0<=t&&t<S&&0<e&&0<m&&(n=String(n)+","+String(t),t=v[n]||0,r=b?b[n]||0:1,t<(e*=m*r))&&(v[n]=e)},k=function(n,t,e){var r="clear"===d?J:u(n,t),i=3<r.length?r[3]:1;g(n,t,r[0],r[1],r[2],i*e,d)},I=function(n,t,e){var r="clear"===d?J:o(n,t),i=3<r.length?r[3]:1;g(n,t,r[0],r[1],r[2],i*e,d)},n=function(n){u=L.getRGBAFrom([0,0,0,1]),o=L.getRGBAFrom([0,0,0,1]),b=v=null,r="butt",i="miter",l=10,a=1,f=[],s=0,c=M.EYE(),m=1,d="source-over",t=[],T=new G(c),n||x.clearRect(0,0,D,S)};R(x,"strokeStyle",{get:function(){return""},set:function(n){u=L.getRGBAFrom(n)}}),R(x,"fillStyle",{get:function(){return""},set:function(n){o=L.getRGBAFrom(n)}}),R(x,"lineWidth",{get:function(){return a},set:function(n){!q(n=+n)&&z(n)&&0<=n&&(a=n)}}),R(x,"lineCap",{get:function(){return r},set:function(n){n=String(n).toLowerCase(),-1!==["butt","square","round"].indexOf(n)&&(r=n)}}),R(x,"lineJoin",{get:function(){return i},set:function(n){n=String(n).toLowerCase(),-1!==["miter","bevel","round"].indexOf(n)&&(i=n)}}),R(x,"miterLimit",{get:function(){return l},set:function(n){!q(n=+n)&&z(n)&&0<=n&&(l=n)}}),R(x,"lineDashOffset",{get:function(){return s},set:function(n){!q(n=+n)&&z(n)&&0<=n&&(s=n)}}),R(x,"lineDash",{get:function(){return f.slice()},set:function(n){1&(n=[].concat(n)).length&&(n=n.concat(n)),f=n}}),x.getLineDash=function(){return x.lineDash},x.setLineDash=function(n){x.lineDash=n},R(x,"globalAlpha",{get:function(){return m},set:function(n){!q(n=+n)&&0<=n&&n<=1&&(m=n)}}),R(x,"globalCompositeOperation",{get:function(){return d},set:function(n){d=String(n)}}),x.save=function(){(t=t||[]).push([u,o,b,r,i,l,a,f,s,c,m,d])},x.restore=function(){var n;t&&t.length&&(n=t.pop(),u=n[0],o=n[1],b=n[2],r=n[3],i=n[4],l=n[5],a=n[6],f=n[7],s=n[8],T.transform=c=n[9],m=n[10],d=n[11])},x.reset=function(){n()},x.scale=function(n,t){T.transform=c=c.mul(M.scale(n,t))},x.rotate=function(n){T.transform=c=c.mul(M.rotate(n||0))},x.translate=function(n,t){T.transform=c=c.mul(M.translate(n||0,t||0))},x.transform=function(n,t,e,r,i,u){T.transform=c=c.mul(new M(n,e,i,t,r,u))},x.getTransform=function(){return c.clone()},x.setTransform=function(n,t,e,r,i,u){1<arguments.length?c=new M(n,e,i,t,r,u):n&&null!=n.a&&null!=n.f&&(c=new M(n.a,n.c,n.e,n.b,n.d,n.f)),T.transform=c},x.resetTransform=function(){T.transform=c=M.EYE()},x.beginPath=function(){T=new G(c)},x.closePath=function(){T.closePath()},x.moveTo=function(n,t){T.moveTo(n,t)},x.lineTo=function(n,t){T.lineTo(n,t)},x.rect=function(n,t,e,r){T.rect(n,t,e,r)},x.roundRect=function(n,t,e,r){T.roundRect.apply(T,arguments)},x.arc=function(n,t,e,r,i,u){T.arc(n,t,e,r,i,u)},x.ellipse=function(n,t,e,r,i,u,o,l){T.ellipse(n,t,e,r,i,u,o,l)},x.arcTo=function(n,t,e,r,i){T.arcTo(n,t,e,r,i)},x.quadraticCurveTo=function(n,t,e,r){T.quadraticCurveTo(n,t,e,r)},x.bezierCurveTo=function(n,t,e,r,i,u){T.bezierCurveTo(n,t,e,r,i,u)},x.clearRect=function(n,t,e,r){var i=d,u=m;d="clear",m=1,x.fill(new G(c).rect(n,t,e,r),"evenodd"),d=i,m=u},x.strokeRect=function(n,t,e,r){0<a&&x.stroke(new G(c).rect(n,t,e,r))},x.fillRect=function(n,t,e,r){x.fill(new G(c).rect(n,t,e,r),"evenodd")},x.stroke=function(n){var t,e;0<a&&(e=(n=n||T).transform,t=sn.abs(e.sx),e=sn.abs(e.sy),w(),Y(A,n,a,0,0,r,i,l,t,e,0,0,D-1,S-1),C(k))},e=function(n,t){var e=D-1,r=S-1,i=(Y(A,n,.5,0,0,"butt","bevel",0,1,1,0,0,e,r),A),u=0,o=0,l=e,e=r,a=n._sd;if(a.length){var f,s,c,m,h,d,g,p,y,x,v,b,w,C,T=a.length,k=new Array(T),I=a.ymin,R=a.ymax,q=0,z="evenodd"===t;for(I=sn.max(o,sn.round(I)),R=sn.min(e,sn.round(R));I<=R;++I){for(;q<T&&a[q][3]<I;)++q;if(T<=q)break;if((c=a[q])[1]>I)I=sn.floor(c[1]);else{for(x=c[0],v=c[2],h=c[1],d=c[3],y=xn(h,d)?(b=!1,p=sn.min(x,v),sn.max(x,v)):p=b=(v-x)*(I-h)/(d-h)+x,c[8]=b,c[9]=0,k[0]=c,f=q+(s=1);f<T&&a[f][1]<=I;++f)(c=a[f])[3]>=I&&(x=c[0],v=c[2],h=c[1],d=c[3],y=xn(h,d)?(b=!1,p=sn.min(p,x,v),sn.max(y,x,v)):(b=(v-x)*(I-h)/(d-h)+x,p=sn.min(p,b),sn.max(y,b)),c[8]=b,c[9]=0,k[s++]=c);if(m=Q(k,s),!(s<m+2||(p=sn.max(u,sn.round(p+.5)),(y=sn.min(l,sn.round(y-.5)))<p)))if(z)for(g=p;g<=y;++g){for(C=w=!1,f=0;f<s;++f)(c=k[f])[9]||!1!==(b=c[8])&&(b<g&&(w=!w),g<b)&&(C=!C);w&&C&&i(g,I,1)}else for(g=p;g<=y;++g){for(f=C=w=0;f<s;++f)(c=k[f])[9]||!1!==(b=c[8])&&(b<g||g<b)&&(m=V(g,I,c[c[4]<0?2:0],c[c[4]<0?3:1],c[c[4]<0?0:2],c[c[4]<0?1:3]),b<g&&(w+=m),g<b)&&(C+=m);w&&C&&i(g,I,1)}}}}},x.fill=function(n,t){!arguments.length||null==n&&null==t?(n=T,t="nonzero"):1!==arguments.length&&null!=t||(n instanceof G?t="nonzero":(t=n,n=T)),t=String(t||"nonzero").toLowerCase(),w(),e(n=n||T,t="evenodd"!==t?"nonzero":t),C(I)},x.clip=function(n,t){!arguments.length||null==n&&null==t?(n=T,t="nonzero"):1!==arguments.length&&null!=t||(n instanceof G?t="nonzero":(t=n,n=T)),"evenodd"!==(t=String(t||"nonzero").toLowerCase())&&(t="nonzero"),(n=n||T)===T&&(T=new G(c)),w(),e(n,t),b=v,v=null},x.isPointInStroke=function(n,t,e){arguments.length<3&&(e=t,t=n,n=T);var r,i,u,o,l,a,f,s=t||0,c=e||0,t=n||T,m=t._d,h=m.length;for(r=0;r<h;++r)if(u=m[r],0<(o=u.length-2))for(i=0;i<o;i+=2)if(l=+u[i],a=u[i+1],f=+u[i+2],yn((u[i+3]-a)*(s-l),(c-a)*(f-l),1e-4))return!0;return!1},x.isPointInPath=function(n,t,e,r){n instanceof G||(r=e,e=t,t=n,n=T),"evenodd"!==(r=String(r||"nonzero").toLowerCase())&&(r="nonzero");var i=t||0,u=e||0,t=r,o=(e=n||T)._sd;if(!(!o.length||u<o.ymin||u>o.ymax)){for(var l,a,f,s,c,m,h,d,g,p,y,x,v,b=o.length,w=new Array(b),C=0,e="evenodd"===t;C<b&&o[C][3]<u;)++C;if(!(b<=C||(f=o[C])[1]>u)){for(g=f[0],p=f[2],c=f[1],m=f[3],d=xn(c,m)?(y=!1,h=sn.min(g,p),sn.max(g,p)):h=y=(p-g)*(u-c)/(m-c)+g,f[8]=y,f[9]=0,w[0]=f,l=C+(a=1);l<b&&o[l][1]<=u;++l)(f=o[l])[3]>=u&&(g=f[0],p=f[2],c=f[1],m=f[3],d=xn(c,m)?(y=!1,h=sn.min(h,g,p),sn.max(d,g,p)):(y=(p-g)*(u-c)/(m-c)+g,h=sn.min(h,y),sn.max(d,y)),f[8]=y,f[9]=0,w[a++]=f);if(s=Q(w,a),a<s+2)return!1!==w[0][8]&&yn(i,w[0][8]);if(!(d<h||i<h||d<i)){if(e)for(v=x=!1,l=0;l<a;++l)(f=w[l])[9]||!1!==(y=f[8])&&(y<=i&&(x=!x),i<=y)&&(v=!v);else for(l=v=x=0;l<a;++l)(f=w[l])[9]||!1!==(y=f[8])&&(y<i||i<y)&&(s=V(i,u,f[f[4]<0?2:0],f[f[4]<0?3:1],f[f[4]<0?0:2],f[f[4]<0?1:3]),y<=i&&(x+=s),i<=y)&&(v+=s);if(x&&v)return!0}}}return!1},p=function(n,t,e,r,i,u,o){if(r=sn.min(r,t-1),i=sn.min(i,e-1),u=sn.min(u,t-1),o=sn.min(o,e-1),u<r||o<i)return new P(0);var l,a,f,s,c,m=new P((u-r+1)*(o-i+1)<<2);if(n)for(a=r,f=i,s=0;f<=o;s+=4,++a)u<a&&(a=r,++f),m[s]=n[c=f*t+a<<2],m[s+1]=n[1+c],m[s+2]=n[2+c],m[s+3]=n[3+c];else for(a=r,f=i,s=0;f<=o;s+=4,++a)u<a&&(a=r,++f),l=h(a,f),m[s]=F(l[0],0,255),m[s+1]=F(l[1],0,255),m[s+2]=F(l[2],0,255),m[s+3]=F(sn.round(255*l[3]),0,255);return m},y=function(n,t,e,r,i,u,o,l,a,f,s,c){var m,h,d;for(o=sn.min(o,i-1),l=sn.min(l,u-1),s=sn.min(s,t-1),c=sn.min(c,e-1),a=sn.min(a,i-1),f=sn.min(f,u-1),s-=o,c-=l,h=o,d=l;d<=f;++h)a<h&&(h=o,++d),e<=d+c||t<=h+s||g(h+s,d+c,r[m=d*i+h<<2],r[1+m],r[2+m],r[3+m]/255,"copy")},x.drawImage=function(n,t,e,r,i,u,o,l,a){n&&n.data||B("Invalid image data in drawImage");var f=D,s=S,c=n.width,m=n.height,n=n.data,h=E.Interpolation.bilinear,d=arguments.length;c&&m||B("Invalid image data in drawImage"),t=t||0,e=e||0,3===d?y(0,f,s,n,c,m,0,0,c-1,m-1,u=t,o=e):5===d?(u=t,o=e,a=i,y(0,f,s,c===(l=r)&&m===a?n:h(n,c,m,l,a),l,a,0,0,l-1,a-1,u,o)):y(0,f,s,r===l&&i===a?p(n,c,m,t,e,t+r-1,e+i-1):h(p(n,c,m,t,e,t+r-1,e+i-1),r,i,l,a),l,a,0,0,l-1,a-1,u,o)},x.getImageData=function(n,t,e,r){var i=D,u=S;return null==t&&(t=0),null==r&&(r=u),n=sn.max(0,sn.min(n=null==n?0:n,(e=null==e?i:e)-1,i-1)),t=sn.max(0,sn.min(t,r-1,u-1)),e=sn.min(n+e-1,e-1,i-1),r=sn.min(t+r-1,r-1,u-1),{data:p(null,i,u,n,t,e,r),width:e-n+1,height:r-t+1}},x.putImageData=function(n,t,e){n&&n.data||B("Invalid image data in putImageData");var r=n.width,i=n.height;y(0,D,S,n.data,r,i,0,0,r-1,i-1,t=null==t?0:t,e=null==e?0:e)},n(!0)}function G(n,c){var s,m,t,h,d,g,p=this,y=!0,x=[],v=null;R(p,"transform",{get:function(){return c.clone()},set:function(n){c=n}}),R(p,"_d",{get:function(){return x},set:function(n){}}),R(p,"_sd",{get:function(){return v=v||U(x)},set:function(n){}}),p.moveTo=function(n,t){n=C([n,t],c);return n&&(x.push(n),y=!1),p},p.closePath=function(){var n,t,e,r;return x.length&&2<x[x.length-1].length&&(n=+x[x.length-1][0],t=x[x.length-1][1],e=+x[x.length-1][x[x.length-1].length-2],r=x[x.length-1][x[x.length-1].length-1],yn(n,e,1e-6)&&yn(t,r,1e-6)||(x[x.length-1].push(n,t),x.push([n,t]),y=!1,v=null)),p},p.lineTo=function(n,t){n=C([n,t],c);return n&&(y?(x.push(n),y=!1):(x[x.length-1].push(n[0],n[1]),v=null)),p},p.rect=function(n,t,e,r){e=C([n,t,n+e,t,n+e,t+r,n,t+r],c);return e&&(e.push(e[0],e[1]),x.length&&x[x.length-1].length<=2?x[x.length-1]=e:x.push(e),x.push([e[0],e[1]]),e[0]=new w(+e[0],{lineCap:"butt",lineJoin:"miter"}),v=null,y=!1),p},p.roundRect=function(n,t,e,r){var i,u,o,l,a,f,s=C([n,t,e,r]);return s&&(((f=(arguments[4]&&arguments[4].push?arguments[4]:[].slice.call(arguments,4)).filter(function(n){return 0<n})).length<1||4<f.length)&&B("Invalid radii in roundRect"),4===f.length?(i=f[0],u=f[1],o=f[2],l=f[3]):3===f.length?(i=f[0],u=f[1],l=f[1],o=f[2]):l=2===f.length?(i=f[0],o=f[0],u=f[1],f[1]):(i=f[0],u=f[0],o=f[0],f[0]),e<0&&(n+=e,e=-e,a=i,i=u,u=a,a=l,l=o,o=a),r<0&&(t+=r,r=-r,a=i,i=l,l=a,a=u,u=o,o=a),(f=sn.min(e/(i+u),r/(u+o),e/(o+l),r/(i+l)))<1&&(i*=f,u*=f,l*=f,o*=f),T(s=[],n+i,t,c),T(s,n+e-u,t,c),k(s,n+e-u,t,n+e,t,n+e,t+u,u,c),T(s,n+e,t+r-o,c),k(s,n+e,t+r-o,n+e,t+r,n+e-o,t+r,o,c),T(s,n+l,t+r,c),k(s,n+l,t+r,n,t+r,n,t+r-l,l,c),T(s,n,t+i,c),k(s,n,t+i,n,t,n+i,t,i,c),s[0]=new w(+s[0],{lineCap:"butt",lineJoin:"bevel"}),x.push(s),x.push(c.transform(n,t)),v=null,y=!1),p},p.arc=function(n,t,e,r,i,u){var o=C([n,t,e,r,i]);return o&&(e<0&&B("Negative radius in arc"),(o=_(n,t,e,e,0,r,i,u,c))[0]=new w(+o[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),o[o.length-2]=new w(+o[o.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),y?(x.push(o),y=!1):x[x.length-1].push.apply(x[x.length-1],o),v=null),p},p.ellipse=function(n,t,e,r,i,u,o,l){var a=C([n,t,e,r,i,u,o]);return a&&((e<0||r<0)&&B("Negative radius in ellipse"),(a=_(n,t,e,r,i,u,o,l,c))[0]=new w(+a[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),a[a.length-2]=new w(+a[a.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),y?(x.push(a),y=!1):x[x.length-1].push.apply(x[x.length-1],a),v=null),p},p.arcTo=function(n,t,e,r,i){n=C([n,t,e,r,i]);return n&&(i<0&&B("Negative radius in arcTo"),y&&(x.push(c.transform(n[0],n[1])),y=!1),(n=f((t=c.inv().transform(+x[x.length-1][x[x.length-1].length-2],x[x.length-1][x[x.length-1].length-1]))[0],t[1],n[0],n[1],n[2],n[3],i,c))[0]=new w(+n[0],{type:"arc",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new w(+n[n.length-2],{type:"arc",lineCap:!0,lineJoin:!0}),x[x.length-1].push.apply(x[x.length-1],n),v=null),p},p.quadraticCurveTo=function(n,t,e,r){n=C([n,t,e,r],c);return n&&(y&&(x.push([n[0],n[1]]),y=!1),t=x[x.length-1].pop(),(n=o([+x[x.length-1].pop(),t,n[0],n[1],n[2],n[3]]))[0]=new w(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new w(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),x[x.length-1].push.apply(x[x.length-1],n),v=null),p},p.bezierCurveTo=function(n,t,e,r,i,u){n=C([n,t,e,r,i,u],c);return n&&(y&&(x.push([n[0],n[1]]),y=!1),t=x[x.length-1].pop(),(n=o([+x[x.length-1].pop(),t,n[0],n[1],n[2],n[3],n[4],n[5]]))[0]=new w(+n[0],{type:"bezier",lineCap:!0,lineJoin:"bevel"}),n[n.length-2]=new w(+n[n.length-2],{type:"bezier",lineCap:!0,lineJoin:!0}),x[x.length-1].push.apply(x[x.length-1],n),v=null),p},p.addPath=function(n){return n instanceof G&&(x.push.apply(x,n._d),v=null),p},p.dispose=function(){v=x=null},1===arguments.length&&(n instanceof M?(c=n,n=null):c=null),c=c||M.EYE(),n&&(n instanceof G?x.push.apply(x,n._d):(n=n,s=p,t=X(String(n)).match(e),h=n.split(e),g=[(d=[0,0])[0],d[1]],t&&t.forEach(function(n,t){var e,r,i,u,o,l,a=n===n.toLowerCase(),f=(X(h[t+1]||"").match(I)||[]).map(A);switch(n.toUpperCase()){case"M":for(l=!1;2<=f.length;)l?(e=[d[0],d[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],d[0]=r[0],d[1]=r[1],s.lineTo(d[0],d[1])):(d[0]=(a?d[0]:0)+f.shift(),d[1]=(a?d[1]:0)+f.shift(),g=[d[0],d[1]],s.moveTo(d[0],d[1])),l=!0;m=null;break;case"H":for(;1<=f.length;)e=[d[0],d[1]],r=[(a?e[0]:0)+f.shift(),e[1]],d[0]=r[0],d[1]=r[1],s.lineTo(d[0],d[1]);m=null;break;case"V":for(;1<=f.length;)r=[(e=[d[0],d[1]])[0],(a?e[1]:0)+f.shift()],d[0]=r[0],d[1]=r[1],s.lineTo(d[0],d[1]);m=null;break;case"L":for(;2<=f.length;)e=[d[0],d[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],d[0]=r[0],d[1]=r[1],s.lineTo(d[0],d[1]);m=null;break;case"A":for(;7<=f.length;)o={start:null,end:null,radiusX:f.shift(),radiusY:f.shift(),angle:f.shift(),largeArc:f.shift(),sweep:f.shift()},e=[d[0],d[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],d[0]=r[0],d[1]=r[1],o.start=e,o.end=r,s.ellipse.apply(s,function(n,t,e,r,i,u,o,l,a){var f=a?sn.cos(a):1,s=a?sn.sin(a):0,c=f*(n-e)/2+s*(t-r)/2,m=-s*(n-e)/2+f*(t-r)/2,h=c*c,d=m*m,g=o*o,p=l*l,y=h/g+d/p;1<y&&(y=sn.sqrt(y),g=(o*=y)*o,p=(l*=y)*l);y=sn.sqrt(sn.abs((g*p-g*d-p*h)/(g*d+p*h)))*(i===u?-1:1),g=y*o*m/l,d=-y*l*c/o,p=f*g-s*d+(n+e)/2,h=s*g+f*d+(t+r)/2,i=N(S(1,0,(c-g)/o,(m-d)/l)),y=S((c-g)/o,(m-d)/l,(-c-g)/o,(-m-d)/l);y-=sn.floor(y/b)*b,!u&&0<y&&(y-=b);u&&y<0&&(y+=b);return[p,h,o,l,a,i,i+y,!u]}(o.start[0],o.start[1],o.end[0],o.end[1],o.largeArc,o.sweep,o.radiusX,o.radiusY,o.angle));m=null;break;case"Q":for(;4<=f.length;)e=[d[0],d[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],i=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],d[0]=i[0],d[1]=i[1],s.quadraticCurveTo(r[0],r[1],i[0],i[1]),m=["Q",e,r,i];break;case"T":for(;2<=f.length;)e=[d[0],d[1]],i=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],r=m&&"Q"===m[0]?[2*e[0]-m[2][0],2*e[1]-m[2][1]]:[e[0],e[1]],d[0]=i[0],d[1]=i[1],s.quadraticCurveTo(r[0],r[1],i[0],i[1]),m=["Q",e,r,i];break;case"C":for(;6<=f.length;)e=[d[0],d[1]],r=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],i=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],u=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],d[0]=u[0],d[1]=u[1],s.bezierCurveTo(r[0],r[1],i[0],i[1],u[0],u[1]),m=["C",e,r,i,u];break;case"S":for(;4<=f.length;)e=[d[0],d[1]],i=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],u=[(a?e[0]:0)+f.shift(),(a?e[1]:0)+f.shift()],r=m&&"C"===m[0]?[2*e[0]-m[3][0],2*e[1]-m[3][1]]:[e[0],e[1]],d[0]=u[0],d[1]=u[1],s.bezierCurveTo(r[0],r[1],i[0],i[1],u[0],u[1]),m=["C",e,r,i,u];break;case"Z":e=[d[0],d[1]],r=[g[0],g[1]],d[0]=r[0],d[1]=r[1],g=[d[0],d[1]],s.lineTo(d[0],d[1]),m=null}})))}function M(n,t,e,r,i,u){var o=this,l=1,a=1;arguments.length&&(o.m11=n,o.m12=t,o.m13=e,o.m21=r,o.m22=i,o.m23=u),R(o,"a",{get:function(){return o.m11},set:function(n){o.m11=l=n}}),R(o,"c",{get:function(){return o.m12},set:function(n){o.m12=n}}),R(o,"e",{get:function(){return o.m13},set:function(n){o.m13=n}}),R(o,"b",{get:function(){return o.m21},set:function(n){o.m21=n}}),R(o,"d",{get:function(){return o.m22},set:function(n){o.m22=a=n}}),R(o,"f",{get:function(){return o.m23},set:function(n){o.m23=n}}),R(o,"is2D",{get:function(){return!0},set:function(n){}}),R(o,"isIdentity",{get:function(){return xn(o.m11,1)&&xn(o.m12,0)&&xn(o.m13,0)&&xn(o.m21,0)&&xn(o.m22,1)&&xn(o.m23,0)},set:function(n){}}),R(o,"sx",{get:function(){return l},set:function(n){l*=n}}),R(o,"sy",{get:function(){return a},set:function(n){a*=n}})}function w(n,t){this.value=n,this.params=t||null}function C(n,t){for(var e=0,r=n.length;e<r;++e)if(q(n[e])||!z(n[e]))return null;if(t)for(e=0;e<r;e+=2){var i=t.transform(n[e],n[e+1]);n[e]=i[0],n[e+1]=i[1]}return n}function T(n,t,e,r){r=r?r.transform(t,e):[t,e];n.push(r[0],r[1])}function k(n,t,e,r,i,u,o,l,a){n.push.apply(n,f(t,e,r,i,u,o,l,a))}function x(G,n,t,M,O,e,_,F,N,B,Y,U,Q,V){var r,i,u,o,l,X,$,j,H,a,f,s,c,m,h,d,g,p,y,x,v,W,Z,K,nn,b,tn,en,rn,un,w,C,T,k,on,I,R,q,ln,z,D,S,A,P,J,L,E=n.length,an=_,fn=e;if(E<6)cn(G,i=n[0],u=n[1],o=n[2],l=n[3],a=sn.abs(o-i),f=sn.abs(l-u),(c=mn(t,a,f,N,B))[0],c[1],e,e,t,Y,U,Q,V);else for(E-=2,r=0;r<E;r+=2)i=n[r],u=n[r+1],o=n[r+2],l=n[r+3],c=mn(t,a=sn.abs(o-i),f=sn.abs(l-u),N,B),i.params&&i.params.lineCap&&(fn=!0===i.params.lineCap?e:i.params.lineCap),cn(G,i,u,o,l,a,f,c[0],c[1],0===r?fn:null,E===r+2?fn:null,t,Y,U,Q,V),0<r&&(0<s[0]||0<s[1]||0<c[0]||0<c[1])&&(i.params&&i.params.lineJoin&&(an=!0===i.params.lineJoin?_:i.params.lineJoin),m=G,h=X,d=$,g=i,p=u,y=o,x=l,v=j,W=H,Z=s[0],K=s[1],nn=a,b=f,tn=c[0],en=c[1],rn=an,un=F,w=Y,C=U,T=Q,k=V,L=J=P=A=S=D=z=ln=q=R=I=on=void 0,yn((P=p<d?-1:1)*W*(J=y<g?-1:1)*nn,(L=x<p?-1:1)*b*(A=g<h?-1:1)*v,1e-6)||(on={x:h-(I=A*Z),y:d+(S=P*K)},h={x:h+I,y:d-S},d={x:g-I,y:p+S},I={x:g+I,y:p-S},R={x:g-(S=J*tn),y:p+(D=L*en)},q={x:g+S,y:p-D},ln={x:y-S,y:x+D},y={x:y+S,y:x-D},S={x:g,y:p},x=L*b*A*v<P*W*J*nn?(z=d,R):(z=I,q),J*P*A*L<0&&(z=I===z?d:I,x=q===x?R:q),A*L<0&&(z=I===z?d:I),J*P<0&&(x=q===x?R:q),A*J<0&&(z=I===z?d:I,x=q===x?R:q),"bevel"===rn?(gn(m,z.x,z.y,x.x,x.y,null,null,1,w,C,T,k),hn(m,S.x,S.y,z.x,z.y,x.x,x.y,w,C,T,k)):(D=x===q?y:ln,p=function(n,t,e,r,i,u,o,l){var a=r-t,f=n-e,e=e*t-n*r,t=l-u,n=i-o,r=o*u-i*l,o=a*n-f*t;return!xn(o,0)&&{x:(f*r-e*n)/o,y:(e*t-a*r)/o}}((g=z===I?h:on).x,g.y,z.x,z.y,x.x,x.y,D.x,D.y),b=pn(p.x-S.x,p.y-S.y),v=sn.min(pn(Z,K),pn(tn,en)),"round"===rn?(p={x:S.x+v*(p.x-S.x)/b,y:S.y+v*(p.y-S.y)/b},hn(m,S.x,S.y,z.x,z.y,x.x,x.y,w,C,T,k),dn(m,z.x,z.y,x.x,x.y,p.x,p.y,v,w,C,T,k)):un*v<b?(gn(m,z.x,z.y,x.x,x.y,null,null,1,w,C,T,k),hn(m,S.x,S.y,z.x,z.y,x.x,x.y,w,C,T,k)):(gn(m,z.x,z.y,p.x,p.y,null,null,1,w,C,T,k),gn(m,x.x,x.y,p.x,p.y,null,null,1,w,C,T,k),hn(m,S.x,S.y,z.x,z.y,x.x,x.y,w,C,T,k),hn(m,p.x,p.y,z.x,z.y,x.x,x.y,w,C,T,k))))),X=i,$=u,j=a,H=f,s=c}function cn(n,t,e,r,i,u,o,l,a,f,s,c,m,h,d,g){var p,y,x,v,b;0===l&&0===a?gn(n,t,e,r,i,u,o,c,m,h,d,g,!0,!0):(n=n,e=e,i=i,o=o,l=l,a=a,f=f,s=s,c=c,m=m,h=h,d=d,g=g,(r=r)<(t=t)&&(p=t,t=r,r=p,p=e,e=i,i=p,p=f,f=s,s=p),p=i<e?-1:1,xn(u=u,0)?("square"===f&&(e-=p*l),"square"===s&&(i+=p*l),"round"===f&&dn(n,t-l,e,t+l,e,t,e-p*l,l,m,h,d,g),"round"===s&&dn(n,r-l,i,r+l,i,r,i+p*l,l,m,h,d,g),D(n,sn.round(t-l),sn.round(e),sn.round(t+l),sn.round(i),m,h,d,g)):xn(o,0)?("square"===f&&(t-=+a),"square"===s&&(r+=+a),"round"===f&&dn(n,t,e-a,t,e+a,t-a,e,a,m,h,d,g),"round"===s&&dn(n,r,i-a,r,i+a,r+a,i,a,m,h,d,g),D(n,sn.round(t),sn.round(e-a),sn.round(r),sn.round(e+a),m,h,d,g)):("square"===f&&(t-=+a,e-=p*l),"square"===s&&(r+=+a,i+=p*l),o=t-(u=+l),v=e+(y=p*a),t=t+u,e=e-y,x=r-u,b=i+y,r=r+u,u=i-y,c=pn(l,a),"round"===f?dn(n,o,v,t,e,(o-+a+t-+a)/2,(v-p*l+e-p*l)/2,c,m,h,d,g):gn(n,o,v,t,e,null,null,1,m,h,d,g),gn(n,t,e,r,u,null,null,1,m,h,d,g),"round"===s?dn(n,r,u,x,b,(+a+x+r+ +a)/2,(b+p*l+u+p*l)/2,c,m,h,d,g):gn(n,r,u,x,b,null,null,1,m,h,d,g),gn(n,x,b,o,v,null,null,1,m,h,d,g),hn(n,o,v,t,e,x,b,m,h,d,g),hn(n,t,e,x,b,r,u,m,h,d,g)))}function mn(n,t,e,r,i){n=sn.abs(n/2),e=xn(t,0)?[r*n,0]:xn(e,0)?[0,i*n]:[r*e*n/(r=pn(t,e)),i*t*n/r];return e=e[0]<=.5&&e[1]<=.5?[0,0]:e}function D(n,t,e,r,i,u,o,l,a){var f,s;if(r<t&&(f=t,t=r,r=f),i<e&&(s=e,e=i,i=s),null!=u){if(r<u||l<t||i<o||a<e)return;t=sn.max(t,u),e=sn.max(e,o),r=sn.min(r,l),i=sn.min(i,a)}if(e===i)for(f=t;f<=r;++f)n(f,e,1);else if(t===r)for(s=e;s<=i;++s)n(t,s,1);else for(s=e;s<=i;++s)for(f=t;f<=r;++f)n(f,s,1)}function hn(n,t,e,r,i,u,o,l,a,f,s){var c,m,h,d,g,p,y,x,v,b,w,C,T,k,I=null!=l;if(!I||!(sn.max(t,r,u)<l||sn.min(t,r,u)>f||sn.max(e,i,o)<a||sn.min(e,i,o)>s)){if(i<e&&(h=e,e=i,i=h,h=t,t=r,r=h),o<e&&(h=e,e=o,o=h,h=t,t=u,u=h),o<i&&(h=i,i=o,o=h,h=r,r=u,u=h),xn(b=o-e,0))return d=sn.round(e),D(n,c=sn.round(sn.min(t,r,u)),d,m=sn.round(sn.max(t,r,u)),d,l,a,f,s);for(C=o-i,y=u-t,x=r-t,v=u-r,T=xn(w=i-e,0),k=xn(C,0),d=sn.round(e+.5),g=i,p=sn.round(o-.5),I&&(d=sn.max(a,d),p=sn.min(s,p));d<=p;++d)if(m=d<g?T?(c=t,r):(c=y*(d-e)/b+t,x*(d-e)/w+t):k?(c=r,u):(c=y*(d-e)/b+t,v*(d-i)/C+r),sn.abs(m-c)<1)(!I||l<=c&&c<=f)&&n(sn.round(c),d,1);else for(m<c&&(h=c,c=m,m=h),c=sn.round(c+.5),m=sn.round(m-.5),I&&(c=sn.max(l,c),m=sn.min(f,m));c<=m;++c)n(c,d,1)}}function dn(n,t,e,r,i,u,o,l,a,f,s,c){var m,h,d,g,p,y,x,v,b,w,C,T,G,k,I,R,q,z,D,S,A,P,J,L,E,M=null!=a;for(i<e&&(z=e,e=i,i=z,z=t,t=r,r=z),z=u,D=o,P=r,J=i,L=(P-=S=t)*(z-=S)+(J-=A=e)*(D-=A),E=pn(P,J),pn(z,D),S=u+l/(D=pn(u-(w=[S+(z=L/E)*P/E,A+z*J/E])[0],o-w[1]))*(w[0]-u),L=o+l/D*(w[1]-o),P=sn.atan2(o-L,u-S),A=sn.atan2(e-L,t-S),J=sn.atan2(i-L,r-S),P=N(P),E=N(A),D=N(J),R=(w=_(S,L,l,l,0,A,J,!(P<E&&P<D||E<P&&D<P||E<P&&P<D))).length-2,k=0;k<R;k+=2)gn(n,w[k],w[k+1],w[k+2],w[k+3],null,null,1,a,f,s,c);for(w=U([w]),m=sn.round(sn.min(e,i,o,w.ymin)),h=sn.round(sn.max(e,i,o,w.ymax)),M&&(m=sn.max(m,f),h=sn.min(h,c)),C=r-t,G=xn(T=i-e,0),k=0,R=w.length;m<=h;++m){for(;k<R&&w[k][3]<m;)++k;if(R<=k)break;if((q=w[k])[1]>m)m=sn.floor(q[1]);else{for(g=-(d=O),e<=m&&m<=i&&(g=G?(d=sn.min(d,t,r),sn.max(g,t,r)):(d=sn.min(d,p=C*(m-e)/T+t),sn.max(g,p))),I=k;I<R&&w[I][1]<=m;++I)(q=w[I])[3]>=m&&(y=q[0],x=q[2],g=xn(v=q[1],b=q[3])?(d=sn.min(d,y,x),sn.max(g,y,x)):(d=sn.min(d,p=(x-y)*(m-v)/(b-v)+y),sn.max(g,p)));for(d=sn.round(d+.5),g=sn.round(g-.5),M&&(d=sn.max(d,a),g=sn.min(g,s));d<=g;++d)n(d,m,1)}}}function gn(n,t,e,r,i,u,o,l,a,f,s,c,m,h){var d=sn.min(t,r),g=sn.max(t,r),p=sn.min(e,i),y=sn.max(e,i);if(!(g<a||s<d||y<f||c<p)){if(null==u&&(u=sn.abs(r-t),o=sn.abs(i-e)),d<a||s<g||p<f||c<y){d=function(n,t,e,r,i,u,o,l){var a=-(e=-(e-n)),f=-(r=-(r-t)),i=n-i,o=o-n,u=t-u,l=l-t,s=1,c=0;if(!(0==e&&i<0||0==a&&o<0||0==r&&u<0||0==f&&l<0||(0!=e&&(i=i/e,o=o/a,e<0?(c<i&&(c=i),o<s&&(s=o)):(c<o&&(c=o),i<s&&(s=i))),0!=r&&(e=u/r,o=l/f,r<0?(c<e&&(c=e),o<s&&(s=o)):(c<o&&(c=o),e<s&&(s=e))),s<c)))return[n+a*c,t+f*c,n+a*s,t+f*s]}(t,e,r,i,a,f,s,c);if(!d)return;t=d[0],e=d[1],r=d[2],i=d[3]}if(xn(u,0)||xn(o,0))return D(n,sn.round(t),sn.round(e),sn.round(r),sn.round(i));var x,v,b,w,C=0,T=0,k=0,g=u<o,I=l<1?l:1;if(g&&(x=t,t=e,e=x,x=r,r=i,i=x,x=u,u=o,o=x),r<t&&(x=t,t=r,r=x,v=e,e=i,i=v),y=e+(w=(i<e?-1:1)*o/u)*((p=sn.round(t))-t),a=m?1:1-(t+.5-sn.floor(t+.5)),f=p,k=1-(T=y-(s=sn.floor(y))),g?(n(s,f,I*k*a),n(s+1,f,I*T*a)):(n(f,s,I*k*a),n(f,s+1,I*T*a)),C=y+w,y=i+w*((p=sn.round(r))-r),a=h?1:r+.5-sn.floor(r+.5),b=p,k=1-(T=y-(c=sn.floor(y))),g?(n(c,b,I*k*a),n(c+1,b,I*T*a)):(n(b,c,I*k*a),n(b,c+1,I*T*a)),g)for(x=f+1;x<b;++x)0<(k=1-(T=C-(v=sn.floor(C))))&&n(v,x,I*k),0<T&&n(v+1,x,I*T),C+=w;else for(x=f+1;x<b;++x)0<(k=1-(T=C-(v=sn.floor(C))))&&n(x,v,I*k),0<T&&n(x,v+1,I*T),C+=w}}function _(r,i,u,o,n,l,t,e,a){f=t,e=e,s=N(c=l),f+=s-c,!e&&b<=f-s?f=s+b:e&&b<=s-f?f=s-b:!e&&f<s?f=s+(b-N(s-f)):e&&s<f&&(f=s-(b-N(f-s)));var f,s,c=[s,f],m=(l=c[0],t=c[1],n?sn.cos(n):1),h=n?sn.sin(n):0,d=t-l,g=a&&!a.isIdentity;return p(function(n){var n=l+n*d,t=u*sn.cos(n),n=o*sn.sin(n),e=r+m*t-h*n,t=i+h*t+m*n;return g?a.transform(e,t):[e,t]})}function f(n,t,e,r,i,u,o,l){var a=[],n=function(n,t,e,r,i,u,o){if(yn(e,n)&&yn(r,t)||yn(e,i)&&yn(r,u)||yn(o,0))return[e,r];var l,a,f,s=!1;if(i={x:i-e,y:u-r},a=pn((u={x:n-e,y:t-r}).x,u.y),f=pn(i.x,i.y),xn(l=(u.x*i.x+u.y*i.y)/(a*f),-1))return[e,r];if(xn(l,1))return[n+(n=65535/a)*u.x,t+n*u.y];t=o/sn.tan(sn.acos(l)/2),l={x:e+(n=t/a)*u.x,y:r+n*u.y},n=pn((a={x:u.y,y:-u.x}).x,a.y),u=o/n,(a.x*i.x+a.y*i.y)/(n*f)<0&&(a={x:-a.x,y:-a.y});u={x:l.x+u*a.x,y:l.y+u*a.y},a={x:-a.x,y:-a.y},n=sn.acos(a.x/n),a.y<0&&(n=b-n);f=pn((t={x:(e={x:e+(a=t/f)*i.x,y:r+a*i.y}).x-u.x,y:e.y-u.y}).x,t.y),r=sn.acos(t.x/f),t.y<0&&(r=b-r);r<n&&n-r<c&&(s=!0);n<r&&c<r-n&&(s=!0);return[l.x,l.y,u.x,u.y,n,r,!(!s||yn(b,o))]}(n,t,e,r,i,u,o);return n&&2<=n.length&&(t=l?l.transform(n[0],n[1]):[n[0],n[1]],a.push(t[0],t[1]),2<n.length)&&a.push.apply(a,_(n[2],n[3],o,o,0,n[4],n[5],n[6],l)),a}function o(o){return p(6<o.length?function(n){var t=1-n,e=n*n,r=t*t,i=r*t,u=e*n,r=3*r*n,n=3*e*t;return[i*o[0]+r*o[2]+n*o[4]+u*o[6],i*o[1]+r*o[3]+n*o[5]+u*o[7]]}:function(n){var t=1-n,e=t*t,t=2*t*n,n=n*n;return[e*o[0]+t*o[2]+n*o[4],e*o[1]+t*o[3]+n*o[5]]})}function Y(n,t,e,r,i,u,o,l,a,f,s,c,m,h){for(var d,g=0,p=t._d,y=p.length;g<y;++g)(d=p[g])&&2<d.length&&x(n,d,e,0,0,u,o,l,a,f,s,c,m,h)}function U(n){if(!n)return[];for(var t,e,r,i,u=[],o=n.length,l=O,a=-O,f=0,s=0,c=0;c<o;++c)if((i=n[c])&&!((t=i.length-2)<=0)){for(++f,r=-(s=1),e=0;e<t;e+=2)i[e].params&&i[e].params.type&&(0<=r&&u.length&&(u[r][7]=u[r+s-2][6]+1,u[r+s-2][7]=u[r][6]+1),++f,s=1,r=u.length),l=sn.min(l,i[e+1]),a=sn.max(a,i[e+1]),i[e+1]>i[e+3]?u.push([+i[e+2],i[e+3],+i[e],i[e+1],-1,f,s,s,0,0]):u.push([+i[e],i[e+1],+i[e+2],i[e+3],1,f,s,s,0,0]),++s;l=sn.min(l,i[1+t]),a=sn.max(a,i[1+t])}return(u=u.sort(d)).ymin=l,u.ymax=a,u}function Q(n,t){for(var e,r,i,u=0,o=0;o<t;++o)if(!(r=n[o])[9])for(e=o+1;e<t;++e)(i=n[e])[9]||r[4]!==i[4]||r[5]!==i[5]||1<sn.abs(r[6]-i[6])&&1<sn.abs(r[7]-i[7])||(yn(r[0],i[0],1e-5)&&yn(r[1],i[1],1e-5)&&yn(r[2],i[2],1e-5)&&yn(r[3],i[3],1e-5)||yn(r[3],i[1],1e-6)||yn(r[1],i[3],1e-6))&&(i[9]=1,++u);return u}function p(n){var t,e=[],r=u,i=n(0);for(e.push(i[0],i[1]),t=0;t<r;++t)i=function n(t,e,r,i,u,o){if(i<=r||yn(r,i,1e-6))return u;u=u||e(r);o=o||e(i);var l,a=pn(o[0]-u[0],o[1]-u[1]);if(a<=s){if(a<1)return u;t.push(o[0],o[1])}else h((l=e(a=(r+i)/2))[0],l[1],u[0],u[1],o[0],o[1])<=m?t.push(o[0],o[1]):(n(t,e,r,a,u,l),n(t,e,a,i,l,o));return o}(e,n,0===t?0:t/r,r===t+1?1:(t+1)/r,i,null);return e}function V(n,t,e,r,i,u){return(n-e)*(u-r)-(i-e)*(t-r)<0?-1:1}function pn(n,t){n=sn.abs(n),t=sn.abs(t);var e=0;return xn(n,0)?t:xn(t,0)?n:t<n?n*sn.sqrt(1+(e=t/n)*e):n<t?t*sn.sqrt(1+(e=n/t)*e):n*r}function h(n,t,e,r,i,u){var i=i-e,u=u-r,o=pn(i,u);return xn(o,0)?pn(n-e,t-r):sn.abs(i*(r-t)-u*(e-n))/o}function S(n,t,e,r){var i,u,o=n*r-t*e;return e=e,r=r,i=pn(n=n,t=t),u=pn(e,r),(o<0?-1:1)*(xn(i,0)||xn(u,0)?0:sn.acos(F(n/i*(e/u)+t/i*(r/u),-1,1)))}function yn(n,t,e){return sn.abs(n-t)<(e||1e-6)}function xn(n,t){return sn.abs(n-t)<Number.EPSILON}function F(n,t,e){return sn.min(sn.max(n,t),e)}function N(n){return n=n,e=0,r=t=b,(n-=t*sn.floor(n/t))<e&&(n+=t),r<n&&(n-=t),n;var t,e,r}function d(n,t){var e=n[1]-t[1];return yn(e,0)?n[3]-t[3]:e}function A(n){return parseFloat(n||"")||0}function X(n){return n.trim()}function B(n){throw new Error(n)}function t(){}return L.VERSION="0.9.91",L[n]={constructor:L,width:null,height:null,getContext:null},L.getRGBAFrom=function(u){var e;return"function"==typeof u?function(n,t){n=u(n,t);return[n[0],n[1],n[2],3<n.length?n[3]/255:1]}:u.data&&null!=u.width&&null!=u.height?function(n,t){var e=u.width,r=u.height,i=u.data;return 0<=n&&n<e&&0<=t&&t<r?[i[r=n+e*t<<2],i[1+r],i[2+r],i[3+r]/255]:J}:(e=[u[0]||0,u[1]||0,u[2]||0,3<u.length?u[3]||0:1],function(n,t){return e})},L.setRGBATo=function(y){var n;return"function"==typeof y?y:((n=function(n,t,e,r,i,u,o){var l=y.width,a=y.height,f=y.data;if(0<=n&&n<l&&0<=t&&t<a){var a=n+l*t<<2,n=f[a]||0,l=f[1+a]||0,t=f[2+a]||0,s=(f[3+a]||0)/255,c=u,m=null,h=0,d=0,g=0,p=0;switch("clear"!==(o=o||"source-over")&&"copy"!==o&&(m=(m=E.CompositionMode[o])||E.CompositionMode[o="source-over"]),o){case"clear":m=null;break;case"copy":h=e,d=r,g=i,p=F(sn.round(255*c),0,255),m=null;break;case"xor":case"destination-out":case"destination-in":case"destination-atop":case"destination-over":case"source-out":case"source-in":case"source-atop":case"source-over":p=m(s,s,c,c);break;default:p=c+s-c*s}m&&(p=0<p?(h=F(sn.round(255*m(s*n/255,s,c*e/255,c)/p),0,255),d=F(sn.round(255*m(s*l/255,s,c*r/255,c)/p),0,255),g=F(sn.round(255*m(s*t/255,s,c*i/255,c)/p),0,255),F(sn.round(255*p),0,255)):g=d=h=0),f[a]=h,f[1+a]=d,f[2+a]=g,f[3+a]=p}}).$target=y,n)},E[n]={constructor:E,strokeStyle:null,fillStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:null,lineDashOffset:null,getLineDash:null,setLineDash:null,globalAlpha:null,globalCompositeOperation:null,save:null,restore:null,reset:null,scale:null,rotate:null,translate:null,transform:null,getTransform:null,setTransform:null,resetTransform:null,beginPath:null,closePath:null,moveTo:null,lineTo:null,rect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,clearRect:null,strokeRect:null,fillRect:null,stroke:null,fill:null,clip:null,isPointInStroke:null,isPointInPath:null,createImageData:function(n,t){return null==t&&null!=n.width&&null!=n.height&&(t=n.height,n=n.width),{data:new P(n*t<<2),width:n,height:t}},getImageData:null,putImageData:null,drawImage:null,createLinearGradient:t,createRadialGradient:t,createConicGradient:t,createPattern:t,strokeText:t,fillText:t,measureText:t},((L.RenderingContext2D=E).CompositionMode={xor:function(n,t,e,r){return e*(1-t)+n*(1-r)},"destination-out":function(n,t,e,r){return n*(1-r)},"destination-in":function(n,t,e,r){return n*r},"destination-atop":function(n,t,e,r){return e*(1-t)+n*r},"destination-over":function(n,t,e,r){return e*(1-t)+n},"source-out":function(n,t,e,r){return e*(1-t)},"source-in":function(n,t,e,r){return e*t},"source-atop":function(n,t,e,r){return e*t+n*(1-r)},"source-over":function(n,t,e,r){return e+n*(1-r)},multiply:function(n,t,e,r){return e*n+e*(1-t)+n*(1-r)},screen:function(n,t,e,r){return e+n-e*n},overlay:function(n,t,e,r){return 2*n<=t?2*e*n+e*(1-t)+n*(1-r):e*(1+t)+n*(1+r)-2*n*e-t*r},darken:function(n,t,e,r){return sn.min(e*t,n*r)+e*(1-t)+n*(1-r)},lighten:function(n,t,e,r){return sn.max(e*t,n*r)+e*(1-t)+n*(1-r)},"color-dodge":function(n,t,e,r){return e===r&&0===n?e*(1-t):e===r?r*t+e*(1-t)+n*(1-r):r*t*sn.min(1,n/t*r/(r-e))+e*(1-t)+n*(1-r)},"color-burn":function(n,t,e,r){return 0===e&&n===t?r*t+n*(1-r):0===e?n*(1-r):r*t*(1-sn.min(1,(1-(t?n/t:0))*r/e))+e*(1-t)+n*(1-r)},"hard-light":function(n,t,e,r){return 2*e<=r?2*e*n+e*(1-t)+n*(1-r):e*(1+t)+n*(1+r)-r*t-2*e*n},"soft-light":function(n,t,e,r){var i=t?n/t:0;return 2*e<=r?n*(r+(2*e-r)*(1-i))+e*(1-t)+n*(1-r):r<2*e&&4*n<=t?t*(2*e-r)*(16*sn.pow(i,3)-12*sn.pow(i,2)-3*i)+e-e*t+n:t*(2*e-r)*(sn.pow(i,.5)-i)+e-e*t+n},difference:function(n,t,e,r){return e+n-2*sn.min(e*t,n*r)},exclusion:function(n,t,e,r){return e*t+n*r-2*e*n+e*(1-t)+n*(1-r)}}).hardlight=E.CompositionMode["hard-light"],E.CompositionMode.softlight=E.CompositionMode["soft-light"],E.Interpolation={bilinear:function(n,t,e,r,i){for(var u,o,l,a,f,s,c,m,h,d,g=r*i<<2,p=new P(g),y=(t-1)/r,x=(e-1)/i,v=t<<2,b=0,w=0,C=0,T=0,k=0,I=0;I<g;I+=4,++b,w+=y)r<=b&&(k=(C+=x)-(d=(w=b=0)|C),T=d*t),u=n[m=T+(d=0|w)<<2],o=n[4+m],l=n[m+v],a=n[m+v+4],p[I]=F(sn.round(u*(f=(1-(h=w-d))*(1-k))+o*(s=h*(1-k))+l*(c=k*(1-h))+a*(h=h*k)),0,255),u=n[1+m],o=n[5+m],l=n[m+v+1],a=n[m+v+5],p[I+1]=F(sn.round(u*f+o*s+l*c+a*h),0,255),u=n[2+m],o=n[6+m],l=n[m+v+2],a=n[m+v+6],p[I+2]=F(sn.round(u*f+o*s+l*c+a*h),0,255),u=n[3+m],o=n[7+m],l=n[m+v+3],a=n[m+v+7],p[I+3]=F(sn.round(u*f+o*s+l*c+a*h),0,255);return p}},G[n]={constructor:G,_d:null,_sd:null,transform:null,dispose:null,addPath:null,moveTo:null,lineTo:null,rect:null,roundRect:null,arc:null,ellipse:null,arcTo:null,quadraticCurveTo:null,bezierCurveTo:null,closePath:null},E.Path2D=G,M[n]={constructor:M,is2D:!0,isIdentity:!0,m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1,a:null,b:null,c:null,d:null,e:null,f:null,clone:function(){var n=this,t=new M(n.m11,n.m12,n.m13,n.m21,n.m22,n.m23);return t.sx=n.sx,t.sy=n.sy,t},mul:function(n){var t,e=this;if(n instanceof M)return(t=new M(e.m11*n.m11+e.m12*n.m21,e.m11*n.m12+e.m12*n.m22,e.m11*n.m13+e.m12*n.m23+e.m13,e.m21*n.m11+e.m22*n.m21,e.m21*n.m12+e.m22*n.m22,e.m21*n.m13+e.m22*n.m23+e.m23)).sx=e.sx*n.sx,t.sy=e.sy*n.sy,t},inv:function(){var n=this,t=n.m11,e=n.m12,r=n.m13,i=n.m21,u=n.m22,o=n.m23,l=t*u-e*i;return xn(l,0)?null:((i=new M(u=u/l,e=-e/l,-u*r-e*o,u=-i/l,e=t/l,-u*r-e*o)).sx=1/n.sx,i.sy=1/n.sy,i)},transform:function(n,t){1===arguments.length&&(t=n[1],n=n[0]);var e=this;return[e.m11*n+e.m12*t+e.m13,e.m21*n+e.m22*t+e.m23]}},M.translate=function(n,t){return new M(1,0,n||0,0,1,t||0)},M.scale=function(n,t,e,r){e=new M(n,0,-n*(e=e||0)+e,0,t,-t*(r=r||0)+r);return e.sx=n,e.sy=t,e},M.rotate=function(n,t,e){t=t||0,e=e||0;var r=sn.cos(n||0),n=sn.sin(n||0);return new M(r,-n,t-r*t+n*e,n,r,e-r*e-n*t)},M.skewX=function(n){return new M(1,n||0,0,0,1,0)},M.skewY=function(n){return new M(1,0,0,n||0,1,0)},M.EYE=function(){return new M(1,0,0,0,1,0)},E.Matrix2D=M,w[n]={constructor:w,value:0,params:null,valueOf:function(){return this.value},toString:function(){return String(this.value)}},L});